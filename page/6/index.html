<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Jeremie&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Jeremie&#39;s Blog">
<meta property="og:url" content="http://hexo.jeremie.moe/page/6/index.html">
<meta property="og:site_name" content="Jeremie&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Jeremie">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Jeremie&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jeremie&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives/">归档</a>
        
          <a class="main-nav-link" href="/about-blog/">关于Blog</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hexo.jeremie.moe"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Erlang分布式环境下注册名与调用方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/31/Erlang%E5%88%86%E5%B8%83%E5%BC%8F%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%B3%A8%E5%86%8C%E5%90%8D%E4%B8%8E%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95/" class="article-date">
  <time datetime="2015-07-31T12:27:33.000Z" itemprop="datePublished">2015-07-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Erlang/">Erlang</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/31/Erlang%E5%88%86%E5%B8%83%E5%BC%8F%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%B3%A8%E5%86%8C%E5%90%8D%E4%B8%8E%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95/">Erlang分布式环境下注册名与调用方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在分布式环境下进行远程调用</p>
<p>标准的OTP模型是使用global参数注册server名，使用global参数进行调用<br>global注册时会将信息注册到kernel.global模块中.global模块会在分布式系统运行时运行</p>
<p>参见</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kernel-3.2&#x2F;doc&#x2F;html&#x2F;global.htmlstdlib-2.4&#x2F;doc&#x2F;html&#x2F;gen_server.html#start\_link-3 stdlib-2.4&#x2F;doc&#x2F;html&#x2F;gen_server.html#cast-2</span><br></pre></td></tr></table></figure>

<p>同样的，在gen_server文档中的一个细节是<br>如果start_link注册是使用的是global模式，在cast、call等调用时也要使用该模式才能正确调用<br>另：在不同节点上的代码要直接访问的部分一定要在调用节点本地有代码被加载，否则无法正确调用运行</p>
<p>下面的内容来自：<a href="https://veniceweb.googlecode.com/svn/trunk/public/daily_tech_doc/erlang_global_20091109.txt" target="_blank" rel="noopener">https://veniceweb.googlecode.com/svn/trunk/public/daily_tech_doc/erlang_global_20091109.txt</a></p>
<hr>
<p>重点介绍erlang的global模块.</p>
<ol>
<li>介绍:<br>这个全局服务是通过一个global_name_server的process来提供的，这个进程存在于每一个erlang node, 这个全局名字服务在每个节点启动的时候自动启动.</li>
</ol>
<p>这个模块在所有的链接的erlang节点的集群中实现了register_name/2和whereis_name/1的功能.一个注册名是一个pid的别名，<br>这个名字服务进程管理这些注册的pid,如果一个process终止，名字将自动被注销unregistered.</p>
<p>这些注册名储存在name table中，这个name table在每一个节点上都存在，因此名字服务的调用是快速的，当一个操作改变了name table, 所有的节点的name table都会自动被更新.</p>
<ol start="2">
<li>单个节点的例子:<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-module</span><span class="params">(test)</span>.</span><br><span class="line"><span class="keyword">-export</span><span class="params">([start/<span class="number">1</span>, rpc_call/<span class="number">2</span>, handle_msg/<span class="number">1</span>])</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">start</span><span class="params">(Name)</span> -&gt;</span></span><br><span class="line">    Pid = spawn(?MODULE, handle_msg, [Name]),</span><br><span class="line">    register(Name, Pid).          <span class="comment">%% 在本地node注册process的名字</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">rpc_call</span><span class="params">(Name, Msg)</span> -&gt;</span></span><br><span class="line">    Name ! &#123;Msg, self()&#125;,         <span class="comment">%% 向本地node的process发消息</span></span><br><span class="line">    <span class="keyword">receive</span></span><br><span class="line">        &#123;Reply, Name&#125; -&gt;</span><br><span class="line">            Reply</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">handle_msg</span><span class="params">(Name)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">receive</span></span><br><span class="line">        &#123;stop, Pid&#125; -&gt;</span><br><span class="line">            Pid ! &#123;stop, Name&#125;;</span><br><span class="line">        &#123;Msg, Pid&#125; -&gt;</span><br><span class="line">            Pid ! &#123;“received your msg: ” ++ Msg, Name&#125;,</span><br><span class="line">            handle_msg(Name)</span><br><span class="line">    <span class="keyword">end</span>.</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>测试:<br>启动一个本地的process, 并注册一个名字pid1, 调用whereis/1测试,返回Pid,<br>测试通过名字pid1对进程发消息,<br>之后停止process, 再次调用whereis/1测试，返回undefined</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; test:start(pid1).</span><br><span class="line">true</span><br><span class="line">&gt; whereis(pid1).</span><br><span class="line">&lt;0.64.0&gt;</span><br><span class="line">&gt; test:rpc_call(pid1, “test – 1”).</span><br><span class="line">“received your msg: test – 1”</span><br><span class="line">&gt; test:rpc_call(pid1, “test – 2”).</span><br><span class="line">“received your msg: test – 2”</span><br><span class="line">&gt; test:rpc_call(pid1, stop).</span><br><span class="line">stop</span><br><span class="line">&gt; whereis(pid1).</span><br><span class="line">undefined</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>Erlang Nodes集群的例子:<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-module</span><span class="params">(test)</span>.</span><br><span class="line"><span class="keyword">-export</span><span class="params">([start/<span class="number">2</span>, rpc_call/<span class="number">2</span>, handle_msg/<span class="number">1</span>])</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">start</span><span class="params">(Name, Node)</span> -&gt;</span></span><br><span class="line">    Pid = spawn(Node, ?MODULE, handle_msg, [Name]),</span><br><span class="line">    global:register_name(Name, Pid).    <span class="comment">%% 注册global的process的名字</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">rpc_call</span><span class="params">(Name, Msg)</span> -&gt;</span></span><br><span class="line">    global:send(Name, &#123;Msg, self()&#125;),   <span class="comment">%% 向global的name消息发送方式</span></span><br><span class="line">    <span class="keyword">receive</span></span><br><span class="line">        &#123;Reply, Name&#125; -&gt;</span><br><span class="line">        Reply</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">handle_msg</span><span class="params">(Name)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">receive</span></span><br><span class="line">        &#123;stop, Pid&#125; -&gt;</span><br><span class="line">            Pid ! &#123;stop, Name&#125;;</span><br><span class="line">        &#123;Msg, Pid&#125; -&gt;</span><br><span class="line">            Pid ! &#123;“received your msg: ” ++ Msg, Name&#125;,</span><br><span class="line">            handle_msg(Name)</span><br><span class="line">    <span class="keyword">end</span>.</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>测试:<br>在同一台机器上启动三个节点的erlang集群:</p>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">erl -sname node1 -setcookie testcookie</span><br><span class="line">erl -sname node2 -setcookie testcookie</span><br><span class="line">erl -sname node3 -setcookie testcookie</span><br></pre></td></tr></table></figure>
<p>在node1上启动服务:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(node1@dev-pc)&gt; test:start(pid1, node()).</span><br><span class="line">yes</span><br><span class="line">(node1@dev-pc)&gt; test:rpc_call(pid1, “msg – 1”).</span><br><span class="line">“received your msg: msg – 1”</span><br><span class="line">在node2和node3上测试效果:</span><br><span class="line">(node3@dev-pc)&gt; test:rpc_call(pid1, “msg – 3”).</span><br><span class="line">“received your msg: msg – 3”</span><br><span class="line"></span><br><span class="line">(node2@dev-pc)&gt; test:rpc_call(pid1, “msg – 2”).</span><br><span class="line">“received your msg: msg – 2”</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>分布式的知识补充:<br>&lt;1&gt; 如何在调用远程node上的方法?<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpc:call(Node, Mod, Func, [Arg1, … ArgN]).</span><br></pre></td></tr></table></figure>
会在Node上进行一次Mod:Func(Arg1, … ArgN)调用.</li>
</ol>
<p>节点名的形式是: NodeName@Host, NodeName和Host都是atom(), 其实整个节点名就是一个atom().</p>
<p>&lt;2&gt; 在不需要DNS的情况下使用<code>erl -sname node1</code>, 需要DNS的情况下使用<code>erl -name node2</code></p>
<p>&lt;3&gt; 设置cookie:</p>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">erl -setcookie testcookie</span><br></pre></td></tr></table></figure>
<p>或者erlang:set_cookie(Node, testcookie)</p>
<p>&lt;4&gt; 如何保持两个node上的代码版本一致?<br>可以使用nl(Mod), 这个操作会使所有互联的节点上加载Mod.</p>
<p>&lt;5&gt; 判断节点的连通性: net_adm:ping(Node)</p>
<p>&lt;6&gt; <code>node() -&gt; Node</code> 返回本地节点的名字<br><code>nodes() -&gt; [Node]</code> 返回网络上与当前节点连接的所有其它节点列表</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2015/07/31/Erlang%E5%88%86%E5%B8%83%E5%BC%8F%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%B3%A8%E5%86%8C%E5%90%8D%E4%B8%8E%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95/" data-id="ck8b0i9gf0008rg269ixk9ujl" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-SS客户端支持负载均衡与服务器优选" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/31/SS%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%94%AF%E6%8C%81%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BC%98%E9%80%89/" class="article-date">
  <time datetime="2015-07-31T12:19:26.000Z" itemprop="datePublished">2015-07-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Code/">Code</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/31/SS%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%94%AF%E6%8C%81%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BC%98%E9%80%89/">SS客户端支持负载均衡与服务器优选</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最新版Shadowsocks-win-2.5.1已经支持多服务器负载均衡与优选功能了<br>在选择服务器的菜单中已经有了“负载均衡”和“高可用”的选项了<br>再也不会因为视频大流量导致TCP链接被临时阻断了<br>看视频时使用负载均衡能够使得YTB视频加载更快<br>浏览网页时使用高可用提高网页加载速度..</p>
<p>看了一下Git上该项目的说明，可以自己实现IStrategy类改进负载均衡的算法。<br>而看了一下当前默认的负载均衡算法，TCP部分使用的是随机分配算法，UDP部分使用的是标准的求余分布. 下面是负载均衡部分的服务器分布代码<br><a href="http://jeremie.moe/wordpress/wp-content/uploads/2015/07/2015-07-31-20_12_32-shadowsocks-csharp-Microsoft-Visual-Studio管理员.png" target="_blank" rel="noopener"></a><a href="http://jeremie.moe/wordpress/wp-content/uploads/2015/07/2015-07-31-20_12_32-shadowsocks-csharp-Microsoft-Visual-Studio管理员.png" target="_blank" rel="noopener"><img src="http://jeremie.moe/wordpress/wp-content/uploads/2015/07/2015-07-31-20_12_32-shadowsocks-csharp-Microsoft-Visual-Studio%E7%AE%A1%E7%90%86%E5%91%98.png" alt="2015-07-31 20_12_32-shadowsocks-csharp - Microsoft Visual Studio(管理员)"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public Server GetAServer(IStrategyCallerType type, IPEndPoint localIPEndPoint)</span><br><span class="line">&#123;</span><br><span class="line">    var configs &#x3D; _controller.GetCurrentConfiguration().configs;</span><br><span class="line">    int index;</span><br><span class="line">    if (type &#x3D;&#x3D; IStrategyCallerType.TCP)</span><br><span class="line">    &#123;</span><br><span class="line">        index &#x3D; _random.Next();</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">        index &#x3D; localIPEndPoint.GetHashCode();</span><br><span class="line">    &#125;</span><br><span class="line">    return configs[index % configs.Count];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我感觉负载均衡算法如果能够再加入可用性测试的部分就更好.<br>像我这种有五六个服务器的使用这个样的会更好….</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2015/07/31/SS%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%94%AF%E6%8C%81%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BC%98%E9%80%89/" data-id="ck8b0i9gk000mrg26gzybf2eh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-archlinux/archlinux安装bftpd服务器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/24/archlinux/archlinux%E5%AE%89%E8%A3%85bftpd%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="article-date">
  <time datetime="2015-07-24T10:13:20.000Z" itemprop="datePublished">2015-07-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ArchLinux/">ArchLinux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/24/archlinux/archlinux%E5%AE%89%E8%A3%85bftpd%E6%9C%8D%E5%8A%A1%E5%99%A8/">archlinux 安装bftpd服务器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>惯例的参考：<a href="http://bftpd.sourceforge.net/doc/en/bftpd-tutorial.html" target="_blank" rel="noopener">http://bftpd.sourceforge.net/doc/en/bftpd-tutorial.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S bftpd</span><br></pre></td></tr></table></figure>

<p>安装后<code>bftpd.conf</code>配置文件在/etc目录下 几乎不用修改即可使用 独立模式启动服务器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;usr&#x2F;sbin&#x2F;bftpd -d</span><br></pre></td></tr></table></figure>

<p>直接以IP默认端口连接  以非root账户登录 终止则直接杀死进程即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall bftpd</span><br></pre></td></tr></table></figure>

<p>需要以后台服务方式运行则最方便的方法是使用xinetd超级服务器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xinetd</span><br></pre></td></tr></table></figure>

<p>安装 启动并设置自启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start xinetd</span><br><span class="line">systemctl enable xinetd</span><br></pre></td></tr></table></figure>

<p>在<code>/etc/xinetd.conf</code>文件中添加以下内容让xintetd托管bftpd</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">service ftp</span><br><span class="line">&#123;</span><br><span class="line"> disable &#x3D; no</span><br><span class="line"> socket_type &#x3D; stream</span><br><span class="line"> wait &#x3D; no</span><br><span class="line"> user &#x3D; root</span><br><span class="line"> server &#x3D; &#x2F;usr&#x2F;sbin&#x2F;bftpd</span><br><span class="line"> log\_on\_success +&#x3D; HOST PID</span><br><span class="line"> log\_on\_failure +&#x3D; HOST</span><br><span class="line"> nice &#x3D; 10</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>完成</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2015/07/24/archlinux/archlinux%E5%AE%89%E8%A3%85bftpd%E6%9C%8D%E5%8A%A1%E5%99%A8/" data-id="ck8b0i9j3006nrg262kju76qc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-archlinux/archlinux安装Yaourt" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/24/archlinux/archlinux%E5%AE%89%E8%A3%85Yaourt/" class="article-date">
  <time datetime="2015-07-24T03:58:00.000Z" itemprop="datePublished">2015-07-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ArchLinux/">ArchLinux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/24/archlinux/archlinux%E5%AE%89%E8%A3%85Yaourt/">archlinux安装Yaourt</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参照：<a href="https://wiki.archlinux.org/index.php/Yaourt_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener">https://wiki.archlinux.org/index.php/Yaourt_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29</a><br>首先，使用添加源的方法已经无法安装yaourt了<br>所以使用第二个方法</p>
<p>首先安装 base-devel包（<strong>needed</strong> 前面是两个英文短横线，WP会自动转义）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S --needed base-devel</span><br></pre></td></tr></table></figure>

<p>全部安装完成后检查fakeroot 和 sudo是否安装好<br>可以直接再安装一下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S fakeroot</span><br><span class="line">pacman -S sudo</span><br></pre></td></tr></table></figure>

<p>有关sudo的相关配置参见我的linux安装文档 <a href="http://jeremie.moe/wordpress/%e5%ae%89%e8%a3%85archlinux/" target="_blank" rel="noopener">点这里</a></p>
<blockquote>
<p><em>Note：必须在非root用户下才能使用makepkg 指令</em></p>
</blockquote>
<p>之后使用你喜欢的下载器或者安装wget来执行wiki中的步骤（其中<strong>wget</strong> 可能要安装才能用）</p>
<p>安装 package-query：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wget https:&#x2F;&#x2F;aur.archlinux.org&#x2F;packages&#x2F;pa&#x2F;package-query&#x2F;package-query.tar.gz</span><br><span class="line">tar zxvf package-query.tar.gz</span><br><span class="line">cd package-query</span><br><span class="line">makepkg -si</span><br><span class="line">cd ..</span><br></pre></td></tr></table></figure>
<p>安装 yaourt：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wget https:&#x2F;&#x2F;aur.archlinux.org&#x2F;packages&#x2F;ya&#x2F;yaourt&#x2F;yaourt.tar.gz</span><br><span class="line">tar zxvf yaourt.tar.gz</span><br><span class="line">cd yaourt</span><br><span class="line">makepkg -si</span><br><span class="line">cd ..</span><br></pre></td></tr></table></figure>

<p>安装完成后记得使用以下指令更新数据库（<strong>devel</strong> 和<strong>aur</strong>前面是两个英文短横线）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yaourt -Sy --devel --aur</span><br></pre></td></tr></table></figure>

<p>也可以直接如下更新整个系统<br>同步数据库，升级软件包，搜索 AUR 和 devel (all packages based on cvs, svn, git, bzr(…)-version) 升级：（<strong>devel</strong> 和<strong>aur</strong>前面是两个英文短横线）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yaourt -Syu --devel --aur</span><br></pre></td></tr></table></figure>

<p>下面这条命令将会检查升级包括AUR软件包在内的所有系统软件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yaourt -Syua</span><br></pre></td></tr></table></figure>

<p>然后就可以愉快地像使用pacman一样使用yaourt了</p>
<p>另外：可以使用如下指令合并.pacman/pacnew</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yaourt -C</span><br></pre></td></tr></table></figure>


<p>Editer时可以对新旧文件进行对比<br>但是需要调用vimdiff<br>所以需要安装vim</p>
<hr>
<p>另，yaourt的快捷合并pacnew额功能不能完全替代手工管理<br>所以对于危险的配置文件更新<br>比如sudo的配置文件就需要手动更新替换（sudo配置文件需要专用的visudo进行编辑并进行语法检查后保存，否证配置文件失效会导致无法进root，系统报销）</p>
<hr>
<p>上面的方法的下载地址貌似改了路径<br>已经404了</p>
<p>安装部分改为以下方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;aur.archlinux.org&#x2F;package-query.git</span><br><span class="line">cd package-query</span><br><span class="line">makepkg -si</span><br><span class="line">cd ..</span><br><span class="line"></span><br><span class="line">git clone https:&#x2F;&#x2F;aur.archlinux.org&#x2F;yaourt.git</span><br><span class="line">cd yaourt</span><br><span class="line">makepkg -si</span><br><span class="line">cd ..</span><br></pre></td></tr></table></figure>

<p>因此安装依赖包也改变为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S --needed base-devel</span><br><span class="line">pacman -S git wget</span><br></pre></td></tr></table></figure>

<p>参照：<a href="https://archlinux.fr/yaourt-en" target="_blank" rel="noopener">https://archlinux.fr/yaourt-en</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2015/07/24/archlinux/archlinux%E5%AE%89%E8%A3%85Yaourt/" data-id="ck8b0i9j1006frg2673wq6gw4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-raspberry pi 2 安装archlinux arm 版" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/24/raspberry%20pi%202%20%E5%AE%89%E8%A3%85archlinux%20arm%20%E7%89%88/" class="article-date">
  <time datetime="2015-07-23T16:04:54.000Z" itemprop="datePublished">2015-07-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ArchLinux/">ArchLinux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/24/raspberry%20pi%202%20%E5%AE%89%E8%A3%85archlinux%20arm%20%E7%89%88/">raspberry pi 2 安装archlinux arm 版</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>首先：第一点：很重要所以放在第一：</p>
<blockquote>
<p><strong>树莓派也是标准的计算机，也要按照正常的操作流程来开关机，否则会出现各种稀奇古怪匪夷所思的问题 树莓派的小黄灯在闪或者亮的时候代表在进行磁盘操作</strong></p>
</blockquote>
<p>很重要所以放在第一 然后安装教程：<a href="http://archlinuxarm.org/platforms/armv7/broadcom/raspberry-pi-2" target="_blank" rel="noopener">http://archlinuxarm.org/platforms/armv7/broadcom/raspberry-pi-2</a> 说说其中的重点 不要指望能在windows下进行这个操作 mkfs.vfat指令不能用就去安装dosfstools<code>这个包</code></p>
<blockquote>
<p><strong><em>pacman -S dosfstools</em></strong></p>
</blockquote>
<p>笔记本自带的读卡器不能被VM虚拟机正确识别，所以需要使用USB读卡器 解压文件时要使用root权限解压出来的文件的权限才够高，sudo并做不到</p>
<blockquote>
<p><strong><em>sudo su</em></strong></p>
</blockquote>
<p>另外在这里吐槽一下某些教程动不动就说要打开root用户啦 用root用户才方便啦 sudo好麻烦啦 不知道是些什么心态 另：原版arch的操作在arm上并没有什么不一样 该怎么做就可以怎么做</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2015/07/24/raspberry%20pi%202%20%E5%AE%89%E8%A3%85archlinux%20arm%20%E7%89%88/" data-id="ck8b0i9gz001lrg261djxbhhp" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-archlinux/ArchLinux之pacman调用axel多线程加速下载" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/22/archlinux/ArchLinux%E4%B9%8Bpacman%E8%B0%83%E7%94%A8axel%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%8A%A0%E9%80%9F%E4%B8%8B%E8%BD%BD/" class="article-date">
  <time datetime="2015-07-22T12:33:14.000Z" itemprop="datePublished">2015-07-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ArchLinux/">ArchLinux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/22/archlinux/ArchLinux%E4%B9%8Bpacman%E8%B0%83%E7%94%A8axel%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%8A%A0%E9%80%9F%E4%B8%8B%E8%BD%BD/">ArchLinux之pacman调用axel多线程加速下载</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>整理转自：<a href="http://www.nenew.net/" target="_blank" rel="noopener">奶牛博客</a><br><a href="http://www.nenew.net/arch-linux-pacman-axel-multi-download.html" target="_blank" rel="noopener">http://www.nenew.net/arch-linux-pacman-axel-multi-download.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">安装</span><br><span class="line">sudo pacman -S axel</span><br><span class="line">编辑&#x2F;etc&#x2F;axelrc</span><br><span class="line">alternate_output &#x3D; 1</span><br><span class="line">打开输出</span><br><span class="line">设置&#x2F;etc&#x2F;pacman.conf文件使其调用axel下载</span><br><span class="line">XferCommand &#x3D; &#x2F;usr&#x2F;bin&#x2F;axel -n 5 -a -o %o %u</span><br><span class="line">-n后面是线程数</span><br></pre></td></tr></table></figure>

<p>同时对pacman和yaourt有效</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2015/07/22/archlinux/ArchLinux%E4%B9%8Bpacman%E8%B0%83%E7%94%A8axel%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%8A%A0%E9%80%9F%E4%B8%8B%E8%BD%BD/" data-id="ck8b0i9ix005zrg26anythnr1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-archlinux/archlinux搭建SS服务器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/10/archlinux/archlinux%E6%90%AD%E5%BB%BASS%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="article-date">
  <time datetime="2015-07-09T17:46:02.000Z" itemprop="datePublished">2015-07-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ArchLinux/">ArchLinux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/10/archlinux/archlinux%E6%90%AD%E5%BB%BASS%E6%9C%8D%E5%8A%A1%E5%99%A8/">archlinux搭建SS服务器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考：<a href="https://wiki.archlinux.org/index.php/Shadowsocks_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener">https://wiki.archlinux.org/index.php/Shadowsocks_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29</a><br>说一下步骤以及WIKI上不清楚的地方</p>
<hr>
<p>首先是安装SS</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S shadowsocks</span><br></pre></td></tr></table></figure>

<p>再cd到 /etc/shadowsocks/ 目录创建 xxx.josn 的服务器配置文件（同时这里放置的也是客户端配置文件）</p>
<p>服务器版本配置文件内容（这里是重点，网上好像都没说清楚）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;server&quot;:&quot;0.0.0.0&quot;,</span><br><span class="line">	&quot;server_port&quot;:443,</span><br><span class="line">	&quot;local_port&quot;:1080,</span><br><span class="line">	&quot;password&quot;:&quot;your-passwd&quot;,</span><br><span class="line">	&quot;timeout&quot;:300,</span><br><span class="line">	&quot;method&quot;:&quot;aes-256-cfb&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其实和客户端配置文件几乎一样<br>只是服务器的重要在于server_port、password、method这三个<br>两个local并没有存在的意义<br>server也直接0.0.0.0就ok<br>客户端连接时直接匹配server_port、password、method就可以正确连接上服务器<br>至于fast_open这个linux特有特性，我客户端使用的是windows所以并不关心，也无法测试</p>
<p>然后<br>配置文件写好后<br>启动服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start shadowsocks-server@xxx</span><br></pre></td></tr></table></figure>

<p>上面指令最后@后面的xxx就是json配置文件的名字（无后缀）（注意这里没有通常的.service）<br>这时可以用以下命令查看是否启动完</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl</span><br></pre></td></tr></table></figure>

<p>如果有问题可以使用如下指令查看详细错误信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status shadowsocks@xxx</span><br></pre></td></tr></table></figure>

<p>同时也可以连接试试看 确认正常后替换start为enable设置自启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable shadowsocks@foo</span><br></pre></td></tr></table></figure>

<p>显示创建链接成功就ok了 重启服务器测试是否自动启动 之后就可以愉快地SS了～～～</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2015/07/10/archlinux/archlinux%E6%90%AD%E5%BB%BASS%E6%9C%8D%E5%8A%A1%E5%99%A8/" data-id="ck8b0i9j3006lrg265iyi94sj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-archlinux/archlinux修改火狐语言" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/05/archlinux/archlinux%E4%BF%AE%E6%94%B9%E7%81%AB%E7%8B%90%E8%AF%AD%E8%A8%80/" class="article-date">
  <time datetime="2015-07-05T13:53:11.000Z" itemprop="datePublished">2015-07-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ArchLinux/">ArchLinux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/05/archlinux/archlinux%E4%BF%AE%E6%94%B9%E7%81%AB%E7%8B%90%E8%AF%AD%E8%A8%80/">archlinux修改火狐语言</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在archlinux下修改火狐语言<br>1.安装火狐<br>2.安装中文语言包<br>3.修改about:config中的general.useragent.locale为zh-CN<br>4.修改about:config中的intl.locale.matchOS为false<br>完成</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2015/07/05/archlinux/archlinux%E4%BF%AE%E6%94%B9%E7%81%AB%E7%8B%90%E8%AF%AD%E8%A8%80/" data-id="ck8b0i9j00069rg26azao1ypa" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-有关Erlang分布式节点长名试验" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/06/29/%E6%9C%89%E5%85%B3Erlang%E5%88%86%E5%B8%83%E5%BC%8F%E8%8A%82%E7%82%B9%E9%95%BF%E5%90%8D%E8%AF%95%E9%AA%8C/" class="article-date">
  <time datetime="2015-06-29T06:24:19.000Z" itemprop="datePublished">2015-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Erlang/">Erlang</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/29/%E6%9C%89%E5%85%B3Erlang%E5%88%86%E5%B8%83%E5%BC%8F%E8%8A%82%E7%82%B9%E9%95%BF%E5%90%8D%E8%AF%95%E9%AA%8C/">有关Erlang分布式节点长名试验</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>节点名分长名与短名两种<br>节点名由前缀与后缀组成</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">本机唯一节点名（前缀）@本机地址（后缀）</span><br></pre></td></tr></table></figure>

<p>对于cookie<br>两个几点连接时cookie必须一致 否则连接请求会被阻止</p>
<p>对于长名<br>节点名前缀在同一个机器上必须要唯一 即使同一机器上的多个节点后缀可以不同<br>节点长名后缀可使用可由DNS解析的域名或者直接为IP地址<br>当连接使用域名的节点会访问由DNS服务器解析的对应IP</p>
<p>当使用IP作为后缀时<br>使用<code>net_adm:ping(‘长节点名’).</code>建立连接时会连接到到对应的IP地址处<br>若目标节点后缀与目标IP不同时无法建立连接 即使是ping通后的自动建立全连通网络时也无法建立到错误的节点处<br>若使用127.0.0.1作为后缀 则只有本机节点能够连接到以127.0.0.1作为后缀的节点<br>若使用错误的IP地址 则无法接受ping 但其可以ping其他正确的节点 但在全连通过程中无法连接到其他设备的节点</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2015/06/29/%E6%9C%89%E5%85%B3Erlang%E5%88%86%E5%B8%83%E5%BC%8F%E8%8A%82%E7%82%B9%E9%95%BF%E5%90%8D%E8%AF%95%E9%AA%8C/" data-id="ck8b0i9hh003erg2653c7gu4f" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-有关ICS服务与Pcap_DNSProxy共存的解决方案" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/06/28/%E6%9C%89%E5%85%B3ICS%E6%9C%8D%E5%8A%A1%E4%B8%8EPcap_DNSProxy%E5%85%B1%E5%AD%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" class="article-date">
  <time datetime="2015-06-27T16:30:50.000Z" itemprop="datePublished">2015-06-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Windows/">Windows</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/28/%E6%9C%89%E5%85%B3ICS%E6%9C%8D%E5%8A%A1%E4%B8%8EPcap_DNSProxy%E5%85%B1%E5%AD%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">有关ICS服务与Pcap_DNSProxy共存的解决方案</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>因为学校使用客户端拨号上网<br>之前又使用了netsh开启win7的虚拟wifi（HotWifi）功能共享上网<br>现在要给承担拨号以及wifi共享任务的网关机添加一个DNS服务器实现反DNS投毒的功能<br>但是因为实现从客户端拨号连接到虚拟无线热点之间使用的ICS网络共享服务自带了DNS以及DHCP功能 占用了53端口<br>以至于安装的Pcap_DNSProxy服务器无法打开53端口正常工作</p>
<p>想到的解决方案是将Pcap_DNSProxy的服务设置为自动启动<br>并将ICS服务设置为自动延迟启动<br>使得在正常情况下Pcap_DNSProxy总能比ICS先启动并占用53端口<br>以此屏蔽ICS的DNS服务功能</p>
<p>另外<br>因为ICS的DHCP自动IP分配功能IP分配缓慢且无法手动设置IP<br>使用了一个开启了桥接功能的路由并设置好DHCP来以抢先机制取代ICS的又慢又难用的DHCP功能<br>而且以路由器作为网络中心也可以解决因为作为无线热点的USB无线网卡由于性能不足导致内网传输缓慢以及全速传输内网传输时硬件过热导致的设备丢失问题</p>
<p>附当前网络物理结构<br> <a href="http://jeremie.moe/wordpress/wp-content/uploads/2015/06/1.png" target="_blank" rel="noopener"><img src="http://jeremie.moe/wordpress/wp-content/uploads/2015/06/1-300x200.png" alt="物理结构"></a></p>
<p> 网络逻辑结构（点击看大图）<br> <a href="http://jeremie.moe/wordpress/wp-content/uploads/2015/06/2.png" target="_blank" rel="noopener"><img src="http://jeremie.moe/wordpress/wp-content/uploads/2015/06/2-300x145.png" alt="逻辑结构"></a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2015/06/28/%E6%9C%89%E5%85%B3ICS%E6%9C%8D%E5%8A%A1%E4%B8%8EPcap_DNSProxy%E5%85%B1%E5%AD%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" data-id="ck8b0i9hj003irg2623i41rib" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/5/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/7/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AHK/">AHK</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ArchLinux/">ArchLinux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Code/">Code</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Erlang/">Erlang</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/GalGame/">GalGame</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/OpenWRT/">OpenWRT</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/WinSDK/">WinSDK</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/firefox/">firefox</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/notes/">notes</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E7%81%B5/">人工智灵</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B3%E4%BA%8EBlog/">关于Blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%87%E5%BF%98/">备忘</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%87%E5%BF%98/Notes/">Notes</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%87%E5%BF%98/%E6%9D%82%E7%89%A9/">杂物</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/">未分类</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E7%89%A9/">杂物</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E7%89%A9/Notes/">Notes</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A8%B1%E8%8A%B1%E5%BA%84%E7%9A%84%E5%AE%A0%E7%89%A9%E5%A5%B3%E5%AD%A9/">樱花庄的宠物女孩</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/">游戏制作</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/Notes/">Notes</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%8A%B1%E4%BD%91%E4%BA%AC%E5%A5%B3%E4%BB%86%E9%98%9F/">花佑京女仆队</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ePost/" rel="tag">ePost</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ePost/" style="font-size: 10px;">ePost</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">五月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">四月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">六月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">五月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">四月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">三月 2013</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/03/24/error-means-for-programmer/">error means for programmer</a>
          </li>
        
          <li>
            <a href="/2020/03/15/OpenWRT%E8%BD%AF%E4%BB%B6%E5%8C%85%E5%AE%89%E8%A3%85%E5%99%A8opkg%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86/">OpenWRT软件包安装器opkg配置使用代理</a>
          </li>
        
          <li>
            <a href="/2020/03/15/ESXi%E8%BD%AF%E8%B7%AF%E7%94%B1OpenWRT%E4%BD%BF%E7%94%A8MWAN3%E9%85%8D%E5%90%88%E7%BD%91%E7%AE%A1%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%BD%BF%E7%94%A8VLAN%E5%AE%9E%E7%8E%B03%E8%B7%AF%E5%AE%BD%E5%B8%A6%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/">ESXi软路由OpenWRT使用MWAN3配合网管交换机使用VLAN实现3路宽带负载均衡</a>
          </li>
        
          <li>
            <a href="/2020/03/12/notes/184/">184</a>
          </li>
        
          <li>
            <a href="/2020/03/08/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E5%88%B0Hexo/">博客迁移到Hexo</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Jeremie<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives/" class="mobile-nav-link">归档</a>
  
    <a href="/about-blog/" class="mobile-nav-link">关于Blog</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>