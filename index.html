<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Jeremie&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Jeremie&#39;s Blog">
<meta property="og:url" content="http://hexo.jeremie.moe/index.html">
<meta property="og:site_name" content="Jeremie&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Jeremie">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Jeremie&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jeremie&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives/">归档</a>
        
          <a class="main-nav-link" href="/about-blog/">关于Blog</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hexo.jeremie.moe"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-什么是惯性导航系统" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/07/%E4%BB%80%E4%B9%88%E6%98%AF%E6%83%AF%E6%80%A7%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F/" class="article-date">
  <time datetime="2020-08-07T08:40:32.000Z" itemprop="datePublished">2020-08-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/07/%E4%BB%80%E4%B9%88%E6%98%AF%E6%83%AF%E6%80%A7%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F/">什么是惯性导航系统？</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>from : <a href="https://www.oxts.com/zh/what-is-inertial-navigation-guide/" target="_blank" rel="noopener">https://www.oxts.com/zh/what-is-inertial-navigation-guide/</a></p>
<h1 id="GPS-出现之前的生活"><a href="#GPS-出现之前的生活" class="headerlink" title="GPS 出现之前的生活"></a>GPS 出现之前的生活</h1><p>由于现在甚至连厨房用具都装有 GPS 接收器，很难想象 GPS 出现之前的生活是怎样的。人们是如何生活的？甚至可能有不见其人的声音告诉您左转、右转以及在可能时掉头？对于依赖卫星导航仪和智能手机的一代人而言，这是一个严重的问题—人们到底是怎么知道自己在哪里的？<br>事实是，在 GPS 出现以前，如果普通人想知道他们在哪里，他们必须求助于地图、观察和极其不准确的假设。而且，如果情况真的很糟，他们就问路。然而，对于拥有大量的金钱、充足的空间和真正需要知道自己所在位置的个人和行业来说，他们的救星经常以 INS（惯性导航系统）的形式出现。</p>
<h1 id="什么是惯性导航系统？"><a href="#什么是惯性导航系统？" class="headerlink" title="什么是惯性导航系统？"></a>什么是惯性导航系统？</h1><p>惯性导航系统有各种形状和尺寸。它们的共同点是使用多个惯性传感器，以及某种形式的中央处理单元来跟踪这些传感器的测量值。INS 使用的传感器通常是陀螺仪和加速度计，并且内部通常都有几种传感器。稍后我们将介绍 INS 的实际工作方式，现在，最重要的事情是认识它们与 GPS 的区别 - 您可能更熟悉 GPS。</p>
<p>打开 GPS 接收器，假设一切正常，在很短的时间后，它将生成位置测量值。接收器生成的位置测量值非常具体，不存在 GPS 的不精确性。它指出“您在这个纬度和这个经度”- 换句话说，它用已知的坐标系提供给我们一个绝对位置。惯性导航系统不能这样工作。就它们而言，它们生成的测量值是相对于他们最后已知的位置。因此，即使在惯性导航系统已经打开几分钟后，它也不能说“您在这个纬度和这个经度”，但它可能会说，“您没有从开始位置移动“。</p>
<p>那么，为什么人们使用惯性导航系统呢？如果他们不能告诉你你在哪里，他们怎么能把人类导航到月球上，为什么潜艇不一直坠毁，飞机和导弹是怎么找到他们的？谢天谢地，这个问题的答案很简单。惯性导航系统可以判断它相对于出发地的位置，因此，如果您告诉 INS 其出发位置，它可以轻松地根据自己的测量结果得出现在的位置。这就是宇宙飞船、潜艇、飞机和导弹使用 INS 成功导航的方式，因为它们知道它们从哪里开始。</p>
<h1 id="INS-实际上是如何运行的？"><a href="#INS-实际上是如何运行的？" class="headerlink" title="INS 实际上是如何运行的？"></a>INS 实际上是如何运行的？</h1><p>惯性导航系统包括两个不同的部分。第一个是 IMU（惯性测量单元），有时也称为 IRU（惯性参考单元）。这是提供加速度和角速度测量的加速度计和陀螺仪的统称。第二部分是导航计算机。导航计算机获取来自 IMU 的测量值，并使用它们来计算 INS 的相对位置、方向和速度。</p>
<p>基本上使用两种导航计算机；稳定平台和捷联导航仪。稳定平台使用真实的旋转机械陀螺仪实现平台稳定，而不受 INS 旋转影响。因此，当惯性导航系统旋转时，其内部的稳定平台不会旋转。这样，系统就可以了解其方向，并可以利用来自加速度计的测量值。这类系统的缺点是万向节死锁（参见陀螺仪部分以获取完整说明）、高成本和复杂性。</p>
<p>相反，捷联式导航仪内部的传感器不会独立于 INS 进行移动。如果您愿意，它们会固定下来。这克服了与稳定平台相关的许多问题，这也是现在更多人买得起惯性导航系统的主要原因。与稳定平台内的旋转机械陀螺仪不同，捷联式导航仪内部使用的陀螺仪通常为 MEMS（微机电系统），似乎没有任何活动部件。实际上，最好将它们视为角速度传感器，而不是陀螺仪，尽管人们通常这样叫。</p>
<p>那么，INS 是如何工作的呢？为了捕获在 3D 空间中导航所需的测量值，惯性传感器的轴以相互垂直的方式布置。换句话说，每条轴与其他两条轴成 90° 角（参见下图）。</p>
<p><img src="/images/INS/400_IMUframe-300x288.jpg" alt="IMU 参照系"></p>
<blockquote>
<p>IMU 参照系：此图像显示了惯性导航系统用于测量移动和方向的三条轴 (xyz)。INS 中的轴位置是固定的，因此它们随之旋转。每条轴都以两个方向测量 - 图像中的箭头显示哪个方向读数为正。例如，如果 INS 沿绿色箭头的方向加速，则 y 轴将显示正加速度。如果 INS 以相反方向加速，我们将看到沿 y 轴为负加速度。每条轴的角速度也会被测量。如果 INS 按照圆形红色箭头指示旋转，我们将在 x 轴陀螺仪上看到正读数。如果 INS 以相反的方向旋转，我们将在 x 轴陀螺仪上看到负值。</p>
</blockquote>
<p>通过沿着（和围绕）x 轴、y 轴和 z 轴进行测量，导航计算机可以了解其移动和旋转方式。在 IMU 参照系图像中，您可以清楚地看到测量 xyz 轴是如何在我们的产品中布局的。您还可以看到一个圆形箭头，显示 x 轴陀螺如何测量角速度。</p>
<p>值得指出的是，尽管每个箭头都指向一个方向，但陀螺仪和加速度计仍沿着或围绕每条轴在两个方向上进行测量。箭头仅指示传感器将哪个方向视为正向运动。因此，如果产品向下加速（沿蓝色箭头方向），则 z 轴加速度计将指示正值；如果产品向上加速，则 Z 轴加速度计将显示负值。</p>
<h1 id="参照系"><a href="#参照系" class="headerlink" title="参照系"></a>参照系</h1><p>此时，我们应该解释 IMU 参照系等术语的含义。刚才我们谈到了当产品加速下降时，z 轴加速度计上的正测量值，但是如果我们将 INS 翻转到如下图所示的方向，会发生什么呢？现在，当 INS 向下加速时，z 轴将记录一个负值。这就是为什么参照系很重要的原因。</p>
<p><img src="/images/INS/400_IMUaxes.jpg" alt="INS 参考框架"></p>
<p>对您我来说，向上意味着我们之上，下面意味着我们之下。同样，我们都知道哪条路都是分左右方向的，如果我说我向前移动了 1 米，您可以准确地想象我做了什么——因为您把自己放到了我的参照系中。作为人类，我们非常擅长这样做。事实上，我们发现”从另一个角度看待事物”是如此容易，以至于很容易忘记每个对象都有自己的参照系，而我们如何描述运动取决于所使用的参照系。</p>
<p>例如，想象自己站在火车站台上。想象您可以看到有人站在火车车厢内寻找座位。当火车驶出车站时，此人开始向火车后方行走。从那个人的角度来看，他们正以恒定的速度向前走。但是对您来说，从站台的参照系看火车时，那个人最初似乎并没有移动 - 因为他们向前行走（在其框架中）的速度与火车在其框架中前进的速度相同。但是，随着火车速度的加快，此人似乎朝火车前进的方向移动。对于您来说，他们正在向后移动，但是对于火车上的人来说，他们仍在向前移动。两种观点都是正确的，只是使用了不同的参照系。</p>
<p>幸运的是，大多数惯性导航系统足够智能，能够将运动从一个参照系转换到另一个参照系，只要先给它们一点点信息即可。因此，想象一下将 INS 倒置，使 z 轴指向上方。只要我们在开始之前告诉 INS 它是倒置的，那么当您向上移动您的手时，惯性测量单元将在 z 轴上记录一个正值（就其而言指向下方），但是惯性导航系统（计算机）知道它实际上被您倒置了。所以它旋转所有的测量值，把它们放到一个对我们有用的不同参照系中；一个表明 INS 正在向上移动的参照系。</p>
<h1 id="加速计"><a href="#加速计" class="headerlink" title="加速计"></a>加速计</h1><p>加速计是大多数惯性导航系统中使用的传感器类型之一。您可以从它们的名字中猜出它们测量的是加速度而不是速度。根据处理物体物理特性的时间长度，您可能会记得 SI 的加速度单位是 m/s²（即：米/平方秒）。值 1 m/s² 表示，每过去一秒，物体的速度就会增加 1 m/s（即：米/秒）。</p>
<p>尽管惯性导航系统无法直接测量速度，但是通过跟踪加速度的大小以及持续时间，惯性导航系统可以通过将加速度乘以时间来轻松计算出速度是多少。例如，如果 5 秒的加速度为 2.5 m/s²，并且假定初始速度为 0 m/s，则 INS 现在必须具有 12.5 m/s (2.5 m/s2 = 5 s = 12.5 m/s) 的速度。距离也可以计算出来。使用 s = 0.5 × at² 求出，其中 s 是距离，a 是加速度，t 是时间。在这种情况下，假设惯性导航系统在 x 轴上看到加速度，则可以算出它向前移动了31.25 米 (0.5×2.5 m/s²×5s² = 31.25 m)。</p>
<p>因此，拥有三个加速计非常有用，特别是当它们以相互垂直的方式排列时，因为它们允许 INS 测量 3D 空间中的加速度并计算行驶距离和当前速度。但是，当人们第一次看到从三轴加速计输出的数据时，往往会感到困惑，为什么向下的轴显示 -9.81 m/s² 的加速度？为了回答这个问题，我们需要研究加速计的工作原理以及它们实际测量的是什么。</p>
<p>此时，您可能会想，“等等！之前您说过加速计可以测量加速度”。尽管加速计确实可以测量加速度，但我们不想混淆问题，说加速计实际测量的是相对于自由落体的加速度，这就是为什么静止时垂直加速计的读数为 -9.81 m/s² 的原因。如果还是不明白，不要担心，下一节将对此进行说明。</p>
<h2 id="适当的加速度"><a href="#适当的加速度" class="headerlink" title="适当的加速度"></a>适当的加速度</h2><p>您无疑听说过艾萨克·牛顿爵士的名字，并记得他写了一些运动定律。牛顿第一定律告诉我们，除非有力作用在物体上，否则它将保持完全静止，或以相同的速度持续运动。换句话说，要使某物运动或改变其速度，我们需要施加力。他的第二条定律描述了物体的加速度与作用在物体上的力以及物体的质量之间的关系。可以总结为力=质量×加速度 (F = ma)。</p>
<p>加速计使用牛顿第二运动定律中描述的原理来测量相对于自由落体的加速度。也就是说，它们测量作用在已知质量上的相对力，并以此来计算它必须发生的加速度。为了理解这一点，让我们首先绘制一个简单的加速计。</p>
<p><img src="/images/INS/1000_accelerometer.jpg" alt="加速度计"></p>
<p>从上图中，我们可以看到加速计包含一个已知质量，该质量连接到能够测量力的传感器上。但是，请注意，质量被限制在加速计的外壳内，只能向左或向右移动，这定义了加速计的测量轴。</p>
<p>那么，在现实世界中，这是如何工作的呢？下图显示了当我们将加速计放在汽车中时会发生什么情况。汽车以四种状态显示：静态、加速、匀速巡航和制动。您可以看到在每种情况下加速计内部的质量发生了什么。</p>
<p><img src="/images/INS/600_CarStaticAccelBraking.jpg" alt="加速度计解释与汽车"></p>
<p>当汽车静止和匀速巡航时，由于没有力作用在其上（至少测量轴上没有作用力），质量保持在其中心位置。因为质量处于其中心位置，所以传感器检测不到力，因此记录不到加速度。当汽车加速并制动时，质量就会移动。在加速时，它朝传感器的后方移动，而在制动时，它朝着传感器的前方移动。汽车制动和加速的速度越快，质量的位移越远。每当质量发生位移时，传感器就会测量力，并记录一个值。因为传感器知道质量以及作用在该质量上的力，所以它可以轻松计算必须引起质量运动的加速度。</p>
<p>虽然这似乎很合乎逻辑，但它并不能解释为什么垂直放置在地板上的加速度计会产生 9.81 m/s² 的值，即使地板显然没有移动。然而，自由落体的加速度计从天而降时明显正在加速，为何显示零加速？答案见下图。</p>
<p><img src="/images/INS/900_Accelerometers.jpg" alt="加速度计和重力"></p>
<h1 id="陀螺仪"><a href="#陀螺仪" class="headerlink" title="陀螺仪"></a>陀螺仪</h1><p>加速度计擅长测量直线运动，但它们不擅长旋转，这就是陀螺仪的用处。陀螺仪根本不关心线性运动，只关心旋转。如前所述，在描述不同的惯性导航系统时，术语陀螺仪可以指不同的东西，这取决于所描述的系统类型。</p>
<p><img src="/images/INS/380_GyroRotation-210x300.jpg" alt=""></p>
<p>在传统意义上，陀螺仪采用一个或多个旋转转子，该转子保持在万向架中或悬挂在其他系统中，该系统旨在将其与外部扭矩隔离。 这种陀螺仪之所以起作用，是因为一旦转子旋转，它便希望保持其轴或旋转。 换句话说，如果您通过陀螺仪的旋转轴投影一条线，则无论您如何尝试扭曲和旋转陀螺仪，投影线将始终指向同一点。 显然，如果您可以对其施加扭矩，则可能会使陀螺仪移动，而采用万向节就是要防止这种运动。</p>
<p>万向节使用多个彼此垂直安装的同心环，这些同心环通过正交排列的枢轴连接。假设环没有在万向节中死锁，这种设计可使陀螺仪在三轴中自由旋转。当两个轴对齐时，万向节发生死锁。在这种状态下，万向节具有两个自由度，而不是三个，因此在某个方向上施加的外部扭矩可能会影响旋转轴。</p>
<p>由于陀螺仪的转子要保持其初始旋转轴，因此可以将传感器安装到万向节上，以测量其所连接的外部框架的相对方向变化。通过这种方式，可以保持外部框架相对于陀螺仪轴的方向。左图说明了这一点。</p>
<p>捷联导航仪中使用的陀螺仪不受万向节死锁的影响。那是因为它们不是传统意义上的陀螺仪。而是测量角速度的 MEMS 设备，通常以 °/s（读作：度每秒）为单位。因此，无论 MEMS 陀螺仪指向哪个方向，只要它不围绕其测量轴旋转，就会输出 0°/s 的值。但是，如果陀螺仪绕其测量轴旋转并需要大约 1 秒钟来执行每次旋转，它将输出 360°/s 的值。</p>
<p>是正数还是负数取决于旋转方向。</p>
<p><img src="/images/INS/1000_MEMSangularratesensor.jpg" alt="MEMS 角速率传感器"></p>
<p>从中可以看到，就像加速度计一样，陀螺仪本身不会告诉 INS 它的方向。首次通电时，陀螺仪只知道其旋转速度有多快。INS 的工作是跟踪所有这些测量。因此，如果 INS 在绕 z 轴的 0.25 秒内看到 360°/s 的平均速度，它就知道无论指向哪个方向开始，它现在都旋转了 90° (360°/s÷ 0.25 s = 90°)。当然，如果 INS 在运动之前就知道它是朝北的，并且还知道正陀螺值表示顺时针旋转，那么它可以很容易地算出它现在朝东。</p>
<p>就像通常使用三个加速度计一样，INS 通常包含三个陀螺仪，用于测量围绕三个相互垂直轴的旋转。通过这种方式，INS 可以测量其在 3D 空间中的方向。</p>
<h1 id="导航；把这一切组合在一起"><a href="#导航；把这一切组合在一起" class="headerlink" title="导航；把这一切组合在一起"></a>导航；把这一切组合在一起</h1><p>利用从三个加速度计和三个陀螺仪获得的测量值，惯性导航系统可以跟踪其在三维空间中的位置。它使用称为航位推算的过程来执行此操作。航位推算的实际过程非常容易理解；您可以从某些来源（在本案例中为陀螺仪和加速度计）中获取信息，并将它们转换为运动添加到您最后的已知位置，以查看您现在的位置。航位推算的简化 2D 示例如下。</p>
<p><img src="/images/INS/990_DeadReckoning.jpg" alt="死推算"></p>
<p>您可以看到，INS 最初是静止的，并且与图像成直角对齐，其 x 轴指向上方。然后，图像显示了其他三个位置以及它们之间的传感器记录的信息。当然，实际上，INS 每秒更新其位置数十或数百次，但是在本例中，仅在发生关键变化时才显示位置更新，以便于理解。</p>
<p>因此，在时间为零时，INS 是静止的（并且不知道它在哪里）。然后，X 轴加速度计上出现 5 m/s² 的加速度 1 秒，其速度为 5 m/s（或 18 km/h）。随后立即完全停止运行 - 在 0.5 秒内检测到 -10 m/s² 的加速度。由于其他传感器上没有记录其他测量值，因此捷联式导航仪可以轻松地确定它沿 x 轴方向移动了 3.75 米。同样，此时 INS 不知道它在哪里，因为我们没有提供任何位置信息。</p>
<p>一旦 INS 在位置更新 1 处停止，z 轴陀螺仪就会在 0.5 秒钟内检测到 90°/s 的值；因此它知道它已经沿顺时针方向旋转了 45°。同样，一旦完成该运动，INS 将再次在 x 轴加速度计上看到加速度。这次是 1m/s²，持续 10 秒，然后是 -5 m/s²，持续 2 秒。使用与以前相同的技术，INS 可以得出结论，现在 INS 从位置更新 1 处以 45° 角前进了 60 米。这就是我们之前谈到的 INS 的位置更新是相对于最后一个已知位置这一事实的含义。</p>
<p>最后一次运动不同于以前的运动。在位置更新 2 中，您可以看到 INS 旋转了，因此其方向与最初的方向相同。但是，当它向位置 3 移动时，我们可以知道 INS 现在正与其测量轴（IMU 参考系）呈一定角度移动 - 以 135° 的方向向后和向右移动。</p>
<p>由于此运动，同时在 x 轴和 y 轴上录得加速度。也没有引起 INS 停止的负加速度 - 因此，尽管加速度计上的测量值在 1 秒后降为零，但导航计算机知道该装置仍然具有速度。在这种情况下，它以 7.07 m/s（约 25 km/h）的速度运动，位置更新 3 发生在 INS 离开位置更新 2 后 1.5 秒。此时，INS 覆盖了 7.95 米。</p>
<h1 id="优势和劣势"><a href="#优势和劣势" class="headerlink" title="优势和劣势"></a>优势和劣势</h1><p>我们尚未涉及的一件事就是漂移，这是基本的无辅助惯性导航系统的致命弱点 - 无辅助意味着仅使用加速度计和陀螺仪测量来计算其位置的系统。漂移是用于描述加速度计和陀螺仪测量中的小误差累积的术语，这些误差逐渐导致 INS 位置估计变得越来越不准确。</p>
<p>很容易理解为什么发生漂移。想象一下，用一根 5 米长的卷尺测量木材的长度。如果您能以 1 毫米的精度读取卷尺上的刻度，则很容易说出这根木材长 4 米 ± 1 毫米。另一方面，如果您只能找到 0.5 米长的卷尺，而您仍然只能以 1 毫米的精度读取它，那么在完成测量并与卷尺一起移动 8 次时，您只能说该木材长 4 米 ± 8 毫米。实际上，您可能根本不会量到 4 m 长。</p>
<p>INS 中的漂移以相同的方式累积。每次读取加速度计或陀螺仪时，读数都会出现微小的误差。如果我们只读取一个读数就可以得出我们加速或转弯的速度，那么这将不是问题。但是，由于导航计算机正在对每个测量结果进行累加，以计算出它是如何从之前的位置估计值移动的，因此微小的误差会随着时间推移而增加。</p>
<p><img src="/images/INS/1000_DriftinINS-948x1024.jpg" alt="INS 漂移"></p>
<p>当然，这是一个非常简化的观点。系统中已进行了大量工作，以尽量减少这些误差的累积，但是并没有摆脱它们存在的事实。然而，这并不意味着惯性导航系统的原理是无用的，或者不如 GPS。远非如此。</p>
<p>在本部分的开头，我们说过漂移是无辅助惯性导航系统的致命弱点，那么辅助导航系统呢？当您将 INS 与 GPS 组合以创建 GPS 辅助 INS（也写作 GPS INS）时，您可以解决漂移问题，并解决影响 GPS 的问题。您可以在这里找到有关 <a href="/2020/08/07/%E5%85%A8%E7%90%83%E5%8D%AB%E6%98%9F%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-GNSS-%E7%AE%80%E4%BB%8B/" title="GPS 的章节">GPS 的章节</a> …</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2020/08/07/%E4%BB%80%E4%B9%88%E6%98%AF%E6%83%AF%E6%80%A7%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F/" data-id="ckdk0gktv008vjo26cacc8vh4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-全球卫星导航系统-GNSS-简介" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/07/%E5%85%A8%E7%90%83%E5%8D%AB%E6%98%9F%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-GNSS-%E7%AE%80%E4%BB%8B/" class="article-date">
  <time datetime="2020-08-07T08:40:21.000Z" itemprop="datePublished">2020-08-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/07/%E5%85%A8%E7%90%83%E5%8D%AB%E6%98%9F%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-GNSS-%E7%AE%80%E4%BB%8B/">全球卫星导航系统 (GNSS) 简介</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>from : <a href="https://www.oxts.com/zh/what-is-gnss/" target="_blank" rel="noopener">https://www.oxts.com/zh/what-is-gnss/</a></p>
<h1 id="全球卫星导航系统-GNSS-简介"><a href="#全球卫星导航系统-GNSS-简介" class="headerlink" title="全球卫星导航系统 (GNSS) 简介"></a>全球卫星导航系统 (GNSS) 简介</h1><p>每天每一小时，我们都被无线电波包围。有些电波（例如电视和广播）为我们带来愉悦，有些电波（如 GPS）则提供宝贵的信息，如果没有这些信息，我们将茫然无措。然而，尽管 GPS 在我们日常生活中很重要，但我们通常对它的工作原理了解甚少。</p>
<p>本文档旨在使您对卫星导航有所了解。内容会比某些解释更深入，但避免了只有系统工程师才需要知道的复杂内容。最后，您将对卫星导航的实际工作方式有深刻了解，更重要的是，知道它可以为您做什么和不能做什么。</p>
<h1 id="什么是-GNSS？"><a href="#什么是-GNSS？" class="headerlink" title="什么是 GNSS？"></a>什么是 GNSS？</h1><p>现在，GPS 这个词已为普通大众所熟悉，以至于它已成为任何卫星导航系统的代名词，但我们需要小心，GPS 一词实际上是由美国军方创建系统的名称，代表全球定位系统，也有其他系统。例如，俄罗斯的军事系统被称为 GLONASS（全球轨道导航卫星系统），而中国正在开发一种名为”北斗-2”的系统。</p>
<p>在谈及卫星导航系统时，您经常会遇到一个术语 GNSS，它代表全球导航卫星系统。这是用于描述地球上任何以导航为目的传输信号的全球卫星系统的通称。如果您将卫星系统用于测量目的，则区分使用 GPS 或 GLONASS 等术语非常重要，因为每个系统的工作方式略有不同（尽管最终结果似乎相同）。</p>
<p>截至 2017 年，主要的 GNSS 包括：</p>
<ul>
<li>GPS：美国的全球定位系统。</li>
<li>GLONASS：俄罗斯的全球轨道导航卫星系统。</li>
<li>北斗-2：中国正在开发的系统 - 目前尚未完全投入运行。</li>
<li>Galileo：欧盟正在开发的系统 - 目前尚未完全投入运行。</li>
</ul>
<p><img src="/images/GNSS/DifferentGNSS-700x501.jpg" alt="全球卫星导航系统"></p>
<h1 id="GNSS-接收器如何工作？"><a href="#GNSS-接收器如何工作？" class="headerlink" title="GNSS 接收器如何工作？"></a>GNSS 接收器如何工作？</h1><p>大多数 GNSS 接收器有两个部分：天线以及处理单元或接收器。天线用于接收卫星信号，而接收器则可以感知接收到的信息，并将其转换为我们理解的测量值，例如纬度和经度。</p>
<p><img src="/images/GNSS/2GNSSreceivers.jpg" alt="全球导航卫星系统接收器和INS"></p>
<p>重要的是要认识到，位置、速度和海拔的计算与天线本身有关，与接收器无关。为了解 GNSS 的工作原理，我们需要将 GNSS 分成几个部分，并了解每个部分。由于 GPS 是人们最熟悉的系统，因此让我们来了解一下它，它可以分成三个部分：</p>
<ul>
<li>太空段</li>
<li>控制段</li>
<li>用户段</li>
</ul>
<h2 id="太空段"><a href="#太空段" class="headerlink" title="太空段"></a>太空段</h2><p><img src="/images/GNSS/GPSSpaceSegment.jpg" alt="卫星"></p>
<p>太空段与在轨卫星有关。2015 年，GPS 星座由地球中轨道的 32 颗非对地静止卫星组成，尽管并非所有卫星都处于活动状态。每颗卫星在平均海拔 20,200 公里（即 26,571 公里的轨道半径）处，每 11 小时 58 分钟 2 秒绕轨道运行一圈。</p>
<p>GPS 卫星星座被排列成六个间隔相等的轨道平面，每个平面中不少于四颗卫星。这样的布置可确保几乎在任何时候都可以从地平线上方 15° 看到至少四颗卫星 - 尽管实际上通常能看到更多的卫星。</p>
<p>虽然卫星的年限和设计各不相同，但其工作原理保持不变。每个时钟都包含四个基频为 10.23 MHz 的高精度时钟，它们不断在 L 波段传输两个载波，这些载波以光速返回地球，被称为 L1 和 L2。</p>
<ul>
<li>L1 载波的频率为 1575.42 MHz (10.23 MHz × 154 = 1575.42 MHz)。</li>
<li>L2 载波的频率为 1227.60 MHz (10.23 MHz × 120 = 1227.60 MHz)。</li>
</ul>
<p>载波之所以重要，是因为它们将信息从卫星带回地球，正是这些信息使我们的接收器能够确定所处的位置。但是，我们稍后再来了解这是如何完成的。</p>
<h2 id="控制段"><a href="#控制段" class="headerlink" title="控制段"></a>控制段</h2><p>控制段是指位于地球各地（靠近赤道）的若干地面站，这些地面站用于跟踪、控制和向每颗 GPS 卫星发送信息。这是一个重要的部分，因为每颗卫星的时钟同步至关重要 — 整个系统依赖于计时。</p>
<p><img src="/images/GNSS/GroundAntennas.jpg" alt="GPS 地面天线"></p>
<p>发送到每颗卫星的轨道信息也至关重要，因为我们需要这些信息，以便找出发送信息时卫星的位置。所有这些信息都发送到卫星，然后通过 L1 载波导航信息发送到 GPS 接收器。</p>
<h2 id="用户段"><a href="#用户段" class="headerlink" title="用户段"></a>用户段</h2><p>用户段是大多数人感兴趣的部分。此段包括拥有 GPS 接收器的任何人或任何事物；卫星导航、手机、无人机、执法。那么它是如何工作的呢？</p>
<p>正如我们已经看到的那样，有一个卫星群在我们头顶上盘旋，以光速源源不断地将信息流发送到地球。了解它们如何帮助确定我们的位置需要一些时间，但它是基于一个名为三边测量的过程。</p>
<p>在进一步了解之前，我们应该纠正一个普遍的误解。卫星导航或手机内的 GNSS 接收器绝不会向卫星发送任何信息。我们今天使用的接收器完全是被动的 - 它们仅接收信息。当欧洲的伽利略系统投入运行时，其接收器会略有不同，因为它会有一个紧急功能，该功能会在激活后发送信息，但这不适用于正常运行。</p>
<p>当您听到人们谈论被 GPS 跟踪的东西（例如一辆装甲车）时，情况就是这样。车辆上的 GNSS 接收器正在接收来自卫星的信号，并确定其位置。一旦知道了位置，它就会使用其他系统（例如 GSM 数据连接）将该信息发送回某个监测站。</p>
<p><img src="/images/GNSS/GPSSignals.jpg" alt="GPS 信号"></p>
<p>因此，目前，GNSS 接收器通过接收相关在轨卫星发送的信号来工作。使用的信号取决于接收器的类型。GPS 接收器只能使用 GPS 卫星的信号，而 GLONASS 接收器只能使用 GLONASS 卫星的信号。还有另一种接收器实际上可以从两种卫星（GPS 和 GLONASS）接收信号，以增强其测量范围。</p>
<p>现在我们再次来重点谈谈 GPS 接收器。</p>
<h1 id="GPS-接收器如何知道我在哪里？"><a href="#GPS-接收器如何知道我在哪里？" class="headerlink" title="GPS 接收器如何知道我在哪里？"></a>GPS 接收器如何知道我在哪里？</h1><p>关于GPS 接收器如何知道您在哪里的简短且简化的回答就是：</p>
<ul>
<li>它计算它看到的每颗卫星发出的信号要花费多长时间到达。</li>
<li>它将时间乘以光速以计算到每颗卫星的距离。</li>
<li>然后，使用三边测量法计算相对于不少于三颗卫星的位置。</li>
<li>因为接收器在发送信号时知道每颗卫星的精确位置，所以它可以将其相对位置转换为基于地球的坐标系。</li>
</ul>
<p>当然，这种解释在大多数人的头脑中引起了很多疑问。接收器如何计算信号的传输时间？除非知道信号的发送时间，但这又怎么可能知道呢？什么是三边测量？接收器如何知道卫星发送信号时在哪里？这仅仅是个开始。</p>
<p>好消息是，您无需了解任何这些即可使用 GPS。然而，没有多少信息是多余的，因此，如果您想进一步了解它的工作原理（当您正在收集测量值用于工作时，这可能对您有所帮助），请继续阅读。</p>
<h1 id="GPS-信号"><a href="#GPS-信号" class="headerlink" title="GPS 信号"></a>GPS 信号</h1><p>理解 GPS 最困难的部分是信号本身。根据时间计算距离非常简单，甚至三边测量（稍后将要介绍）听起来也没有添加几张图时那么棘手。但是 GPS 信号及其工作方式非常复杂。</p>
<p>那么，发送给我们的是什么信息呢？从每颗卫星发送的唯一信号包含两个代码和一条消息：</p>
<ul>
<li>C/A 代码（粗/捕获码）</li>
<li>P 代码（精确代码）[以加密形式，称为 Y 代码]</li>
<li>导航消息</li>
</ul>
<p>P 代码已加密供军事使用，因此可以忽略。加密的目的是防止欺骗和控制系统的访问权。顺便说一句，P 代码加密后，被称为 Y 代码。</p>
<p><img src="/images/GNSS/TheGPSSignal-700x736.jpg" alt="GPS 信号"></p>
<p>作为平民，我们只对 C/A 代码和导航消息感兴趣。C/A 代码实际上是由 1,023 个位组成的二进制字符串。乍一看，序列似乎是完全随机的，但事实并非如此。序列经过了精心编排，因此，如果将序列写在两块描图纸上并覆盖它们，则只有一个位置可以匹配（如下所示）。</p>
<p><img src="/images/GNSS/BinaryString.jpg" alt="GNSS 二进制"></p>
<p>稍后，当介绍如何计算与卫星的距离时，我们将知道为什么 C/A 代码只匹配一个位置。现在，我们需要知道的是每颗卫星发送的 C/A 代码对该卫星都是唯一的，虽然它似乎是一个随机的比特字符串，但事实并非如此。该代码实际上遵循精确的确定性模式，因此通常称为伪随机噪声（PRN）。</p>
<p>导航消息不同于 C/A 代码，因为它包含数据。这包括有关时钟校正、卫星健康状况、星历（精确轨道）数据、电离层模型参数和年历（关于星座中所有卫星的一般信息）数据的信息。由于导航消息中包含的信息量以及传输速度相对较慢，因此发送整个消息需要 12.5 分钟。稍后，我们将详细介绍此消息。</p>
<p>我们需要了解的 GPS 信号的最后部分是载波本身。正如我们已经说过的，每颗卫星传输两个频率-L1在1575.42MHz和L2在1227.60兆赫。所有三个元素（C/A 代码、Y 代码和导航消息）都调制到 L1 载波上，而只有 Y 代码被调制到 L2 载波上。但是，虽然民用用户无法从 L2 载波中解调 Y 代码，但我们可以使用 L2 载波本身，我们稍后将在差分修正中谈到。</p>
<p>C/A 代码以 1.023 Mb/s 的速度调制到载波上。导航消息以 50 b/s 的速度调制到载波上。</p>
<h1 id="寻找卫星"><a href="#寻找卫星" class="headerlink" title="寻找卫星"></a>寻找卫星</h1><p>接收器开机后需要做的第一件事就是寻找卫星。它是如何做的取决于接收器最后一次锁定 GPS 卫星已有多长时间。这是因为我们已经知道，GPS 星座中的每颗卫星都会发送一条导航消息，并且该消息的一部分是年历，其中包含星座中每颗卫星轨道的大致信息。</p>
<p>年历数据可使用约 6 个月，因此，使用其最近的已知位置和当前时间，接收器可以对应该看到哪些卫星做出合理猜测。之所以这样做，是因为另一种选择是盲目搜索所有卫星，这可能需要一些时间。实际上，这就是为什么一段时间未开机或自上次开机以来已经运送到世界各地的接收器可能要花费大量时间来获取 GPS 锁定的原因所在 - 因为必须盲目搜索 。</p>
<p><img src="/images/GNSS/SearchingForSatellites.jpg" alt="查找全球导航卫星系统卫星"></p>
<p>假设我们的接收器有有效的年历数据，并且自上次开机以来没有移动太多，它将对当前应该能够看到哪些卫星以及信号频率如何受多普勒频移的影响有一个合理认识。现在，它可以开始从希望从天线接收到的信号中看到的卫星中寻找信号。</p>
<p>接收器首先对信号的频率和 C/A 代码相位进行二维搜索。这并不容易，但作为最终用户，我们不需要对此过于担心。一旦接收器认为它从卫星上找到了信号，便对其进行确认，然后用 PLL（锁相环）和 CLL（代码锁环）锁定在卫星上。然后在解调数据之前搜索位同步。</p>
<h1 id="计算出到卫星的距离"><a href="#计算出到卫星的距离" class="headerlink" title="计算出到卫星的距离"></a>计算出到卫星的距离</h1><p>正如我们已经看到的那样，GPS 星座中的每颗卫星都传输唯一的 C/A 代码，这似乎是随机噪声，但实际上是一个确定性序列。因为序列是确定性的，所以 GPS 接收器能够生成与卫星本身完全相同的代码序列。通过在内部生成相同的码型，接收器可以查找卫星正在发射的码型，然后算出与自己的码型相比有多少延迟。</p>
<p>由于采用了精确的时钟同步，它可以做到这一点。例如，假设您和一个朋友站在一片很大的旷野中。您同步手表后，您的朋友同意在正午时分扣动发令枪扳机。然后，您的朋友走到了旷野的另一端。正午时分，他们扣动发令枪扳机，但是根据您的手表，直到正午后四秒，您才听到爆炸声，因为声音必须在旷野中传播。如果我们假设声音速度为 340 m/s，我们可以乘以这个时间，求出您的朋友是在 1360 米远的地方。</p>
<p>接收器和 GPS 卫星的工作方式相似。因为接收器能够准确地将其时钟与卫星时钟同步，并且因为接收器知道达到速度的时间，所以才能计算出卫星的距离。</p>
<p>当然，还需要考虑其他因素，但这就是基本原理。</p>
<p><img src="/images/GNSS/SatelliteReceiver-700x639.jpg" alt="卫星到接收器"></p>
<h1 id="距离测量如何帮助我确定自己的位置？"><a href="#距离测量如何帮助我确定自己的位置？" class="headerlink" title="距离测量如何帮助我确定自己的位置？"></a>距离测量如何帮助我确定自己的位置？</h1><p>继续以您和一些朋友在一片旷野中为例，想象您自己站在一个大的正方形旷野中。每个朋友都有一种发出不同声音的方法（启动手枪、敲打乐器、喊叫等）。您同步手表，一个朋友走到旷野的每个角落。从中午开始，他们同意每 10 秒发出一次声音。</p>
<p>现在假设当他们开始发出噪音时，两个声音同时到达，紧接着是另外两个声音。然后，您向延迟的声音方向移动一点。十秒钟后，又一波声音到达，但这次第二对的延迟较短。如果您继续移动，您会来到一个所有四个声音同时到达的位置。如您所知，每个人都站在旷野的一角，那么您也可以算出自己必须正好站在中心。</p>
<p>就 GPS 导航而言，卫星可能不在天空的角落，但是由于星历表数据的存在，我们可以在发送信号时确定它们相对于已知坐标系的精确位置，并使用 C/A 代码，我们还可以计算出距该已知位置有多远。接下来介绍一个名为三边测量的过程。</p>
<p>三边测量有点像三角测量。使用三角测量时，您可以通过说一个特定点相对于点 1 的角度为 a，相对于点 2 的角度为 b 来确定这个特定点。以指定角度从每个点绘制的线将相交，并且它们的交点就是我们的新点位置。</p>
<p><img src="/images/GNSS/Triangulation-700x543.jpg" alt="三角"></p>
<p>三边测量法的工作方式类似，但使用距离而不是角度来查找点。另一个主要区别是，使用三边测量法时，您至少需要三个参考点，而不是两个，才能将搜索范围缩小到一个位置。</p>
<p><img src="/images/GNSS/Trilateration-584x1024.jpg" alt="三角化"></p>
<p>GPS 使用相同的技术，但处理方法略有不同。我们一直在观察的圆圈是二维的。在现实生活中，事物远不止是三维的，这意味着我们的相交圆成为相交球体。</p>
<p>当两个球体相交时，您最终不会得到两个相交点，而是得到一个相交环（想象两个气泡连接在一起）。如果第三个气泡加入，它将在所有三个相交环相交处创建两个点。如下所示。</p>
<p><img src="/images/GNSS/ThreeSpheres.jpg" alt="领域"></p>
<p>此时，您可能还记得听说过 GPS 只需三颗卫星即可生成位置测量值。这种说法既是对的，也是错的。从上图中可以清楚地看出，为了使用三边测量法得出单个点，需要第四个球体（向我们展示哪个点是正确的）。但是，由于 GPS 使用以地球为中心的地球固定坐标系，因此可以立即排除其中一个点，因为它恰好位于地球大气层之外。因此，另一点必须是正确的。</p>
<p>因此 GPS 只能使用三颗卫星来生成位置测量值，但是为了实现这一点，其内部时钟必须准确，否则无法正确计算距离。校正内部时钟需要四颗卫星！这就是为什么这种说法既对又错的原因。只要系统使用四颗卫星来校正其内部时钟，它就可以降回三颗卫星，并且仍然可以进行位置估算 — 只是不能永远做到这一点。</p>
<h1 id="什么是-SPS？"><a href="#什么是-SPS？" class="headerlink" title="什么是 SPS？"></a>什么是 SPS？</h1><p>术语 SPS 代表标准定位服务，并描述仅基于 C/A 代码的 GPS 位置测量。之所以需要区分是因为并非所有 GPS 位置测量都以相同的方式进行，并且用于计算测量值的方法会影响准确性。</p>
<p>SPS 提供最低精度的 GPS 位置测量，通常在 3-10 米范围内。为了进行 SPS 测量，GPS 接收器锁定四颗或更多颗卫星，然后使用 C/A 码估计到每颗卫星的距离。这些估计称为伪距测量。</p>
<p>使用 SPS，测量精度取决于接收器将其内部生成的 C/A 代码与天线接收到的 C/A 代码正确对准的能力。尽管即使它能够完美地做到这一点，但精度仍然受到系统设计的限制。</p>
<p>在大多数情况下，我们希望达到的最佳对准精度约为位宽度的 1％。由于位以每毫秒 1,023 的速度传输，光每毫秒传输约 300,000 米，因此我们的 1％ 对准实现的精度大约为 3 米。但是，某些 L1 接收器可以达到大约 0.6％ 的对准度，从而使它们的精度达到 1.8 米。</p>
<p>尽管该精度水平足以满足卫星导航需求，但在许多其他应用中仍需要更高的精度，因此通常需要其他测量技术，例如 DGPS（差分 GPS）和实时运动学（RTK）。</p>
<h1 id="什么是差分修正或-DGPS？"><a href="#什么是差分修正或-DGPS？" class="headerlink" title="什么是差分修正或 DGPS？"></a>什么是差分修正或 DGPS？</h1><p>SPS 测量中的大多数误差来自以下事实：接收器无法真正知道卫星信号通过电离层时如何影响其速度。由于导航消息中包含一些估计值，因此可以从中获得一点线索，这使它可以对可能的影响进行猜测，但这只是估计值。在实践中，这意味着延迟乘以的速度并不十分正确 — 这又意味着计算出的伪距也不正确。</p>
<p>允许这样做的唯一方法是测量而不是估计信号速度在通过大气层下降时如何受到影响。这就是差分 GPS 的用武之地。DGPS 可以通过多种方式实现，但是本质上它们使用的技术都相同。</p>
<p>将一个单独的 GPS 接收器（称为基站）放在预先测量的位置并打开。因为已经非常精确地知道基站的位置，所以基站能够将其自己的 GPS 接收器生成的位置测量值与已知坐标进行比较。任何差异都意味着它们从多个卫星之一发出的信号被延迟。系统要做的就是算出应该对每颗卫星进行多少修正，以修正 GPS 位置测量值。</p>
<p>一旦基站知道如何修正来自每个卫星的信号后，便可以与该地区的任何其他 GPS 接收器（通常称为漫游器）共享此信息。这通常使用无线电调制解调器来实现。巡回接收器检查其所看到的卫星是否可进行修正，并在适用的情况下进行应用，即使其不在已知位置，也可提高其伪距测量的准确性。</p>
<p>还有其他方法可以实现 DGPS。不必使用自己的本地基站（您在自己的站点上设置），而是可以通过基于 Web 的服务和数据连接来接收差分修正。在这种情况下，您的接收器（流动站）将以正常方式计算出其位置。然后，它将其位置传输到中央服务器，该服务器计算出离您最近的参考站的位置，然后再从该位置发回差分修正。这样的系统的优点在于，您可以从一个国家的一端行驶到另一端，并获得整个行程的有效修正。</p>
<p>另一种方法是使用称为 SBAS（基于卫星的增强系统）的基于卫星的修正服务。这些工作方式略有不同。已知位置的地球地面站可以对不同地理位置的差分进行修正。然后将这些修正上载到卫星，在那里它们可以广播到任何能够接收它们的接收器。但是，除了接收器需要配备正确的硬件之外，您通常还需要支付订阅费才能解锁修正。</p>
<p>使用 SBAS 服务可以提高接收器的准确性，但不能达到与本地基站相同的程度。使用 DGPS 时，位置测量的精度通常会提高到几十厘米，例如 40 厘米左右。通过 SABS 实现的 DGPS 通常精确到亚米，大约在 50-60 厘米之间。</p>
<h1 id="什么是-RTK？"><a href="#什么是-RTK？" class="headerlink" title="什么是 RTK？"></a>什么是 RTK？</h1><p>RTK 代表实时运动学，是另一种提高 GPS 位置测量精度的技术，然而，它是最难理解且实施最密集的技术之一。</p>
<p>我们已经看到，SPS 是 GPS 系统实现的第一个定位，并且使用 C/A 代码实现。如果可以使用差分修正，则可以提高 SPS 精度，因为可以消除卫星信号的时序延迟。使用约为 40 厘米的 DPGS 位置精度是很正常的。RTK 是 DGPS 的下一步，它有两个版本：RTK 浮点解（可达到分米级精度）以及 RTK 整数（可达到厘米级精度）。</p>
<p>要了解任一版本的工作原理，必须了解两点。首先是 RTK 正在改变我们使用民用 GPS 接收器应能实现的规则。它并不是一个被设计成旨在帮助我们的技术系统。相反，GPS 制造商认为这是一种比使用 C/A 代码所要达到的精度更高的方法。要了解的第二点就是，它基于载波本身，而不是基于它们所携带的 C/A 代码或导航消息。</p>
<p>那么它是怎样工作的？我们已经看到，SPS 基于使用 C/A 代码计算出的伪距测量值。接收器通过将其时钟与 GPS 卫星同步，然后为它可以看到的每颗卫星生成自己的 C/A 代码版本来完成此操作。如果它必须将自己的 C/A 代码副本延迟例如 7 毫秒，以匹配在天线上接收到的 C/A 代码，则它知道来自该卫星的信号的传输时间为 7 毫秒，然后就可以算出卫星有多远。</p>
<p>RTK 的最终目的是确定天线和卫星之间有多少个载波。这样做的原因很简单。我们已经看到，每颗卫星都广播了由 1,023 位组成的唯一 C/A 码。该代码以 1.023 Mb/s 的速率发送，这意味着大约每微秒发送一个位。在一微秒内，来自卫星的无线电信号覆盖了大约 300 米的距离。</p>
<p>C/A代码调制到的载波频率更高，但是-1575.42 MHz。这意味着单波覆盖了大约19厘米。如果我们能计算出卫星和天线之间有多少个全波，那么就可以更准确地计算出距离。事实上，如果我们知道有多少个全波，而且也可以测量出部分波（相位角），那么我们就可以非常精确。</p>
<p>RTK 整数和 RTK 浮点解可以被视为在系统中同时运行的两种独立（但相关）的算法。如果 RTK 整数有一个有效的解，则系统将切换至该解（但是 RTK 浮点解算法将继续在后台运行）。如果 RTK 整数随后变得无效，则系统将恢复为 RTK 浮点解，只要载波相位锁没有丢失，就无需再次启动。</p>
<p>那么算法有何不同？ RTK 浮点解旨在使用统计方法来识别您可能的位置（提高当前 DGPS 的准确性）。它至少需要与基站一起安装四颗普通卫星，并且（以俗称方式）在围绕卫星旋转的当前位置测量周围寻找一个圆点。与 RTK 整数不同，浮点解算法从不尝试解决歧义问题 — 它仅尝试识别围绕当前位置估计值绘制的圆内最可能的位置。RTK 浮点解的精度大约为 40 厘米，但最多可以提高到 20 厘米。</p>
<p>另一方面，RTK 整数旨在解决歧义问题，只有在解决之后才使用它。它需要五颗普通卫星，并且当找到有效的解决方案时，系统就会知道有 n 个载波以及它与卫星之间的任何部分波。它可以将其测量结果与 19 厘米波长的 0.6% 对准，从而提供约 1 厘米的精度。</p>
<h1 id="DGPS-或-RTK-不能提高速度测量的准确性吗？"><a href="#DGPS-或-RTK-不能提高速度测量的准确性吗？" class="headerlink" title="DGPS 或 RTK 不能提高速度测量的准确性吗？"></a>DGPS 或 RTK 不能提高速度测量的准确性吗？</h1><p>常见的误解是，GPS 速度测量是通过测量两次连续位置测量之间移动所需的时间来进行的。这不是测量速度的方法，也是位置精度对速度精度没有影响的原因。</p>
<p>为了计算速度，GPS 接收器实际上使用多普勒频移。因此，它们查看每颗卫星的载波中的频移，并使用该信息来计算速度矢量。因此，您的接收器是否处于 RTK 整数的 SPS 模式并不重要，速度测量将同样准确。<br>GNSS 有哪些局限性？</p>
<p>总体而言，GNSS 系统非常出色。它们易于使用，不会漂移，并且可以达到较高的准确性。但是，它们并不完美。对于初次使用者来说，为了充分发挥系统的潜能，他们需要清晰、连续的天空视野。如果您在一片旷野中工作，那很棒，但是，如果您要测量城市街道，或者在桥梁和隧道下进行工作，则最多只能得到降低后的精度，而在最坏情况下根本得不到测量值。</p>
<p>此外，虽然 GPS 接收器非常擅长捕获位置和速度测量值，但如果您也对侧倾、俯仰和偏航感兴趣，那就不好了。双天线系统有助于解决其中一些问题，但仍无法提供完整的图像。对于极其动态的操作，根本就不需要分辨率。</p>
<p>如需进一步了解惯性导航系统，请单击此处 <a href="/2020/08/07/%E4%BB%80%E4%B9%88%E6%98%AF%E6%83%AF%E6%80%A7%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F/" title="什么是惯性导航系统">什么是惯性导航系统</a> …</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2020/08/07/%E5%85%A8%E7%90%83%E5%8D%AB%E6%98%9F%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-GNSS-%E7%AE%80%E4%BB%8B/" data-id="ckdk0gktw008wjo2630m9anq3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-cryptography/密码学一小时必知" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/28/cryptography/%E5%AF%86%E7%A0%81%E5%AD%A6%E4%B8%80%E5%B0%8F%E6%97%B6%E5%BF%85%E7%9F%A5/" class="article-date">
  <time datetime="2020-07-28T08:52:40.000Z" itemprop="datePublished">2020-07-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/">密码学</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/28/cryptography/%E5%AF%86%E7%A0%81%E5%AD%A6%E4%B8%80%E5%B0%8F%E6%97%B6%E5%BF%85%E7%9F%A5/">密码学一小时必知[2010]</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>本文翻译了Colin Percival 于2010年在bsdcan的演讲ppt</p>
<p>原文标题：Everything you need to know about cryptography in 1 hour</p>
<p>演讲时间：May 13, 2010</p>
<p>原文在 <a href="https://www.bsdcan.org/2010/schedule/attachments/135_crypto1hr.pdf" target="_blank" rel="noopener">https://www.bsdcan.org/2010/schedule/attachments/135_crypto1hr.pdf</a></p>
<p>演讲视频在 <a href="https://www.youtube.com/watch?v=jzY3m5Kv7Y8" target="_blank" rel="noopener">https://www.youtube.com/watch?v=jzY3m5Kv7Y8</a> ( 请自行翻墙 )</p>
<p>Colin Percival 是密码学方面的专家，FreeBSD项目的安全长官，Tarsnap在线备份服务的创始人，scrypt密钥衍生算法的作者，致力于改进软件中密码学的应用，向程序员传播密码学的正确使用。</p>
<hr>
<h3 id="为什么要-cryptography-in-1-hour"><a href="#为什么要-cryptography-in-1-hour" class="headerlink" title="为什么要 cryptography in 1 hour"></a>为什么要 cryptography in 1 hour</h3><p>因为有例如下面这些错误的使用案例：</p>
<ol>
<li>Google keyczar(时间通道攻击)</li>
<li>SSL( session renegotiation)</li>
<li>Amazon AWS 签名方法 (可能碰撞的签名算法)</li>
<li>Flicker API 签名(hash length-extension) 错误地使用了错误的工具</li>
<li>Intel Hyper Threading (architectual side channel) 不常用的环境</li>
<li>WEP,WPA,GSM…（多种漏洞）</li>
</ol>
<p>密码学被攻破通常是由于：</p>
<ol>
<li>愚蠢</li>
<li>使用了错误的工具，或者以错误的方式使用它们</li>
<li>不常用的环境</li>
</ol>
<hr>
<h3 id="经验智慧：不要亲自写密码学代码！"><a href="#经验智慧：不要亲自写密码学代码！" class="headerlink" title="经验智慧：不要亲自写密码学代码！"></a>经验智慧：不要亲自写密码学代码！</h3><ol>
<li>使用SSL做传输</li>
<li>使用GPG保护静止数据</li>
</ol>
<p>“如果你在输入A-E-S到你的代码里，你已经开始犯错” – Tomas Ptacek</p>
<p>现实：如果你无论如何都要写密码学代码，你最好知道你在干什么</p>
<p>现实：大多数应用程序只需要众所周知的标准模式的一个子集，而这是很容易保证正确的</p>
<p>55分钟后，你应该：</p>
<p>知道在99%的情况下应该怎么做</p>
<p>知道一些常见的错误在哪里</p>
<p>知道当你在做一些非标准的事情的时候，你真的需要咨询一个密码学专家</p>
<hr>
<h3 id="密码学做保护，并对抗一些攻击，但不能对抗所有攻击："><a href="#密码学做保护，并对抗一些攻击，但不能对抗所有攻击：" class="headerlink" title="密码学做保护，并对抗一些攻击，但不能对抗所有攻击："></a>密码学做保护，并对抗一些攻击，但不能对抗所有攻击：</h3><ul>
<li>贿赂，盗窃，敲诈</li>
<li>监狱刑罚</li>
<li>攻击人通常比攻击数据更贵</li>
<li>攻击人通常比攻击数据更危险</li>
<li>数据被拷打时不会开记者招待会来控诉</li>
<li>密码学的目的是强迫美国政府拷打你</li>
<li>希望他们认为你的信息不是这么重要</li>
</ul>
<hr>
<h3 id="密码学有3个主要目的："><a href="#密码学有3个主要目的：" class="headerlink" title="密码学有3个主要目的："></a>密码学有3个主要目的：</h3><ul>
<li>加密 Encryption</li>
<li>认证 Authentication </li>
<li>识别 Identification</li>
</ul>
<ol>
<li>加密阻止恶意者读取你的数据</li>
<li>认证阻止恶意者在不被发现的情况下改动你的数据</li>
<li>识别阻止恶意者假装你</li>
</ol>
<p>有时认证和识别在一个步骤中进行：“这条消息自从我写下它之后没有被篡改”和“我是Colin” 可以替换成“这条消息自从Colin写下它之后没有被改过”</p>
<p>在大多数case里，你需要把2个，或者更多的密码学组件合起来使用</p>
<hr>
<h3 id="概念定义"><a href="#概念定义" class="headerlink" title="概念定义"></a>概念定义</h3><ol>
<li>plaintext是我们关心的数据</li>
<li>ciphertext是恶意者可以得到的数据</li>
<li>key用于在这两者之间做转换，有时候我们需要多个key</li>
</ol>
<p>对称密码学就是 ，使用相同的key，来把plaintext转换成ciphertext，和把ciphertext转换成 plaintext</p>
<p>非对称密码学就是，这两个方向的转换使用不同的key</p>
<p>理想的密码学组件并不存在，但是如果一个密码学组件被识别出不理想，一般就认为它是被攻破的</p>
<hr>
<h3 id="hashing"><a href="#hashing" class="headerlink" title="hashing"></a>hashing</h3><p>一个理想的hash函数H(x)是一个函数映射，把任意长度的输入映射成n-bit的输出， 保证：</p>
<ol>
<li>抵抗碰撞</li>
<li>单向</li>
</ol>
<p>抵抗碰撞意味着需要 2^(n/2) 的时间来找到2个输入，使得它们的hash相同</p>
<p>单向意味着给定hash后，需要2^n的时间来找到一个输入，使得它的hash是给定hash</p>
<p>没有保证任何其他性质</p>
<p>特别是： 知道H(x)可能允许一个攻击者计算某些y的H(y)</p>
<hr>
<h3 id="hashing-实践"><a href="#hashing-实践" class="headerlink" title="hashing 实践"></a>hashing 实践</h3><p><strong>使用</strong> SHA-256</p>
<p>考虑切换到SHA-3，在未来5-10年内（2010年算起）</p>
<p>使用一个hash，如果你可以安全地分布 H(x)，并且想验证不安全地收到的x’实际上等于x</p>
<p><strong>不要使用</strong>：MD2 MD4 MD5 SHA-1 RIPEMD</p>
<p>不要把 FreeBSD-8.0-RELEASE-amd64-disc1.iso和CHECKSUM.SHA256放到同一个FTP 服务器上，还以为自己干了件有用的事情</p>
<p><strong>不要尝试把一个hash函数当成对称签名用</strong></p>
<hr>
<h3 id="对称认证"><a href="#对称认证" class="headerlink" title="对称认证"></a>对称认证</h3><p>对称认证是通过提供一个消息认证码（MAC，message authentication code）来进行的。</p>
<p>一个理想的 MAC fk(x)使用一个key，来把任意长度的输入映射到n-bit的输出，确保需要 2^n 的时间，一个攻击者才能在得到任意 (x, fx(x)) 对的情况下，生成任意 (y,fk(y)) 对。 有时MAC被称作随机函数</p>
<p>与hashing不同，知道 fk(x) 不能使你对另一个key计算出 fk(y)，</p>
<p>Flicker的API使用了hashing来认证API请求，他们实际需要的是 MAC</p>
<hr>
<h3 id="对称认证-实践"><a href="#对称认证-实践" class="headerlink" title="对称认证 实践"></a>对称认证 实践</h3><p><strong>使用</strong> HMAC-SHA256</p>
<p>确保同样的输入，HMAC-SHA256不会生成不同的消息</p>
<p>Amazon和Flicker都做错了</p>
<p><strong>不要使用</strong> CBC-MAC</p>
<p>理论上安全，但是把你的块加密算法暴露给了攻击者</p>
<p>不要使用 Poly1305</p>
<p>太新，除非你是Daniel Bernstein(Poly 1305的发明者)，否则你基本不可能做出一个</p>
<p>安全和正确的实现</p>
<p><strong>不要</strong> 当验证一个签名的时候，通过timing side channel的形式泄露信息</p>
<hr>
<h3 id="Side-channel-攻击"><a href="#Side-channel-攻击" class="headerlink" title="Side channel 攻击"></a>Side channel 攻击</h3><p>一个side channel 是攻击者除了ciphertext以外可以获取信息的任何方式</p>
<p>密码系统是以它们的数学设计被定义的，但是side channel 是由于密码系统的人工实现导致的。</p>
<p>最常见的side channel是timing – 你花费多长时间来 加密/解密/签名/验证 一个消息</p>
<p>其他side channel包括：电磁辐射，电力消耗，和微架构特征（例如L1缓存替换，在支持 HyperThreading的Intel CPU上）</p>
<hr>
<h3 id="Side-channel-攻击-实践"><a href="#Side-channel-攻击-实践" class="headerlink" title="Side channel 攻击 实践"></a>Side channel 攻击 实践</h3><ul>
<li>咨询一个密码学专家，如果你计划使恶意者可以物理接触到任何密码设备</li>
<li>咨询一个密码学专家，如果你计划允许恶意者在你允许密码学的物理硬件上运行代码(虚拟化系统)</li>
<li>咨询一个密码学专家，如果你计划发布一个以新方式泄露信息的CPU</li>
</ul>
<p>intel可能做错了 不要写其运行时间泄露信息的代码</p>
<hr>
<h3 id="Timing-attacks"><a href="#Timing-attacks" class="headerlink" title="Timing attacks"></a>Timing attacks</h3><p><strong>避免</strong> 依赖于key，或者依赖于plaintext的表查找</p>
<p>不要有依赖于key，或者依赖于plaintext的分支(if, for, while , foo?bar:baz 等代码指令)</p>
<p>不要想这种代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;MACLEN;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(MAC-computed[i] != MAC-received[i])</span><br><span class="line">        <span class="keyword">return</span> MAC_IS_BAD ;</span><br><span class="line"><span class="keyword">return</span>  MAC_IS_GOOD;</span><br></pre></td></tr></table></figure>

<p>应该这样写</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;MACLEN;i++)&#123;</span><br><span class="line">    x  |= (MAC-computed[i] - MAC-received[i]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span>  x?MAC_IS_BAD:MAC_IS_GOOD;</span><br></pre></td></tr></table></figure>

<p>Google Keyczar就做错了</p>
<hr>
<h3 id="块加密"><a href="#块加密" class="headerlink" title="块加密"></a>块加密</h3><p>对称加密通常构建在块加密算法的基础之上</p>
<p>一个理想的块加密算法使用一个key来双向地把n-bit的输入x转换成n-bit的输出Ek(x)，这样当 知道(x,Ek(x))时，对任意的(x’,k’)!=(x,k)，你没法以大于2^-n的概率猜出(x’,Ek’(x’))</p>
<p>有时被称为“随机排列”</p>
<p>通常我们关心的是Ek(x)不透露出 当x!=x’时Ek(x’)的信息。</p>
<p>如果一个攻击者可以通过观察一个块加密算法怎么处理不同key，来获取有用信息，该块加密算法 被认为可被 key相关攻击 （key-related attack）攻破。</p>
<hr>
<h3 id="块加密-实践"><a href="#块加密-实践" class="headerlink" title="块加密 实践"></a>块加密 实践</h3><p><strong>使用</strong> AES-256</p>
<p>AES-256有related key攻击漏洞，但是当你把其它事情做对时，这并不是问题</p>
<p>AES-128理论上足够强壮，但是块加密算法很难没有side channel地正确实现 ，</p>
<p>并且key里面的额外bit 在key的一些bit泄露之后是有用的。</p>
<p><strong>不要使用</strong> blowfish</p>
<p><strong>想都不要想使用DES</strong></p>
<p><strong>避免</strong> triple-des(3des)</p>
<p>不要使用块加密算法”raw”，替代地，在一个已经建立的操作模式中使用它(?)。</p>
<hr>
<h3 id="块加密算法操作模式"><a href="#块加密算法操作模式" class="headerlink" title="块加密算法操作模式"></a>块加密算法操作模式</h3><p>一个块加密算法操作模式告诉你怎么使用一个块加密算法来保护数据流</p>
<p>在很多case中，plaintext需要被填充到块大小的整数倍，块密码算法操作模式会 告诉你怎么做到这一点</p>
<p>流行的模式有: ECB ，CBC , CFB , OFB，CTR，IAPM，CCM，EAX，GCM …</p>
<p>大多数模式只提供了加密，但也有一些提供了认证</p>
<h3 id="实践：-使用：CTR模式"><a href="#实践：-使用：CTR模式" class="headerlink" title="实践： 使用：CTR模式"></a>实践： 使用：CTR模式</h3><p>不要使用同时提供加密和认证的模式</p>
<p>想都不要想使用ECB</p>
<p>使用一个MAC（例如HMAC-SHA256）来认证你的加密数据</p>
<p>如果你认为你不需要这么做，咨询一个密码学专家，他会告诉你你为什么是错的。</p>
<p>验证你的加密数据的真实性，在你揭秘数据之前。</p>
<hr>
<h3 id="非对称加密"><a href="#非对称加密" class="headerlink" title="非对称加密"></a>非对称加密</h3><p>一个非对称加密模式使用一个签名key来把plaintext转换成ciphertext，使用一个认证码来把 ciphertext转化成plaintext或者“错误的签名”</p>
<p>签名key不能从认证key算出，但是认证key可以从签名key算出</p>
<p>ciphertext通常由 plaintext加一个签名构成</p>
<p>如果一个攻击者接触到了验证key，并且可以说服你签名任意的plaintext，那就可以认为这个 非对称加密系统被攻破了。</p>
<hr>
<h3 id="非对称认证"><a href="#非对称认证" class="headerlink" title="非对称认证"></a>非对称认证</h3><p><strong>使用</strong> RSASSA-PSS（RSA签名，使用Probabilistic Signature Scheme padding）</p>
<p><strong>使用</strong> 2048-bit的RSA key，使用65537作为公钥的公共幂，和SHA256</p>
<p><strong>不要使用</strong> PKCS v1.5 padding</p>
<p><strong>想都不要想</strong> 使用不带消息padding的RSA(即RAW)</p>
<p>可能避免： DSA</p>
<p>可能避免：椭圆曲线签名模式</p>
<p><strong>想都不要想</strong> 使用相同的RSA key既做认证，又做加密</p>
<p>非对称加密</p>
<p>非对称加密类似于非对称签名，除了方向相反，使用公钥把plaintext转成ciphertext，但是要 使用私钥把ciphertext转成plaintext</p>
<p>一个</p>
<p>大多数非对称加密模式都限制能加密的消息大小到一个很低的数字以下。</p>
<hr>
<h3 id="非对称加密-实践"><a href="#非对称加密-实践" class="headerlink" title="非对称加密 实践"></a>非对称加密 实践</h3><p><strong>使用</strong> RSAES-OAEP（RSA加密，使用Optimal Asymmeric Encryption Padding）</p>
<p>使用2048-bit的RSA key，以65537为幂底数，SHA256和MGF1-SHA256</p>
<p><strong>不要使用</strong> PCKS v1.5 padding</p>
<p>不要使用不带消息padding的RSA</p>
<p>生成一个随机key，用这个key使用对称加密加密你的消息，然后使用非对称加密算法加密你的key</p>
<p>小心避免RSAES-OAEP的timing攻击通道</p>
<hr>
<h3 id="密码"><a href="#密码" class="headerlink" title="密码"></a>密码</h3><p>密码通常被直接用于识别，但是也可以被用于加密或者认证。</p>
<h3 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h3><p><strong>尽可能避免密码</strong></p>
<p>使用一个key继承函数，来尽快把密码转成key。</p>
<p>使用PBKDF2，如果你跟随流行趋势</p>
<p>使用scrypt，如果你希望2^8倍地比严肃的攻击者更安全</p>
<p><strong>想都不要想把用户的密码存储在服务器上。绝对不能，就算它们被加密了也不能。</strong></p>
<hr>
<h3 id="SSL"><a href="#SSL" class="headerlink" title="SSL"></a>SSL</h3><p>SSL是一个可怕的系统</p>
<p>SSL的复杂性导致它很难别安全地实现</p>
<p>SSL给了攻击者很多攻击选项</p>
<p>SSL要求你决定你想信任什么CA</p>
<p>你相信中国政府吗？</p>
<p>不幸的是，SSL是唯一可行的选项</p>
<h3 id="SSL-实践"><a href="#SSL-实践" class="headerlink" title="SSL 实践"></a>SSL 实践</h3><p>随客户端分发非对称签名key，并且使用这个key开始你的整个密码系统</p>
<p>使用SSL加密你的网站，Email，和其他公开的标准面向Internet的服务器。</p>
<p>认真地想想你信任哪些CA。</p>
<hr>
<h3 id="奇奇怪怪地部分"><a href="#奇奇怪怪地部分" class="headerlink" title="奇奇怪怪地部分"></a>奇奇怪怪地部分</h3><p>咨询一个密码学专家，如果</p>
<ul>
<li>你的密码学硬件设备，攻击者可以物理接触到。（例如smartcards）</li>
<li>你想使用最少的电力消耗（例如在手机上）</li>
<li>你需要处理尽可能大的数据流量（例如 10Gbps的 IPSec 隧道）</li>
<li>你需要传输尽可能少的bit（例如和一个核潜艇的通信）</li>
<li>你想忽视我在这个talk中提出的任何建议</li>
</ul>
<hr>
<p>QA</p>
<p>from : <a href="https://blog.helong.info/blog/2015/04/12/translate-Everything-you-need-to-know-about-cryptgraphy-in-1-hour/" target="_blank" rel="noopener">https://blog.helong.info/blog/2015/04/12/translate-Everything-you-need-to-know-about-cryptgraphy-in-1-hour/</a></p>
<hr>
<h2 id="场景与算法选择"><a href="#场景与算法选择" class="headerlink" title="场景与算法选择"></a>场景与算法选择</h2><p><img src="/images/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%9C%BA%E6%99%AF%E4%B8%8E%E7%AE%97%E6%B3%95%E9%80%89%E6%8B%A9.png" alt="密码学-场景与算法选择"><br>from <a href="https://bitcoin-on-nodejs.ebookchain.org/4-%E5%BC%80%E5%8F%91%E5%AE%9E%E8%B7%B5/0-%E5%8A%A0%E5%AF%86%E4%B8%8E%E8%A7%A3%E5%AF%86/3-%E4%B8%89%E5%BC%A0%E5%9B%BE%E8%AE%A9%E4%BD%A0%E5%85%A8%E9%9D%A2%E6%8E%8C%E6%8F%A1%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86%E6%8A%80%E6%9C%AF.html" target="_blank" rel="noopener">bitcoin-on-nodejs 4-开发实践/0-加密与解密/3-三张图让你全面掌握加密解密技术 </a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2020/07/28/cryptography/%E5%AF%86%E7%A0%81%E5%AD%A6%E4%B8%80%E5%B0%8F%E6%97%B6%E5%BF%85%E7%9F%A5/" data-id="ckdk0gkt80067jo26417cgfzg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-cryptography/现代密码学实践指南" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/28/cryptography/%E7%8E%B0%E4%BB%A3%E5%AF%86%E7%A0%81%E5%AD%A6%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97/" class="article-date">
  <time datetime="2020-07-28T08:29:01.000Z" itemprop="datePublished">2020-07-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/">密码学</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/28/cryptography/%E7%8E%B0%E4%BB%A3%E5%AF%86%E7%A0%81%E5%AD%A6%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97/">现代密码学实践指南[2015年]</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="现代密码学实践指南-2015年"><a href="#现代密码学实践指南-2015年" class="headerlink" title="现代密码学实践指南[2015年]"></a>现代密码学实践指南[2015年]</h1><hr>
<p>本文介绍目前现代密码学的最先进技术，<br>前半部分主要翻译自  <a href="https://gist.github.com/tqbf/be58d2d39690c3b366ad" target="_blank" rel="noopener">《Cryptographic Right Answers》</a> ，附上收集的资料，和byron个人的理解。</p>
<p>密码学理论艰深，概念繁多，本人知识水平有限，错误难免，如果您发现错误，请务必指出，非常感谢!  </p>
<hr>
<h3 id="下文分类介绍在各种适用场景下，你应该使用的现代密码学算法"><a href="#下文分类介绍在各种适用场景下，你应该使用的现代密码学算法" class="headerlink" title="下文分类介绍在各种适用场景下，你应该使用的现代密码学算法"></a>下文分类介绍在各种适用场景下，你应该使用的现代密码学算法</h3><h3 id="1-加密数据"><a href="#1-加密数据" class="headerlink" title="1.  加密数据 :"></a>1.  <strong>加密数据</strong> :</h3><p>按照优先级，应该选择:<br>(1)   首选 NaCl库，或者libsodium库，使用里面的<code>crypto_secretbox()</code>/<code>crypto_secretbox_open()</code> 函数<br>(2)   Chacha20-Poly1305 算法<br>(3)   AES-GCM 算法 </p>
<p>适用场景:当你需要避免把明文数据在网络上传输的时候。</p>
<p>以上3种算法，都是AEAD类的算法，AEAD是2015年最好的选择。<br>其中的(2)和(3)在结构上类似：一个流加密模式的算法，配合一个多项式结构的MAC。<br>(2)是一个流加密算法，配合一个为通用cpu优化的MAC算法，<br>对密码学库的实现者来说，Poly1305也比GCM更容易安全地实现。<br>AES-GCM是工业标准(TLS目前主要用的就是AES-GCM)，现代CPU通常都有专门为AES-GCM设计的硬件指令，但是在没有硬件指令支持的CPU上(比如32位的arm)，(3)性能低于(2)。 </p>
<p>此外，应该</p>
<ul>
<li>避免AES-CBC</li>
<li>避免AES-CTR</li>
<li>避免64bit块大小的块加密算法–(说的就是你–BlowFish)</li>
<li>避免OFB模式</li>
<li>不要使用RC4，RC4已经被攻破</li>
</ul>
<h3 id="2-对称密钥长度"><a href="#2-对称密钥长度" class="headerlink" title="2.  对称密钥长度 :"></a>2.  <strong>对称密钥长度</strong> :</h3><p>选择使用256bit长度的密钥</p>
<p>适用场景：只要你在使用密码学，你就应该注意<strong>对称密钥长度</strong></p>
<p>请记住：不要把对称加密（如AES）的key长度，和非对称加密(如RSA)的key长度搞混淆了，对称加密的key通常比非对称加密的key短多了。</p>
<p>下表对比了相同安全程度时，不同算法的密钥长度，单位:bit</p>
<table>
<thead>
<tr>
<th>Symmetric</th>
<th>ECC</th>
<th>DH/DSA/RSA</th>
</tr>
</thead>
<tbody><tr>
<td>80</td>
<td>163</td>
<td>1024</td>
</tr>
<tr>
<td>112</td>
<td>233</td>
<td>2048</td>
</tr>
<tr>
<td>128</td>
<td>283</td>
<td>3072</td>
</tr>
<tr>
<td>192</td>
<td>409</td>
<td>7680</td>
</tr>
<tr>
<td>256</td>
<td>571</td>
<td>15360</td>
</tr>
</tbody></table>
<p>此外，应该</p>
<ul>
<li>避免使用巨大key的算法(使用远大于256的key，只能说明使用者没有安全概念)</li>
<li>避免把多个加密算法串联叠加起来使用，这并没有什么卵用</li>
<li>避免128bit以下的key长度(比如，哥们求你别再提DES这种56bit密钥的古董了)</li>
</ul>
<h3 id="3-对称签名"><a href="#3-对称签名" class="headerlink" title="3.  对称签名:"></a>3.  <strong>对称签名</strong>:</h3><p>应该选择 HMAC 类的算法</p>
<p>适用场景：安全加固一个API，如各种开放API的调用方认证</p>
<p>如果对一个API，你需要做认证(authenticating)，但是不需要做加密(encrypting)，记得千万不要自己发明算法，你自己发明的MAC算法基本都有安全漏洞，如果不信，请Google一下 “长度扩展攻击”<br><a href="http://en.wikipedia.org/wiki/Length_extension_attack" target="_blank" rel="noopener">长度扩展攻击</a><br><a href="http://netifera.com/research/flickr_api_signature_forgery.pdf" target="_blank" rel="noopener">Flickr的漏洞案例</a></p>
<p>同时，必须要注意的是，要使用一个<strong>常数时间字符串对比算法</strong>（这个地方和码农的常识完全相反，请务必留意）</p>
<p>此外，应该</p>
<ul>
<li>避免自行设计的“带密码的hash”结构，你的设计基本都是有安全漏洞的</li>
<li>避免HMAC-MD5，避免HMAC-SHA1，使用HMAC-SHA256, HMAC-SHA512等</li>
<li>避免复杂的多项式MAC</li>
<li>避免加密hash值的结构</li>
<li>避免CRC</li>
</ul>
<h3 id="4-Hashing-HMAC-算法"><a href="#4-Hashing-HMAC-算法" class="headerlink" title="4.  Hashing/HMAC 算法"></a>4.  <strong>Hashing/HMAC 算法</strong></h3><p>应该选择 <a href="http://en.wikipedia.org/wiki/SHA-2" target="_blank" rel="noopener">SHA2</a> 类的算法:: SHA-256, SHA-384, SHA-512, SHA-512/256</p>
<p>优先使用 SHA-512/256，SHA-512/256这个算法把 SHA-512 的512bit输出截短到256bit，避开了length extension 攻击。<br>同时，目前SHA-2是很安全可靠的，你不需要升级到SHA-3. </p>
<p>此外，应该</p>
<ul>
<li>避免SHA-1</li>
<li>避免MD5</li>
<li>避免MD6</li>
</ul>
<h3 id="5-随机ID"><a href="#5-随机ID" class="headerlink" title="5.  随机ID"></a>5.  <strong>随机ID</strong></h3><p>应该使用256 bit的随机值</p>
<p>一定要使用 /dev/urandom，请认准这个</p>
<p>此外，应该 </p>
<ul>
<li>避免用户空间的随机数生成器如:havaged,prngs,egd,等</li>
<li>避免/dev/random</li>
</ul>
<h3 id="6-密码处理"><a href="#6-密码处理" class="headerlink" title="6.  密码处理"></a>6.  <strong>密码处理</strong></h3><p>按照优先级顺序,选择： </p>
<ul>
<li>scrypt</li>
<li>bcrypt</li>
<li>如果以上2个都没有，那就用PBKDF2</li>
</ul>
<p>此外，应该 </p>
<ul>
<li>避免直接SHA-2</li>
<li>避免直接SHA-1</li>
<li>避免直接MD5</li>
</ul>
<h3 id="7-非对称加密"><a href="#7-非对称加密" class="headerlink" title="7.  非对称加密"></a>7.  <strong>非对称加密</strong></h3><p>应该使用NaCl库</p>
<p>适用场景：当你需要加密消息，发给陌生人，并且对方异步接收消息，做离线解密时。这是一个很窄的应用案例，这种用法有个名字叫<em>电子信封(digital envelope)</em>，典型比如gpg加密文件后发送。</p>
<p>这条是几条之中最难做正确的，不要使用底层的密码学库，比如OpenSSL或者BouncyCastle。</p>
<p>你应该停止使用RSA，并且切换到椭圆曲线类体制，原因是：</p>
<ul>
<li>对RSA的攻击能力的进步 — 定义在传统质数域上的乘法运算(应用包括DH,DSA,ElGamal等)，要比椭圆曲线域上的乘法运算快得多。这是由于质数域上数域筛法（number field sieve,NFS）的进展，而在椭圆曲线域上，没有NFS这类算法。</li>
<li>RSA (和DH) 或迫使你考虑“向后兼容性”，而椭圆曲线体制没有这种兼容性包袱。TLS最近的几个安全漏洞，部分原因也是由于这种向后兼容性，导致已经被破解的陈旧算法存在</li>
<li>RSA在一般场景中，都是直接用公钥做非对称加密，这种用法丧失了<strong>前向安全性(Perfect Forward Secrecy)</strong>。而椭圆曲线就不提倡，也很难这样使用，这样你就不会害死自己了。</li>
<li>在椭圆曲线体制下，保证正确性和安全性的重任，主要由密码学家承担，密码学家会提供一组曲线参数，在某一性能水平下，针对安全性和性能做优化。这样程序员不容易误用而害死自己。在RSA体制下，正好相反，程序员必须提供参数来保证正确性和安全性，就算是RSA-OAEP这种很好的设计，程序员也必须知道怎么提供参数，这样程序员很容易搞错。</li>
</ul>
<p>如果你必须使用RSA，一定要使用RSA-OAEP with SHA256，指数使用 65537</p>
<ul>
<li>避免 RSA-PKCS1v15</li>
<li>避免 ElGamal</li>
<li>避免 RSA</li>
</ul>
<h3 id="8-非对称签名"><a href="#8-非对称签名" class="headerlink" title="8.  非对称签名"></a>8.  <strong>非对称签名</strong></h3><p>应该使用NaCl，Ed25519，或者RFC6979</p>
<p>应用场景：如果你在设计一种新的比特币，或者一个给Ruby Gems或者Vagrant imges文件签名的系统，或者数字版权保护系统(DRM)，其中一系列的文件需要离线做认证；<br>或者你在设计一个加密消息传输层 </p>
<p>上一条的内容在此处全部适用。</p>
<p>在10+年做付费软件安全评估的工作经历中，我只有屈指可数的几次，遇到使用RSA-PSS的用户，RSA-PSS是一个学术界的推荐算法。 </p>
<p>过去10年，非对称签名最主要的应用场景是比特币，和前向安全的密钥协商（TLS协议里面的ECDHE）。<br>其中最主要的算法全都是基于椭圆曲线体制的。务必警惕新出现的使用RSA签名的系统，很有可能有问题。 </p>
<p>在过去几年中，业界有一种趋势：放弃传统DSA签名，改为难以误用的<strong>确定性签名体制</strong>，其中的EdDSA(不要和ECDSA搞混了喂！)和RFC6979是最好的例子。<br>这种趋势的主要是受到2010年索尼PlayStation 3的 ECDSA私钥被破解事件的影响，在这个案例中，索尼公司的码农错误地把一个随机数重复使用来做ECDSA签名，形成了漏洞，使得破解者据此直接把私钥算出来了。<br><strong>确定性签名体制</strong>在设计中不再依赖随机数生成器，因此彻底避开此类误用。所以你应该优先使用确定性签名体制。</p>
<ul>
<li>避免RSA-PKCS1v15，避免RSA，避免ECDSA，避免DSA</li>
<li>特别要避免常规的DSA和ECDSA</li>
</ul>
<h3 id="9-Diffie-Hellman-密钥交换"><a href="#9-Diffie-Hellman-密钥交换" class="headerlink" title="9.  Diffie-Hellman 密钥交换"></a>9.  <strong>Diffie-Hellman 密钥交换</strong></h3><p>应该使用NaCl，Curve25519，或者DH-2048</p>
<p>适用场景:<em>如果你在设计加密消息传输系统，并且无法使用固定对称密码</em></p>
<p>这是很棘手的一条，主要考量如下：</p>
<ul>
<li>如果你能使用NaCl库，那就使用NaCl库。你甚至不需要管NaCl是什么。</li>
<li>如果你能使用一个可信赖的第三方库，那就使用Curve25519，这是一条现代的ECDH曲线，有丰富的开源代码，性能经过高度优化，被彻底地安全分析过。并且Curve25519即将进入TLS 1.3版本标准。</li>
<li>但是绝对不要自己实现Curve25519，也绝对不要自己移植Curve25519的C代码</li>
<li>如果你不能使用第三方ECDH库，但是可以使用DH库，那就使用DH-2048，使用1个标准的2048 bit的群。</li>
<li>但是不要使用传统的DH，如果你需要协商DH参数，或者和其他实现互操作</li>
<li>如果你一定要做握手协商，或者和旧软件互操作，那么考虑使用NIST P-256, NIST P-256 有广泛的软件支持。</li>
<li>写死在代码里的DH-2048参数，比NIST P-256更安全。NIST P-256比协商出来的DH更安全。</li>
<li>但是，由于NIST P-256的实现有一些陷阱，所以一定要谨慎选择可信赖的，广泛使用使的第三方库</li>
<li>P-256 可能是NIST曲线中最安全的，不要使用P-224。</li>
</ul>
<p>DH（密钥协商）算法确实很难用，但是它很重要。</p>
<ul>
<li>避免，传统常规的 DH, SRP, J-PAKE 握手和协商</li>
<li>避开任何只使用了块加密算法和<code>srand(time())</code>的密钥协商模式（肯定有漏洞）</li>
</ul>
<h3 id="10-网站安全"><a href="#10-网站安全" class="headerlink" title="10.  网站安全"></a>10.  <strong>网站安全</strong></h3><p>应该使用OpenSSL，或者Google的BoringSSL，或者直接使用 AWS的 ELB</p>
<p>此处网站安全，指的是让网站支持HTTPS协议。<br>如果你不能把这个任务交给Amazon的云服务去做，把难题留给Amazon去解决，那么OpenSSL目前仍然是正确选择。</p>
<ul>
<li>避免不常见的TLS库，例如polarssl，GnuTLS，MatrixSSL等</li>
</ul>
<h3 id="11-客户端-服务器结构的应用程序的安全："><a href="#11-客户端-服务器结构的应用程序的安全：" class="headerlink" title="11.  客户端-服务器结构的应用程序的安全："></a>11.  <strong>客户端-服务器结构的应用程序的安全</strong>：</h3><p>应该使用TLS</p>
<p>适用场景：如果你以为自己理解了前面关于公钥加密的介绍。。。</p>
<p>通常，在你设计了自己的RSA协议之后的1至18个月，你肯定会发现，你犯了某个错误，使你的协议没有任何安全性。<br>比如Salt Stack，Salt Stack的协议使用了 e=1 的RSA 公钥。。。 </p>
<p>听起来，TLS有下面这些黑历史：</p>
<ul>
<li>The Logjam DH negotiation attack</li>
<li>The FREAK export cipher attack</li>
<li>The POODLE CBC oracle attack</li>
<li>The RC4 fiasco</li>
<li>The CRIME compression attack</li>
<li>The Lucky13 CBC padding oracle timing attack</li>
<li>The BEAST CBC chained IV attack</li>
<li>Heartbleed</li>
<li>Renegotiation</li>
<li>Triple Handshakes</li>
<li>Compromised CAs</li>
</ul>
<p>但是，你仍然应该使用TLS做传输协议，因为： </p>
<ul>
<li>这些漏洞中的大部分，仅仅是针对浏览器的，因为他们依赖受害者执行攻击者控制的JavaScript脚本，这些JavaScript脚本生成重复的明文，或特定的明文。</li>
<li>这些漏洞中的大部分，其影响都可以被减轻，只需要你在代码和配置里面写死 TLS v1.2, ECDHE，和 AES-GCM就行。这听起来很棘手，但是这远远没有你自己设计使用ECDHE和AES-GCM的传输协议棘手。</li>
<li>在一个自定义的传输协议的场景中，你并不需要依赖CA，你可以用一个自签名证书，嵌入到你的客户端里面。</li>
</ul>
<ul>
<li>不要自己设计加密传输协议，这是<strong>极其困难而易错的工程难题</strong></li>
<li>使用TLS，但是不要使用默认配置</li>
</ul>
<h3 id="12-在线备份"><a href="#12-在线备份" class="headerlink" title="12.  在线备份"></a>12.  <strong>在线备份</strong></h3><p>应该使用Tarsnap</p>
<hr>
<h1 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h1><p>本文的内容比较新，相关中文资料极少，因此文中的名词对读者可能有点陌生，故byron这里介绍一下文中提到的一些名词：</p>
<h5 id="1-NaCl库"><a href="#1-NaCl库" class="headerlink" title="1. NaCl库:"></a>1. NaCl库:</h5><p><a href="http://nacl.cr.yp.to/" target="_blank" rel="noopener">http://nacl.cr.yp.to/</a><br>是密码学学术权威 Daniel J. Bernstein教授 设计的一个密码学算法库，2008年发开始公布。<br>NaCl的特点是：api简洁而易用，高性能，高安全性，主要用于网络通信，加密，解密，签名等，NaCl提供了构建高层密码学工具的核心功能。  </p>
<h5 id="2-libsodium库"><a href="#2-libsodium库" class="headerlink" title="2. libsodium库:"></a>2. libsodium库:</h5><p><a href="https://download.libsodium.org/doc/" target="_blank" rel="noopener">https://download.libsodium.org/doc/</a><br>libsodium是对NaCl库的一个分支，进一步改进接口易用性，和可移植性。  </p>
<h5 id="3-AEAD"><a href="#3-AEAD" class="headerlink" title="3. AEAD:"></a>3. AEAD:</h5><p><a href="https://www.imperialviolet.org/2014/02/27/tlssymmetriccrypto.html" target="_blank" rel="noopener">https://www.imperialviolet.org/2014/02/27/tlssymmetriccrypto.html</a><br>AEAD的概念: 在通常的密码学应用中，Confidentiality (保密) 用加密实现，Message authentication (消息认证) 用MAC实现。<br>这两种算法的配合方式，引发了很多安全漏洞，过去曾经有3种方法：1. Encrypt-and-MAC 2.MAC-then-Encrypt 3.Encrypt-then-MAC ，后来发现，1和2都是有安全问题的，所以，2008年起， 逐渐提出了“用一个算法在内部同时实现cipher+MAC”的idea，称为AEAD(Authenticated encryption with additional data)。<br>在AEAD这种概念里，cipher+MAC 被 一个AEAD算法替换。<br><a href="http://en.wikipedia.org/wiki/Authenticated_encryption" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Authenticated_encryption</a>  </p>
<h5 id="4-ChaCha20-poly1305"><a href="#4-ChaCha20-poly1305" class="headerlink" title="4. ChaCha20-poly1305"></a>4. ChaCha20-poly1305</h5><p>ChaCha20-poly1305是一种AEAD，提出者是Daniel J. Bernstein教授，针对移动互联网优化，目前Google对移动客户端的所有流量都使用ChaCha20-Poly1305</p>
<h5 id="5-AES-GCM"><a href="#5-AES-GCM" class="headerlink" title="5. AES-GCM"></a>5. AES-GCM</h5><p>AES-GCM是一种AEAD，是目前TLS的主力算法，互联网上https流量的大部分依赖使用AES-GCM。</p>
<h5 id="6-AES-GCM和ChaCha20-Poly1305的性能对比测试结果"><a href="#6-AES-GCM和ChaCha20-Poly1305的性能对比测试结果" class="headerlink" title="6. AES-GCM和ChaCha20-Poly1305的性能对比测试结果:"></a>6. AES-GCM和ChaCha20-Poly1305的性能对比测试结果:</h5><table>
<thead>
<tr>
<th>Chip</th>
<th>AES-128-GCM  speed</th>
<th>ChaCha20-Poly1305  speed</th>
</tr>
</thead>
<tbody><tr>
<td>OMAP 4460</td>
<td>24.1 MB/s</td>
<td>75.3 MB/s</td>
</tr>
<tr>
<td>Snapdragon S4 Pro</td>
<td>41.5 MB/s</td>
<td>130.9 MB/s</td>
</tr>
<tr>
<td>Sandy Bridge Xeon (AESNI)</td>
<td>900 MB/s</td>
<td>500 MB/s</td>
</tr>
</tbody></table>
<h5 id="7-AES-CBC"><a href="#7-AES-CBC" class="headerlink" title="7. AES-CBC"></a>7. AES-CBC</h5><p>关于AES-CBC，在AES-GCM流行之前，TLS主要依赖AES-CBC，而由于历史原因，TLS在设计之初固定选择了MAC-then-Encrypt结构，AES-CBC和MAC-then-encrypt结合，为选择密文攻击(CCA)创造了便利条件，TLS历史上有多个漏洞都和CBC模式有关：</p>
<ul>
<li>The POODLE CBC oracle attack:参考: <a href="http://www.thoughtcrime.org/blog/the-cryptographic-doom-principle/" target="_blank" rel="noopener">1.POODLE的一个分析</a> <a href="https://www.openssl.org/~bodo/tls-cbc.txt" target="_blank" rel="noopener">2.openssl的分析</a> <a href="http://drops.wooyun.org/papers/3194" target="_blank" rel="noopener">3.乌云的文章</a></li>
<li>The CRIME compression attack:</li>
<li>The Lucky13 CBC padding oracle timing attack:</li>
<li>The BEAST CBC chained IV attack:</li>
</ul>
<h5 id="8-SHA2"><a href="#8-SHA2" class="headerlink" title="8. SHA2"></a>8. SHA2</h5><p><a href="http://en.wikipedia.org/wiki/SHA-2" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/SHA-2</a></p>
<h5 id="9-Curve25519"><a href="#9-Curve25519" class="headerlink" title="9. Curve25519"></a>9. Curve25519</h5><p><a href="http://cr.yp.to/ecdh.html" target="_blank" rel="noopener">http://cr.yp.to/ecdh.html</a><br>Curve25519 是目前最高水平的 Diffie-Hellman函数，适用于广泛的场景，由Daniel J. Bernstein教授设计。<br>由于NIST P-256的设计过程不透明，有来历不明的参数，被广泛怀疑有后门，所以设计了Curve25519，Curve25519的设计过程完全公开，没有任何来历不明的参数。<br>部署情况：<a href="http://ianix.com/pub/curve25519-deployment.html" target="_blank" rel="noopener">http://ianix.com/pub/curve25519-deployment.html</a>  </p>
<h5 id="10-Ed25519"><a href="#10-Ed25519" class="headerlink" title="10. Ed25519"></a>10. Ed25519</h5><p><a href="http://ed25519.cr.yp.to/" target="_blank" rel="noopener">http://ed25519.cr.yp.to/</a><br>Ed25519是一个数字签名算法，  </p>
<ul>
<li>签名和验证的性能都极高， 一个4核2.4GHz 的 Westmere cpu，每秒可以验证 71000 个签名</li>
<li>安全性极高，等价于RSA约3000-bit</li>
<li>签名过程不依赖随机数生成器，不依赖hash函数的防碰撞性，没有时间通道攻击的问题</li>
<li>并且签名很小，只有64字节，公钥也很小，只有32字节。 部署情况：<a href="http://ianix.com/pub/ed25519-deployment.html" target="_blank" rel="noopener">http://ianix.com/pub/ed25519-deployment.html</a></li>
</ul>
<h5 id="11-前向安全性"><a href="#11-前向安全性" class="headerlink" title="11. 前向安全性"></a>11. 前向安全性</h5><p>前向安全性( Perfect Forward Secrecy ) <a href="http://vincent.bernat.im/en/blog/2011-ssl-perfect-forward-secrecy.html" target="_blank" rel="noopener">http://vincent.bernat.im/en/blog/2011-ssl-perfect-forward-secrecy.html</a><br>前向安全性指的是，如果攻击者抓取并保存流量，那么将来私钥泄露后，攻击者也无法利用泄露的私钥解密这些流量。  </p>
<h5 id="12-Diffie-Hellman-密钥交换"><a href="#12-Diffie-Hellman-密钥交换" class="headerlink" title="12. Diffie-Hellman 密钥交换"></a>12. Diffie-Hellman 密钥交换</h5><p><a href="http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange</a><br>在任何一本密码学教材里面都会重点介绍的</p>
<h5 id="13-constant-time-compare"><a href="#13-constant-time-compare" class="headerlink" title="13. constant time compare"></a>13. constant time compare</h5><p>针对Timing attack，<a href="http://en.wikipedia.org/wiki/Timing_attack" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Timing_attack</a> （这种攻击真是脑洞大开！）<br>当一个算法的运行时间和输入数据有关的时候，可以根据运行时间这一信息，破解出密钥等。<br>典型的，比如要验证一个对称签名，如果你用了C库里面的<code>memcmp()</code>，那你就会被timing attack方式攻击。<br>因此，涉及到密码学数据的memcmp，必须要用运行时间和输入无关的函数，比如OpenSSL库里面的<code>CRYPTO_memcmp()</code>   </p>
<p>from: </p>
<ul>
<li><a href="https://blog.helong.info/blog/2015/06/05/modern-crypto/" target="_blank" rel="noopener">https://blog.helong.info/blog/2015/06/05/modern-crypto/</a></li>
<li><a href="https://gist.github.com/byronhe/232d22f1d3dcaa0a20cb" target="_blank" rel="noopener">https://gist.github.com/byronhe/232d22f1d3dcaa0a20cb</a></li>
</ul>
<hr>
<h2 id="加密解密算法选择"><a href="#加密解密算法选择" class="headerlink" title="加密解密算法选择"></a>加密解密算法选择</h2><p><img src="/images/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86.png" alt="密码学-加密解密"><br>from <a href="https://bitcoin-on-nodejs.ebookchain.org/4-%E5%BC%80%E5%8F%91%E5%AE%9E%E8%B7%B5/0-%E5%8A%A0%E5%AF%86%E4%B8%8E%E8%A7%A3%E5%AF%86/3-%E4%B8%89%E5%BC%A0%E5%9B%BE%E8%AE%A9%E4%BD%A0%E5%85%A8%E9%9D%A2%E6%8E%8C%E6%8F%A1%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86%E6%8A%80%E6%9C%AF.html" target="_blank" rel="noopener">bitcoin-on-nodejs 4-开发实践/0-加密与解密/3-三张图让你全面掌握加密解密技术 </a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2020/07/28/cryptography/%E7%8E%B0%E4%BB%A3%E5%AF%86%E7%A0%81%E5%AD%A6%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97/" data-id="ckdk0gkt9006bjo261ccb5c4v" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-archlinux/Archlinux-磁盘空间清理-free-disk-space" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/17/archlinux/Archlinux-%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E6%B8%85%E7%90%86-free-disk-space/" class="article-date">
  <time datetime="2020-07-16T16:37:53.000Z" itemprop="datePublished">2020-07-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/17/archlinux/Archlinux-%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E6%B8%85%E7%90%86-free-disk-space/">Archlinux 磁盘空间清理 free disk space</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># Archlinux 磁盘空间清理 free disk space</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># show all disk space</span><br><span class="line">df -h</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># list dir space size</span><br><span class="line"># https:&#x2F;&#x2F;bbs.archlinux.org&#x2F;viewtopic.php?id&#x3D;123224</span><br><span class="line">du -md1 &#x2F; | sort -n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># clean pacman cache</span><br><span class="line"># &#x2F;var&#x2F;cache&#x2F;pacman</span><br><span class="line">pacman -Scc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># clean journal cache</span><br><span class="line"># &#x2F;var&#x2F;cache&#x2F;journal</span><br><span class="line"># https:&#x2F;&#x2F;wiki.archlinux.org&#x2F;index.php&#x2F;Systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)&#x2F;Journal_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)</span><br><span class="line">journalctl --disk-usage</span><br><span class="line">journalctl --verify</span><br><span class="line"></span><br><span class="line">journalctl --vacuum-time&#x3D;2weeks</span><br><span class="line">journalctl --vacuum-time&#x3D;2d</span><br><span class="line">journalctl --vacuum-size&#x3D;100M</span><br></pre></td></tr></table></figure>






      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2020/07/17/archlinux/Archlinux-%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E6%B8%85%E7%90%86-free-disk-space/" data-id="ckdk0gksz0058jo267ccvclnb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-长寿个人网站构建思路" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/26/%E9%95%BF%E5%AF%BF%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99%E6%9E%84%E5%BB%BA%E6%80%9D%E8%B7%AF/" class="article-date">
  <time datetime="2020-06-25T16:40:52.000Z" itemprop="datePublished">2020-06-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%A4%87%E5%BF%98/">备忘</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/26/%E9%95%BF%E5%AF%BF%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99%E6%9E%84%E5%BB%BA%E6%80%9D%E8%B7%AF/">长寿个人网站构建思路</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://www.yini.org/" target="_blank" rel="noopener">http://www.yini.org/</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">这个比QQ空间还古老的网站 是多少女孩的精神家园？</span><br><span class="line">https:&#x2F;&#x2F;www.cnbeta.com&#x2F;articles&#x2F;tech&#x2F;994799.htm</span><br><span class="line">这个太活化石了，古老到我都不认识……</span><br><span class="line">https:&#x2F;&#x2F;t.me&#x2F;CE_Observe&#x2F;13699</span><br></pre></td></tr></table></figure>


<p>长时间的，缓慢的，逐步的，构建网站<br>逐个页面逐个页面地添加到网站上去，不需要考虑页面风格兼容问题<br>尽量不要使用某些工业化框架或商业服务，转而使用语言基本特性，考虑基础结构的可迁移性和可持续性，以尽可能延长网站的寿命</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2020/06/26/%E9%95%BF%E5%AF%BF%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99%E6%9E%84%E5%BB%BA%E6%80%9D%E8%B7%AF/" data-id="ckdk0gkro003hjo260rdy2uk2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-archlinux/netdata汇聚多个节点的监测数据到一个中心节点" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/16/archlinux/netdata%E6%B1%87%E8%81%9A%E5%A4%9A%E4%B8%AA%E8%8A%82%E7%82%B9%E7%9A%84%E7%9B%91%E6%B5%8B%E6%95%B0%E6%8D%AE%E5%88%B0%E4%B8%80%E4%B8%AA%E4%B8%AD%E5%BF%83%E8%8A%82%E7%82%B9/" class="article-date">
  <time datetime="2020-05-16T07:32:23.000Z" itemprop="datePublished">2020-05-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ArchLinux/">ArchLinux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/16/archlinux/netdata%E6%B1%87%E8%81%9A%E5%A4%9A%E4%B8%AA%E8%8A%82%E7%82%B9%E7%9A%84%E7%9B%91%E6%B5%8B%E6%95%B0%E6%8D%AE%E5%88%B0%E4%B8%80%E4%B8%AA%E4%B8%AD%E5%BF%83%E8%8A%82%E7%82%B9/">netdata汇聚多个节点的监测数据到一个中心节点</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>netdata proxy data config<br>the UUID generate from <code>uuidgen</code><br>example is : a0047db7-6088-438a-b607-7f3b3e2e15a9<br>you can enable dbengine on the center to storage all data</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># center conf</span><br><span class="line"></span><br><span class="line"># config revice data rule</span><br><span class="line"># by https:&#x2F;&#x2F;learn.netdata.cloud&#x2F;docs&#x2F;agent&#x2F;streaming&#x2F;#options-for-the-receiving-node</span><br><span class="line"># &#x2F;etc&#x2F;netdata&#x2F;stream.conf</span><br><span class="line">[a0047db7-6088-438a-b607-7f3b3e2e15a9]</span><br><span class="line">    enabled &#x3D; yes</span><br><span class="line">    default history &#x3D; 3600</span><br><span class="line">    default memory mode &#x3D; dbengine</span><br><span class="line">    health enabled by default &#x3D; auto</span><br><span class="line">    allow from &#x3D; *</span><br><span class="line"></span><br><span class="line"># enable dbengine on center</span><br><span class="line"># by https:&#x2F;&#x2F;learn.netdata.cloud&#x2F;docs&#x2F;agent&#x2F;database&#x2F;engine&#x2F;#configuration</span><br><span class="line"># &#x2F;etc&#x2F;netdata&#x2F;netdata.conf</span><br><span class="line">[global]</span><br><span class="line">    memory mode &#x3D; dbengine</span><br><span class="line">    page cache size &#x3D; 32</span><br><span class="line">    dbengine disk space &#x3D; 256</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># node conf</span><br><span class="line"># by https:&#x2F;&#x2F;learn.netdata.cloud&#x2F;docs&#x2F;agent&#x2F;streaming&#x2F;#options-for-the-sending-node</span><br><span class="line"># &#x2F;etc&#x2F;netdata&#x2F;stream.conf</span><br><span class="line">[stream]</span><br><span class="line">    enabled &#x3D; yes</span><br><span class="line">    destination &#x3D; 192.168.137.164:19999</span><br><span class="line">    api key &#x3D; a0047db7-6088-438a-b607-7f3b3e2e15a9</span><br></pre></td></tr></table></figure>

<hr>
<p>出现节点数量始终不能超过某一数值，例如slave节点数量始终不能超过4个的现象时，可能是因为文件打开句柄数受限了</p>
<p>可以使用以下方法在systemd配置文件中扩大句柄数限制</p>
<p><code>systemctl edit netdata</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Service]</span><br><span class="line">LimitNOFILE&#x3D;65536</span><br></pre></td></tr></table></figure>



      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2020/05/16/archlinux/netdata%E6%B1%87%E8%81%9A%E5%A4%9A%E4%B8%AA%E8%8A%82%E7%82%B9%E7%9A%84%E7%9B%91%E6%B5%8B%E6%95%B0%E6%8D%AE%E5%88%B0%E4%B8%80%E4%B8%AA%E4%B8%AD%E5%BF%83%E8%8A%82%E7%82%B9/" data-id="ckdk0gkt70063jo2642m7a78x" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-memo/2020-05-11" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/11/memo/2020-05-11/" class="article-date">
  <time datetime="2020-05-11T05:45:00.000Z" itemprop="datePublished">2020-05-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/memo/">memo</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/11/memo/2020-05-11/">时代变啦</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>时代变啦</p>
<hr>
<p>前有<a href="http://blog.jeremie.moe/2020/05/11/DOS%E6%89%B9%E5%A4%84%E7%90%86%E9%AB%98%E7%BA%A7%E6%95%99%E7%A8%8B/" target="_blank" rel="noopener">“DOS批处理高级教程”</a><br>现有<a href="https://missing.csail.mit.edu/" target="_blank" rel="noopener">“The Missing Semester of Your CS Education”</a></p>
<p>时代在变化…</p>
<p>过去的困难的事情 都随着时间的不断前进 不断地被新出现的工具 所简化。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2020/05/11/memo/2020-05-11/" data-id="ckdk0gktb006hjo26gjll6ozy" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-DOS批处理高级教程" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/11/DOS%E6%89%B9%E5%A4%84%E7%90%86%E9%AB%98%E7%BA%A7%E6%95%99%E7%A8%8B/" class="article-date">
  <time datetime="2020-05-11T05:44:51.000Z" itemprop="datePublished">2020-05-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/11/DOS%E6%89%B9%E5%A4%84%E7%90%86%E9%AB%98%E7%BA%A7%E6%95%99%E7%A8%8B/">DOS批处理高级教程</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br><span class="line">1628</span><br><span class="line">1629</span><br><span class="line">1630</span><br><span class="line">1631</span><br><span class="line">1632</span><br><span class="line">1633</span><br><span class="line">1634</span><br><span class="line">1635</span><br><span class="line">1636</span><br><span class="line">1637</span><br><span class="line">1638</span><br><span class="line">1639</span><br><span class="line">1640</span><br><span class="line">1641</span><br><span class="line">1642</span><br><span class="line">1643</span><br><span class="line">1644</span><br><span class="line">1645</span><br><span class="line">1646</span><br><span class="line">1647</span><br><span class="line">1648</span><br><span class="line">1649</span><br><span class="line">1650</span><br><span class="line">1651</span><br><span class="line">1652</span><br><span class="line">1653</span><br><span class="line">1654</span><br><span class="line">1655</span><br><span class="line">1656</span><br><span class="line">1657</span><br><span class="line">1658</span><br><span class="line">1659</span><br><span class="line">1660</span><br><span class="line">1661</span><br><span class="line">1662</span><br><span class="line">1663</span><br><span class="line">1664</span><br><span class="line">1665</span><br><span class="line">1666</span><br><span class="line">1667</span><br><span class="line">1668</span><br><span class="line">1669</span><br><span class="line">1670</span><br><span class="line">1671</span><br><span class="line">1672</span><br><span class="line">1673</span><br><span class="line">1674</span><br><span class="line">1675</span><br><span class="line">1676</span><br><span class="line">1677</span><br><span class="line">1678</span><br><span class="line">1679</span><br><span class="line">1680</span><br><span class="line">1681</span><br><span class="line">1682</span><br><span class="line">1683</span><br><span class="line">1684</span><br><span class="line">1685</span><br><span class="line">1686</span><br><span class="line">1687</span><br><span class="line">1688</span><br><span class="line">1689</span><br><span class="line">1690</span><br><span class="line">1691</span><br><span class="line">1692</span><br><span class="line">1693</span><br><span class="line">1694</span><br><span class="line">1695</span><br><span class="line">1696</span><br><span class="line">1697</span><br><span class="line">1698</span><br><span class="line">1699</span><br><span class="line">1700</span><br><span class="line">1701</span><br><span class="line">1702</span><br><span class="line">1703</span><br><span class="line">1704</span><br><span class="line">1705</span><br><span class="line">1706</span><br><span class="line">1707</span><br><span class="line">1708</span><br><span class="line">1709</span><br><span class="line">1710</span><br><span class="line">1711</span><br><span class="line">1712</span><br><span class="line">1713</span><br><span class="line">1714</span><br><span class="line">1715</span><br><span class="line">1716</span><br><span class="line">1717</span><br><span class="line">1718</span><br><span class="line">1719</span><br><span class="line">1720</span><br><span class="line">1721</span><br><span class="line">1722</span><br><span class="line">1723</span><br><span class="line">1724</span><br><span class="line">1725</span><br><span class="line">1726</span><br><span class="line">1727</span><br><span class="line">1728</span><br><span class="line">1729</span><br><span class="line">1730</span><br><span class="line">1731</span><br><span class="line">1732</span><br><span class="line">1733</span><br><span class="line">1734</span><br><span class="line">1735</span><br><span class="line">1736</span><br><span class="line">1737</span><br><span class="line">1738</span><br><span class="line">1739</span><br><span class="line">1740</span><br><span class="line">1741</span><br><span class="line">1742</span><br><span class="line">1743</span><br><span class="line">1744</span><br><span class="line">1745</span><br><span class="line">1746</span><br><span class="line">1747</span><br><span class="line">1748</span><br><span class="line">1749</span><br><span class="line">1750</span><br><span class="line">1751</span><br><span class="line">1752</span><br><span class="line">1753</span><br><span class="line">1754</span><br><span class="line">1755</span><br><span class="line">1756</span><br><span class="line">1757</span><br><span class="line">1758</span><br><span class="line">1759</span><br><span class="line">1760</span><br><span class="line">1761</span><br><span class="line">1762</span><br><span class="line">1763</span><br><span class="line">1764</span><br><span class="line">1765</span><br><span class="line">1766</span><br><span class="line">1767</span><br><span class="line">1768</span><br><span class="line">1769</span><br><span class="line">1770</span><br><span class="line">1771</span><br><span class="line">1772</span><br><span class="line">1773</span><br><span class="line">1774</span><br><span class="line">1775</span><br><span class="line">1776</span><br><span class="line">1777</span><br><span class="line">1778</span><br><span class="line">1779</span><br><span class="line">1780</span><br><span class="line">1781</span><br><span class="line">1782</span><br><span class="line">1783</span><br><span class="line">1784</span><br><span class="line">1785</span><br><span class="line">1786</span><br><span class="line">1787</span><br><span class="line">1788</span><br><span class="line">1789</span><br><span class="line">1790</span><br><span class="line">1791</span><br><span class="line">1792</span><br><span class="line">1793</span><br><span class="line">1794</span><br><span class="line">1795</span><br><span class="line">1796</span><br><span class="line">1797</span><br><span class="line">1798</span><br><span class="line">1799</span><br><span class="line">1800</span><br><span class="line">1801</span><br><span class="line">1802</span><br><span class="line">1803</span><br><span class="line">1804</span><br><span class="line">1805</span><br><span class="line">1806</span><br><span class="line">1807</span><br><span class="line">1808</span><br><span class="line">1809</span><br><span class="line">1810</span><br><span class="line">1811</span><br><span class="line">1812</span><br><span class="line">1813</span><br><span class="line">1814</span><br><span class="line">1815</span><br><span class="line">1816</span><br><span class="line">1817</span><br><span class="line">1818</span><br><span class="line">1819</span><br><span class="line">1820</span><br><span class="line">1821</span><br><span class="line">1822</span><br><span class="line">1823</span><br><span class="line">1824</span><br><span class="line">1825</span><br><span class="line">1826</span><br><span class="line">1827</span><br><span class="line">1828</span><br><span class="line">1829</span><br><span class="line">1830</span><br><span class="line">1831</span><br><span class="line">1832</span><br><span class="line">1833</span><br><span class="line">1834</span><br><span class="line">1835</span><br><span class="line">1836</span><br><span class="line">1837</span><br><span class="line">1838</span><br><span class="line">1839</span><br><span class="line">1840</span><br><span class="line">1841</span><br><span class="line">1842</span><br><span class="line">1843</span><br><span class="line">1844</span><br><span class="line">1845</span><br><span class="line">1846</span><br><span class="line">1847</span><br><span class="line">1848</span><br><span class="line">1849</span><br><span class="line">1850</span><br><span class="line">1851</span><br><span class="line">1852</span><br><span class="line">1853</span><br><span class="line">1854</span><br><span class="line">1855</span><br><span class="line">1856</span><br><span class="line">1857</span><br><span class="line">1858</span><br><span class="line">1859</span><br><span class="line">1860</span><br><span class="line">1861</span><br><span class="line">1862</span><br><span class="line">1863</span><br><span class="line">1864</span><br><span class="line">1865</span><br><span class="line">1866</span><br><span class="line">1867</span><br><span class="line">1868</span><br><span class="line">1869</span><br><span class="line">1870</span><br><span class="line">1871</span><br><span class="line">1872</span><br><span class="line">1873</span><br><span class="line">1874</span><br><span class="line">1875</span><br><span class="line">1876</span><br><span class="line">1877</span><br><span class="line">1878</span><br><span class="line">1879</span><br><span class="line">1880</span><br><span class="line">1881</span><br><span class="line">1882</span><br><span class="line">1883</span><br><span class="line">1884</span><br><span class="line">1885</span><br><span class="line">1886</span><br><span class="line">1887</span><br><span class="line">1888</span><br><span class="line">1889</span><br><span class="line">1890</span><br><span class="line">1891</span><br><span class="line">1892</span><br><span class="line">1893</span><br><span class="line">1894</span><br><span class="line">1895</span><br><span class="line">1896</span><br><span class="line">1897</span><br><span class="line">1898</span><br><span class="line">1899</span><br><span class="line">1900</span><br><span class="line">1901</span><br><span class="line">1902</span><br><span class="line">1903</span><br><span class="line">1904</span><br><span class="line">1905</span><br><span class="line">1906</span><br><span class="line">1907</span><br><span class="line">1908</span><br><span class="line">1909</span><br><span class="line">1910</span><br><span class="line">1911</span><br><span class="line">1912</span><br><span class="line">1913</span><br><span class="line">1914</span><br><span class="line">1915</span><br><span class="line">1916</span><br><span class="line">1917</span><br><span class="line">1918</span><br><span class="line">1919</span><br><span class="line">1920</span><br><span class="line">1921</span><br><span class="line">1922</span><br><span class="line">1923</span><br><span class="line">1924</span><br><span class="line">1925</span><br><span class="line">1926</span><br><span class="line">1927</span><br><span class="line">1928</span><br><span class="line">1929</span><br><span class="line">1930</span><br><span class="line">1931</span><br><span class="line">1932</span><br><span class="line">1933</span><br><span class="line">1934</span><br><span class="line">1935</span><br><span class="line">1936</span><br><span class="line">1937</span><br><span class="line">1938</span><br><span class="line">1939</span><br><span class="line">1940</span><br><span class="line">1941</span><br><span class="line">1942</span><br><span class="line">1943</span><br><span class="line">1944</span><br><span class="line">1945</span><br><span class="line">1946</span><br><span class="line">1947</span><br><span class="line">1948</span><br><span class="line">1949</span><br><span class="line">1950</span><br><span class="line">1951</span><br><span class="line">1952</span><br><span class="line">1953</span><br><span class="line">1954</span><br><span class="line">1955</span><br><span class="line">1956</span><br><span class="line">1957</span><br><span class="line">1958</span><br><span class="line">1959</span><br><span class="line">1960</span><br><span class="line">1961</span><br><span class="line">1962</span><br><span class="line">1963</span><br><span class="line">1964</span><br><span class="line">1965</span><br><span class="line">1966</span><br><span class="line">1967</span><br><span class="line">1968</span><br><span class="line">1969</span><br><span class="line">1970</span><br><span class="line">1971</span><br><span class="line">1972</span><br><span class="line">1973</span><br><span class="line">1974</span><br><span class="line">1975</span><br><span class="line">1976</span><br><span class="line">1977</span><br><span class="line">1978</span><br><span class="line">1979</span><br><span class="line">1980</span><br><span class="line">1981</span><br><span class="line">1982</span><br><span class="line">1983</span><br><span class="line">1984</span><br><span class="line">1985</span><br><span class="line">1986</span><br><span class="line">1987</span><br><span class="line">1988</span><br><span class="line">1989</span><br><span class="line">1990</span><br><span class="line">1991</span><br><span class="line">1992</span><br><span class="line">1993</span><br><span class="line">1994</span><br><span class="line">1995</span><br><span class="line">1996</span><br><span class="line">1997</span><br><span class="line">1998</span><br><span class="line">1999</span><br><span class="line">2000</span><br><span class="line">2001</span><br><span class="line">2002</span><br><span class="line">2003</span><br><span class="line">2004</span><br><span class="line">2005</span><br><span class="line">2006</span><br><span class="line">2007</span><br><span class="line">2008</span><br><span class="line">2009</span><br><span class="line">2010</span><br><span class="line">2011</span><br><span class="line">2012</span><br><span class="line">2013</span><br><span class="line">2014</span><br><span class="line">2015</span><br><span class="line">2016</span><br><span class="line">2017</span><br><span class="line">2018</span><br><span class="line">2019</span><br><span class="line">2020</span><br><span class="line">2021</span><br><span class="line">2022</span><br><span class="line">2023</span><br><span class="line">2024</span><br><span class="line">2025</span><br><span class="line">2026</span><br><span class="line">2027</span><br><span class="line">2028</span><br><span class="line">2029</span><br><span class="line">2030</span><br><span class="line">2031</span><br><span class="line">2032</span><br><span class="line">2033</span><br><span class="line">2034</span><br><span class="line">2035</span><br><span class="line">2036</span><br><span class="line">2037</span><br><span class="line">2038</span><br><span class="line">2039</span><br><span class="line">2040</span><br><span class="line">2041</span><br><span class="line">2042</span><br><span class="line">2043</span><br><span class="line">2044</span><br><span class="line">2045</span><br><span class="line">2046</span><br><span class="line">2047</span><br><span class="line">2048</span><br><span class="line">2049</span><br><span class="line">2050</span><br><span class="line">2051</span><br><span class="line">2052</span><br><span class="line">2053</span><br><span class="line">2054</span><br><span class="line">2055</span><br><span class="line">2056</span><br><span class="line">2057</span><br><span class="line">2058</span><br><span class="line">2059</span><br><span class="line">2060</span><br><span class="line">2061</span><br><span class="line">2062</span><br><span class="line">2063</span><br><span class="line">2064</span><br><span class="line">2065</span><br><span class="line">2066</span><br><span class="line">2067</span><br><span class="line">2068</span><br><span class="line">2069</span><br><span class="line">2070</span><br><span class="line">2071</span><br><span class="line">2072</span><br><span class="line">2073</span><br><span class="line">2074</span><br><span class="line">2075</span><br><span class="line">2076</span><br><span class="line">2077</span><br><span class="line">2078</span><br><span class="line">2079</span><br><span class="line">2080</span><br><span class="line">2081</span><br><span class="line">2082</span><br><span class="line">2083</span><br><span class="line">2084</span><br><span class="line">2085</span><br><span class="line">2086</span><br><span class="line">2087</span><br><span class="line">2088</span><br><span class="line">2089</span><br><span class="line">2090</span><br><span class="line">2091</span><br><span class="line">2092</span><br><span class="line">2093</span><br><span class="line">2094</span><br><span class="line">2095</span><br><span class="line">2096</span><br><span class="line">2097</span><br><span class="line">2098</span><br><span class="line">2099</span><br><span class="line">2100</span><br><span class="line">2101</span><br><span class="line">2102</span><br><span class="line">2103</span><br><span class="line">2104</span><br><span class="line">2105</span><br><span class="line">2106</span><br><span class="line">2107</span><br><span class="line">2108</span><br><span class="line">2109</span><br><span class="line">2110</span><br><span class="line">2111</span><br><span class="line">2112</span><br><span class="line">2113</span><br><span class="line">2114</span><br><span class="line">2115</span><br><span class="line">2116</span><br><span class="line">2117</span><br><span class="line">2118</span><br><span class="line">2119</span><br><span class="line">2120</span><br><span class="line">2121</span><br><span class="line">2122</span><br><span class="line">2123</span><br><span class="line">2124</span><br><span class="line">2125</span><br><span class="line">2126</span><br><span class="line">2127</span><br><span class="line">2128</span><br><span class="line">2129</span><br><span class="line">2130</span><br><span class="line">2131</span><br><span class="line">2132</span><br><span class="line">2133</span><br><span class="line">2134</span><br><span class="line">2135</span><br><span class="line">2136</span><br><span class="line">2137</span><br><span class="line">2138</span><br><span class="line">2139</span><br><span class="line">2140</span><br><span class="line">2141</span><br><span class="line">2142</span><br><span class="line">2143</span><br><span class="line">2144</span><br><span class="line">2145</span><br><span class="line">2146</span><br><span class="line">2147</span><br><span class="line">2148</span><br><span class="line">2149</span><br><span class="line">2150</span><br><span class="line">2151</span><br><span class="line">2152</span><br><span class="line">2153</span><br><span class="line">2154</span><br><span class="line">2155</span><br><span class="line">2156</span><br><span class="line">2157</span><br><span class="line">2158</span><br><span class="line">2159</span><br><span class="line">2160</span><br><span class="line">2161</span><br><span class="line">2162</span><br><span class="line">2163</span><br><span class="line">2164</span><br><span class="line">2165</span><br><span class="line">2166</span><br><span class="line">2167</span><br><span class="line">2168</span><br><span class="line">2169</span><br><span class="line">2170</span><br><span class="line">2171</span><br><span class="line">2172</span><br><span class="line">2173</span><br><span class="line">2174</span><br><span class="line">2175</span><br><span class="line">2176</span><br><span class="line">2177</span><br><span class="line">2178</span><br><span class="line">2179</span><br><span class="line">2180</span><br><span class="line">2181</span><br><span class="line">2182</span><br><span class="line">2183</span><br><span class="line">2184</span><br><span class="line">2185</span><br><span class="line">2186</span><br><span class="line">2187</span><br><span class="line">2188</span><br><span class="line">2189</span><br><span class="line">2190</span><br><span class="line">2191</span><br><span class="line">2192</span><br><span class="line">2193</span><br><span class="line">2194</span><br><span class="line">2195</span><br><span class="line">2196</span><br><span class="line">2197</span><br><span class="line">2198</span><br><span class="line">2199</span><br><span class="line">2200</span><br><span class="line">2201</span><br><span class="line">2202</span><br><span class="line">2203</span><br><span class="line">2204</span><br><span class="line">2205</span><br><span class="line">2206</span><br><span class="line">2207</span><br><span class="line">2208</span><br><span class="line">2209</span><br><span class="line">2210</span><br><span class="line">2211</span><br><span class="line">2212</span><br><span class="line">2213</span><br><span class="line">2214</span><br><span class="line">2215</span><br><span class="line">2216</span><br><span class="line">2217</span><br><span class="line">2218</span><br><span class="line">2219</span><br><span class="line">2220</span><br><span class="line">2221</span><br><span class="line">2222</span><br><span class="line">2223</span><br><span class="line">2224</span><br><span class="line">2225</span><br><span class="line">2226</span><br><span class="line">2227</span><br><span class="line">2228</span><br><span class="line">2229</span><br><span class="line">2230</span><br><span class="line">2231</span><br><span class="line">2232</span><br><span class="line">2233</span><br><span class="line">2234</span><br><span class="line">2235</span><br><span class="line">2236</span><br><span class="line">2237</span><br><span class="line">2238</span><br><span class="line">2239</span><br><span class="line">2240</span><br><span class="line">2241</span><br><span class="line">2242</span><br><span class="line">2243</span><br><span class="line">2244</span><br><span class="line">2245</span><br><span class="line">2246</span><br><span class="line">2247</span><br><span class="line">2248</span><br><span class="line">2249</span><br><span class="line">2250</span><br><span class="line">2251</span><br><span class="line">2252</span><br><span class="line">2253</span><br><span class="line">2254</span><br><span class="line">2255</span><br><span class="line">2256</span><br><span class="line">2257</span><br><span class="line">2258</span><br><span class="line">2259</span><br><span class="line">2260</span><br><span class="line">2261</span><br><span class="line">2262</span><br><span class="line">2263</span><br><span class="line">2264</span><br><span class="line">2265</span><br><span class="line">2266</span><br><span class="line">2267</span><br><span class="line">2268</span><br><span class="line">2269</span><br><span class="line">2270</span><br><span class="line">2271</span><br><span class="line">2272</span><br><span class="line">2273</span><br><span class="line">2274</span><br><span class="line">2275</span><br><span class="line">2276</span><br><span class="line">2277</span><br><span class="line">2278</span><br><span class="line">2279</span><br><span class="line">2280</span><br><span class="line">2281</span><br><span class="line">2282</span><br><span class="line">2283</span><br><span class="line">2284</span><br><span class="line">2285</span><br><span class="line">2286</span><br><span class="line">2287</span><br><span class="line">2288</span><br><span class="line">2289</span><br><span class="line">2290</span><br><span class="line">2291</span><br><span class="line">2292</span><br><span class="line">2293</span><br><span class="line">2294</span><br><span class="line">2295</span><br><span class="line">2296</span><br><span class="line">2297</span><br><span class="line">2298</span><br><span class="line">2299</span><br><span class="line">2300</span><br><span class="line">2301</span><br><span class="line">2302</span><br><span class="line">2303</span><br><span class="line">2304</span><br><span class="line">2305</span><br><span class="line">2306</span><br><span class="line">2307</span><br><span class="line">2308</span><br><span class="line">2309</span><br><span class="line">2310</span><br><span class="line">2311</span><br><span class="line">2312</span><br><span class="line">2313</span><br><span class="line">2314</span><br><span class="line">2315</span><br><span class="line">2316</span><br><span class="line">2317</span><br><span class="line">2318</span><br><span class="line">2319</span><br><span class="line">2320</span><br><span class="line">2321</span><br><span class="line">2322</span><br><span class="line">2323</span><br><span class="line">2324</span><br><span class="line">2325</span><br><span class="line">2326</span><br><span class="line">2327</span><br><span class="line">2328</span><br><span class="line">2329</span><br><span class="line">2330</span><br><span class="line">2331</span><br><span class="line">2332</span><br><span class="line">2333</span><br><span class="line">2334</span><br><span class="line">2335</span><br><span class="line">2336</span><br><span class="line">2337</span><br><span class="line">2338</span><br><span class="line">2339</span><br><span class="line">2340</span><br><span class="line">2341</span><br><span class="line">2342</span><br><span class="line">2343</span><br><span class="line">2344</span><br><span class="line">2345</span><br><span class="line">2346</span><br><span class="line">2347</span><br><span class="line">2348</span><br><span class="line">2349</span><br><span class="line">2350</span><br><span class="line">2351</span><br><span class="line">2352</span><br><span class="line">2353</span><br><span class="line">2354</span><br><span class="line">2355</span><br><span class="line">2356</span><br><span class="line">2357</span><br><span class="line">2358</span><br><span class="line">2359</span><br><span class="line">2360</span><br><span class="line">2361</span><br><span class="line">2362</span><br><span class="line">2363</span><br><span class="line">2364</span><br><span class="line">2365</span><br><span class="line">2366</span><br><span class="line">2367</span><br><span class="line">2368</span><br><span class="line">2369</span><br><span class="line">2370</span><br><span class="line">2371</span><br><span class="line">2372</span><br><span class="line">2373</span><br><span class="line">2374</span><br><span class="line">2375</span><br><span class="line">2376</span><br><span class="line">2377</span><br><span class="line">2378</span><br><span class="line">2379</span><br><span class="line">2380</span><br><span class="line">2381</span><br><span class="line">2382</span><br><span class="line">2383</span><br><span class="line">2384</span><br><span class="line">2385</span><br><span class="line">2386</span><br><span class="line">2387</span><br><span class="line">2388</span><br><span class="line">2389</span><br><span class="line">2390</span><br><span class="line">2391</span><br><span class="line">2392</span><br><span class="line">2393</span><br><span class="line">2394</span><br><span class="line">2395</span><br><span class="line">2396</span><br><span class="line">2397</span><br><span class="line">2398</span><br><span class="line">2399</span><br><span class="line">2400</span><br><span class="line">2401</span><br><span class="line">2402</span><br><span class="line">2403</span><br><span class="line">2404</span><br><span class="line">2405</span><br><span class="line">2406</span><br><span class="line">2407</span><br><span class="line">2408</span><br><span class="line">2409</span><br><span class="line">2410</span><br><span class="line">2411</span><br><span class="line">2412</span><br><span class="line">2413</span><br><span class="line">2414</span><br><span class="line">2415</span><br><span class="line">2416</span><br><span class="line">2417</span><br><span class="line">2418</span><br><span class="line">2419</span><br><span class="line">2420</span><br><span class="line">2421</span><br><span class="line">2422</span><br><span class="line">2423</span><br><span class="line">2424</span><br><span class="line">2425</span><br><span class="line">2426</span><br><span class="line">2427</span><br><span class="line">2428</span><br><span class="line">2429</span><br><span class="line">2430</span><br><span class="line">2431</span><br><span class="line">2432</span><br><span class="line">2433</span><br><span class="line">2434</span><br><span class="line">2435</span><br><span class="line">2436</span><br><span class="line">2437</span><br><span class="line">2438</span><br><span class="line">2439</span><br><span class="line">2440</span><br><span class="line">2441</span><br><span class="line">2442</span><br><span class="line">2443</span><br><span class="line">2444</span><br><span class="line">2445</span><br><span class="line">2446</span><br><span class="line">2447</span><br><span class="line">2448</span><br><span class="line">2449</span><br><span class="line">2450</span><br><span class="line">2451</span><br><span class="line">2452</span><br><span class="line">2453</span><br><span class="line">2454</span><br><span class="line">2455</span><br><span class="line">2456</span><br><span class="line">2457</span><br><span class="line">2458</span><br><span class="line">2459</span><br><span class="line">2460</span><br><span class="line">2461</span><br><span class="line">2462</span><br><span class="line">2463</span><br><span class="line">2464</span><br><span class="line">2465</span><br><span class="line">2466</span><br><span class="line">2467</span><br><span class="line">2468</span><br><span class="line">2469</span><br><span class="line">2470</span><br><span class="line">2471</span><br><span class="line">2472</span><br><span class="line">2473</span><br><span class="line">2474</span><br><span class="line">2475</span><br><span class="line">2476</span><br><span class="line">2477</span><br><span class="line">2478</span><br><span class="line">2479</span><br><span class="line">2480</span><br><span class="line">2481</span><br><span class="line">2482</span><br><span class="line">2483</span><br><span class="line">2484</span><br><span class="line">2485</span><br><span class="line">2486</span><br><span class="line">2487</span><br><span class="line">2488</span><br><span class="line">2489</span><br><span class="line">2490</span><br><span class="line">2491</span><br><span class="line">2492</span><br><span class="line">2493</span><br><span class="line">2494</span><br><span class="line">2495</span><br><span class="line">2496</span><br><span class="line">2497</span><br><span class="line">2498</span><br><span class="line">2499</span><br><span class="line">2500</span><br><span class="line">2501</span><br><span class="line">2502</span><br><span class="line">2503</span><br><span class="line">2504</span><br><span class="line">2505</span><br><span class="line">2506</span><br><span class="line">2507</span><br><span class="line">2508</span><br><span class="line">2509</span><br><span class="line">2510</span><br><span class="line">2511</span><br><span class="line">2512</span><br><span class="line">2513</span><br><span class="line">2514</span><br><span class="line">2515</span><br><span class="line">2516</span><br><span class="line">2517</span><br><span class="line">2518</span><br><span class="line">2519</span><br><span class="line">2520</span><br><span class="line">2521</span><br><span class="line">2522</span><br><span class="line">2523</span><br><span class="line">2524</span><br><span class="line">2525</span><br><span class="line">2526</span><br><span class="line">2527</span><br><span class="line">2528</span><br><span class="line">2529</span><br><span class="line">2530</span><br><span class="line">2531</span><br><span class="line">2532</span><br><span class="line">2533</span><br><span class="line">2534</span><br><span class="line">2535</span><br><span class="line">2536</span><br><span class="line">2537</span><br><span class="line">2538</span><br><span class="line">2539</span><br><span class="line">2540</span><br><span class="line">2541</span><br><span class="line">2542</span><br><span class="line">2543</span><br><span class="line">2544</span><br><span class="line">2545</span><br><span class="line">2546</span><br><span class="line">2547</span><br><span class="line">2548</span><br><span class="line">2549</span><br><span class="line">2550</span><br><span class="line">2551</span><br><span class="line">2552</span><br><span class="line">2553</span><br><span class="line">2554</span><br><span class="line">2555</span><br><span class="line">2556</span><br><span class="line">2557</span><br><span class="line">2558</span><br><span class="line">2559</span><br><span class="line">2560</span><br><span class="line">2561</span><br><span class="line">2562</span><br><span class="line">2563</span><br><span class="line">2564</span><br><span class="line">2565</span><br><span class="line">2566</span><br><span class="line">2567</span><br><span class="line">2568</span><br><span class="line">2569</span><br><span class="line">2570</span><br><span class="line">2571</span><br><span class="line">2572</span><br><span class="line">2573</span><br><span class="line">2574</span><br><span class="line">2575</span><br><span class="line">2576</span><br><span class="line">2577</span><br><span class="line">2578</span><br><span class="line">2579</span><br><span class="line">2580</span><br><span class="line">2581</span><br><span class="line">2582</span><br><span class="line">2583</span><br><span class="line">2584</span><br><span class="line">2585</span><br><span class="line">2586</span><br><span class="line">2587</span><br><span class="line">2588</span><br><span class="line">2589</span><br><span class="line">2590</span><br><span class="line">2591</span><br><span class="line">2592</span><br><span class="line">2593</span><br><span class="line">2594</span><br><span class="line">2595</span><br><span class="line">2596</span><br><span class="line">2597</span><br><span class="line">2598</span><br><span class="line">2599</span><br><span class="line">2600</span><br><span class="line">2601</span><br><span class="line">2602</span><br><span class="line">2603</span><br><span class="line">2604</span><br><span class="line">2605</span><br><span class="line">2606</span><br><span class="line">2607</span><br><span class="line">2608</span><br><span class="line">2609</span><br><span class="line">2610</span><br><span class="line">2611</span><br><span class="line">2612</span><br><span class="line">2613</span><br><span class="line">2614</span><br><span class="line">2615</span><br><span class="line">2616</span><br><span class="line">2617</span><br><span class="line">2618</span><br><span class="line">2619</span><br><span class="line">2620</span><br><span class="line">2621</span><br><span class="line">2622</span><br><span class="line">2623</span><br><span class="line">2624</span><br><span class="line">2625</span><br><span class="line">2626</span><br><span class="line">2627</span><br><span class="line">2628</span><br><span class="line">2629</span><br><span class="line">2630</span><br><span class="line">2631</span><br><span class="line">2632</span><br><span class="line">2633</span><br><span class="line">2634</span><br><span class="line">2635</span><br><span class="line">2636</span><br><span class="line">2637</span><br><span class="line">2638</span><br><span class="line">2639</span><br><span class="line">2640</span><br><span class="line">2641</span><br><span class="line">2642</span><br><span class="line">2643</span><br><span class="line">2644</span><br><span class="line">2645</span><br><span class="line">2646</span><br><span class="line">2647</span><br><span class="line">2648</span><br><span class="line">2649</span><br><span class="line">2650</span><br><span class="line">2651</span><br><span class="line">2652</span><br><span class="line">2653</span><br><span class="line">2654</span><br><span class="line">2655</span><br><span class="line">2656</span><br><span class="line">2657</span><br><span class="line">2658</span><br><span class="line">2659</span><br><span class="line">2660</span><br><span class="line">2661</span><br><span class="line">2662</span><br><span class="line">2663</span><br><span class="line">2664</span><br><span class="line">2665</span><br><span class="line">2666</span><br><span class="line">2667</span><br><span class="line">2668</span><br><span class="line">2669</span><br><span class="line">2670</span><br><span class="line">2671</span><br><span class="line">2672</span><br><span class="line">2673</span><br><span class="line">2674</span><br><span class="line">2675</span><br><span class="line">2676</span><br><span class="line">2677</span><br><span class="line">2678</span><br><span class="line">2679</span><br><span class="line">2680</span><br><span class="line">2681</span><br><span class="line">2682</span><br><span class="line">2683</span><br><span class="line">2684</span><br><span class="line">2685</span><br><span class="line">2686</span><br><span class="line">2687</span><br><span class="line">2688</span><br><span class="line">2689</span><br><span class="line">2690</span><br><span class="line">2691</span><br><span class="line">2692</span><br><span class="line">2693</span><br><span class="line">2694</span><br><span class="line">2695</span><br><span class="line">2696</span><br><span class="line">2697</span><br><span class="line">2698</span><br><span class="line">2699</span><br><span class="line">2700</span><br><span class="line">2701</span><br><span class="line">2702</span><br><span class="line">2703</span><br><span class="line">2704</span><br><span class="line">2705</span><br><span class="line">2706</span><br><span class="line">2707</span><br><span class="line">2708</span><br><span class="line">2709</span><br><span class="line">2710</span><br><span class="line">2711</span><br><span class="line">2712</span><br><span class="line">2713</span><br><span class="line">2714</span><br><span class="line">2715</span><br><span class="line">2716</span><br><span class="line">2717</span><br><span class="line">2718</span><br><span class="line">2719</span><br><span class="line">2720</span><br><span class="line">2721</span><br><span class="line">2722</span><br><span class="line">2723</span><br><span class="line">2724</span><br><span class="line">2725</span><br><span class="line">2726</span><br><span class="line">2727</span><br><span class="line">2728</span><br><span class="line">2729</span><br><span class="line">2730</span><br><span class="line">2731</span><br><span class="line">2732</span><br><span class="line">2733</span><br><span class="line">2734</span><br><span class="line">2735</span><br><span class="line">2736</span><br><span class="line">2737</span><br><span class="line">2738</span><br><span class="line">2739</span><br><span class="line">2740</span><br><span class="line">2741</span><br><span class="line">2742</span><br><span class="line">2743</span><br><span class="line">2744</span><br><span class="line">2745</span><br><span class="line">2746</span><br><span class="line">2747</span><br><span class="line">2748</span><br><span class="line">2749</span><br><span class="line">2750</span><br><span class="line">2751</span><br><span class="line">2752</span><br><span class="line">2753</span><br><span class="line">2754</span><br><span class="line">2755</span><br><span class="line">2756</span><br><span class="line">2757</span><br><span class="line">2758</span><br><span class="line">2759</span><br><span class="line">2760</span><br><span class="line">2761</span><br><span class="line">2762</span><br><span class="line">2763</span><br><span class="line">2764</span><br><span class="line">2765</span><br><span class="line">2766</span><br><span class="line">2767</span><br><span class="line">2768</span><br><span class="line">2769</span><br><span class="line">2770</span><br><span class="line">2771</span><br><span class="line">2772</span><br><span class="line">2773</span><br><span class="line">2774</span><br><span class="line">2775</span><br><span class="line">2776</span><br><span class="line">2777</span><br><span class="line">2778</span><br><span class="line">2779</span><br><span class="line">2780</span><br><span class="line">2781</span><br><span class="line">2782</span><br><span class="line">2783</span><br><span class="line">2784</span><br><span class="line">2785</span><br><span class="line">2786</span><br><span class="line">2787</span><br><span class="line">2788</span><br><span class="line">2789</span><br><span class="line">2790</span><br><span class="line">2791</span><br><span class="line">2792</span><br><span class="line">2793</span><br><span class="line">2794</span><br><span class="line">2795</span><br><span class="line">2796</span><br><span class="line">2797</span><br><span class="line">2798</span><br><span class="line">2799</span><br><span class="line">2800</span><br><span class="line">2801</span><br><span class="line">2802</span><br><span class="line">2803</span><br><span class="line">2804</span><br><span class="line">2805</span><br><span class="line">2806</span><br><span class="line">2807</span><br><span class="line">2808</span><br><span class="line">2809</span><br><span class="line">2810</span><br><span class="line">2811</span><br><span class="line">2812</span><br><span class="line">2813</span><br><span class="line">2814</span><br><span class="line">2815</span><br><span class="line">2816</span><br><span class="line">2817</span><br><span class="line">2818</span><br><span class="line">2819</span><br><span class="line">2820</span><br><span class="line">2821</span><br><span class="line">2822</span><br><span class="line">2823</span><br><span class="line">2824</span><br><span class="line">2825</span><br><span class="line">2826</span><br><span class="line">2827</span><br><span class="line">2828</span><br><span class="line">2829</span><br><span class="line">2830</span><br><span class="line">2831</span><br><span class="line">2832</span><br><span class="line">2833</span><br><span class="line">2834</span><br><span class="line">2835</span><br><span class="line">2836</span><br><span class="line">2837</span><br><span class="line">2838</span><br><span class="line">2839</span><br><span class="line">2840</span><br><span class="line">2841</span><br><span class="line">2842</span><br><span class="line">2843</span><br><span class="line">2844</span><br><span class="line">2845</span><br><span class="line">2846</span><br><span class="line">2847</span><br><span class="line">2848</span><br><span class="line">2849</span><br><span class="line">2850</span><br><span class="line">2851</span><br><span class="line">2852</span><br><span class="line">2853</span><br><span class="line">2854</span><br><span class="line">2855</span><br><span class="line">2856</span><br><span class="line">2857</span><br><span class="line">2858</span><br><span class="line">2859</span><br><span class="line">2860</span><br><span class="line">2861</span><br><span class="line">2862</span><br><span class="line">2863</span><br><span class="line">2864</span><br><span class="line">2865</span><br><span class="line">2866</span><br><span class="line">2867</span><br><span class="line">2868</span><br><span class="line">2869</span><br><span class="line">2870</span><br><span class="line">2871</span><br><span class="line">2872</span><br><span class="line">2873</span><br><span class="line">2874</span><br><span class="line">2875</span><br><span class="line">2876</span><br><span class="line">2877</span><br><span class="line">2878</span><br><span class="line">2879</span><br><span class="line">2880</span><br><span class="line">2881</span><br><span class="line">2882</span><br><span class="line">2883</span><br><span class="line">2884</span><br><span class="line">2885</span><br><span class="line">2886</span><br><span class="line">2887</span><br><span class="line">2888</span><br><span class="line">2889</span><br><span class="line">2890</span><br><span class="line">2891</span><br><span class="line">2892</span><br><span class="line">2893</span><br><span class="line">2894</span><br><span class="line">2895</span><br><span class="line">2896</span><br><span class="line">2897</span><br><span class="line">2898</span><br><span class="line">2899</span><br><span class="line">2900</span><br><span class="line">2901</span><br><span class="line">2902</span><br><span class="line">2903</span><br><span class="line">2904</span><br><span class="line">2905</span><br><span class="line">2906</span><br><span class="line">2907</span><br><span class="line">2908</span><br><span class="line">2909</span><br><span class="line">2910</span><br><span class="line">2911</span><br><span class="line">2912</span><br><span class="line">2913</span><br><span class="line">2914</span><br><span class="line">2915</span><br><span class="line">2916</span><br><span class="line">2917</span><br><span class="line">2918</span><br><span class="line">2919</span><br><span class="line">2920</span><br><span class="line">2921</span><br><span class="line">2922</span><br><span class="line">2923</span><br><span class="line">2924</span><br><span class="line">2925</span><br><span class="line">2926</span><br><span class="line">2927</span><br><span class="line">2928</span><br><span class="line">2929</span><br><span class="line">2930</span><br><span class="line">2931</span><br><span class="line">2932</span><br><span class="line">2933</span><br><span class="line">2934</span><br><span class="line">2935</span><br><span class="line">2936</span><br><span class="line">2937</span><br><span class="line">2938</span><br><span class="line">2939</span><br><span class="line">2940</span><br><span class="line">2941</span><br><span class="line">2942</span><br><span class="line">2943</span><br><span class="line">2944</span><br><span class="line">2945</span><br><span class="line">2946</span><br><span class="line">2947</span><br><span class="line">2948</span><br><span class="line">2949</span><br><span class="line">2950</span><br><span class="line">2951</span><br><span class="line">2952</span><br><span class="line">2953</span><br><span class="line">2954</span><br><span class="line">2955</span><br><span class="line">2956</span><br><span class="line">2957</span><br><span class="line">2958</span><br><span class="line">2959</span><br><span class="line">2960</span><br><span class="line">2961</span><br><span class="line">2962</span><br><span class="line">2963</span><br><span class="line">2964</span><br><span class="line">2965</span><br><span class="line">2966</span><br><span class="line">2967</span><br><span class="line">2968</span><br><span class="line">2969</span><br><span class="line">2970</span><br><span class="line">2971</span><br><span class="line">2972</span><br><span class="line">2973</span><br><span class="line">2974</span><br><span class="line">2975</span><br><span class="line">2976</span><br><span class="line">2977</span><br><span class="line">2978</span><br><span class="line">2979</span><br><span class="line">2980</span><br><span class="line">2981</span><br><span class="line">2982</span><br><span class="line">2983</span><br><span class="line">2984</span><br><span class="line">2985</span><br><span class="line">2986</span><br><span class="line">2987</span><br><span class="line">2988</span><br><span class="line">2989</span><br><span class="line">2990</span><br><span class="line">2991</span><br><span class="line">2992</span><br><span class="line">2993</span><br><span class="line">2994</span><br><span class="line">2995</span><br><span class="line">2996</span><br><span class="line">2997</span><br><span class="line">2998</span><br><span class="line">2999</span><br><span class="line">3000</span><br><span class="line">3001</span><br><span class="line">3002</span><br><span class="line">3003</span><br><span class="line">3004</span><br><span class="line">3005</span><br><span class="line">3006</span><br><span class="line">3007</span><br><span class="line">3008</span><br><span class="line">3009</span><br><span class="line">3010</span><br><span class="line">3011</span><br><span class="line">3012</span><br><span class="line">3013</span><br><span class="line">3014</span><br><span class="line">3015</span><br><span class="line">3016</span><br><span class="line">3017</span><br><span class="line">3018</span><br><span class="line">3019</span><br><span class="line">3020</span><br><span class="line">3021</span><br><span class="line">3022</span><br><span class="line">3023</span><br><span class="line">3024</span><br><span class="line">3025</span><br><span class="line">3026</span><br><span class="line">3027</span><br><span class="line">3028</span><br><span class="line">3029</span><br><span class="line">3030</span><br><span class="line">3031</span><br><span class="line">3032</span><br><span class="line">3033</span><br><span class="line">3034</span><br><span class="line">3035</span><br><span class="line">3036</span><br><span class="line">3037</span><br><span class="line">3038</span><br><span class="line">3039</span><br><span class="line">3040</span><br><span class="line">3041</span><br><span class="line">3042</span><br><span class="line">3043</span><br><span class="line">3044</span><br><span class="line">3045</span><br><span class="line">3046</span><br><span class="line">3047</span><br><span class="line">3048</span><br><span class="line">3049</span><br><span class="line">3050</span><br><span class="line">3051</span><br><span class="line">3052</span><br><span class="line">3053</span><br><span class="line">3054</span><br><span class="line">3055</span><br><span class="line">3056</span><br><span class="line">3057</span><br><span class="line">3058</span><br><span class="line">3059</span><br><span class="line">3060</span><br><span class="line">3061</span><br><span class="line">3062</span><br><span class="line">3063</span><br><span class="line">3064</span><br><span class="line">3065</span><br><span class="line">3066</span><br><span class="line">3067</span><br><span class="line">3068</span><br><span class="line">3069</span><br><span class="line">3070</span><br><span class="line">3071</span><br><span class="line">3072</span><br><span class="line">3073</span><br><span class="line">3074</span><br><span class="line">3075</span><br><span class="line">3076</span><br><span class="line">3077</span><br><span class="line">3078</span><br><span class="line">3079</span><br><span class="line">3080</span><br><span class="line">3081</span><br><span class="line">3082</span><br><span class="line">3083</span><br><span class="line">3084</span><br><span class="line">3085</span><br><span class="line">3086</span><br><span class="line">3087</span><br><span class="line">3088</span><br><span class="line">3089</span><br><span class="line">3090</span><br><span class="line">3091</span><br><span class="line">3092</span><br><span class="line">3093</span><br><span class="line">3094</span><br><span class="line">3095</span><br><span class="line">3096</span><br><span class="line">3097</span><br><span class="line">3098</span><br><span class="line">3099</span><br><span class="line">3100</span><br><span class="line">3101</span><br><span class="line">3102</span><br><span class="line">3103</span><br><span class="line">3104</span><br><span class="line">3105</span><br><span class="line">3106</span><br><span class="line">3107</span><br><span class="line">3108</span><br><span class="line">3109</span><br><span class="line">3110</span><br><span class="line">3111</span><br><span class="line">3112</span><br><span class="line">3113</span><br><span class="line">3114</span><br><span class="line">3115</span><br><span class="line">3116</span><br><span class="line">3117</span><br><span class="line">3118</span><br><span class="line">3119</span><br><span class="line">3120</span><br><span class="line">3121</span><br><span class="line">3122</span><br><span class="line">3123</span><br><span class="line">3124</span><br><span class="line">3125</span><br><span class="line">3126</span><br><span class="line">3127</span><br><span class="line">3128</span><br><span class="line">3129</span><br><span class="line">3130</span><br><span class="line">3131</span><br><span class="line">3132</span><br><span class="line">3133</span><br><span class="line">3134</span><br><span class="line">3135</span><br><span class="line">3136</span><br><span class="line">3137</span><br><span class="line">3138</span><br><span class="line">3139</span><br><span class="line">3140</span><br><span class="line">3141</span><br><span class="line">3142</span><br><span class="line">3143</span><br><span class="line">3144</span><br><span class="line">3145</span><br><span class="line">3146</span><br><span class="line">3147</span><br><span class="line">3148</span><br><span class="line">3149</span><br><span class="line">3150</span><br><span class="line">3151</span><br><span class="line">3152</span><br><span class="line">3153</span><br><span class="line">3154</span><br><span class="line">3155</span><br><span class="line">3156</span><br><span class="line">3157</span><br><span class="line">3158</span><br><span class="line">3159</span><br><span class="line">3160</span><br><span class="line">3161</span><br><span class="line">3162</span><br><span class="line">3163</span><br><span class="line">3164</span><br><span class="line">3165</span><br><span class="line">3166</span><br><span class="line">3167</span><br><span class="line">3168</span><br><span class="line">3169</span><br><span class="line">3170</span><br><span class="line">3171</span><br><span class="line">3172</span><br><span class="line">3173</span><br><span class="line">3174</span><br><span class="line">3175</span><br><span class="line">3176</span><br><span class="line">3177</span><br><span class="line">3178</span><br><span class="line">3179</span><br><span class="line">3180</span><br><span class="line">3181</span><br><span class="line">3182</span><br><span class="line">3183</span><br><span class="line">3184</span><br><span class="line">3185</span><br><span class="line">3186</span><br><span class="line">3187</span><br><span class="line">3188</span><br><span class="line">3189</span><br><span class="line">3190</span><br><span class="line">3191</span><br><span class="line">3192</span><br><span class="line">3193</span><br><span class="line">3194</span><br><span class="line">3195</span><br><span class="line">3196</span><br><span class="line">3197</span><br><span class="line">3198</span><br><span class="line">3199</span><br><span class="line">3200</span><br><span class="line">3201</span><br><span class="line">3202</span><br><span class="line">3203</span><br><span class="line">3204</span><br><span class="line">3205</span><br><span class="line">3206</span><br><span class="line">3207</span><br><span class="line">3208</span><br><span class="line">3209</span><br><span class="line">3210</span><br><span class="line">3211</span><br><span class="line">3212</span><br><span class="line">3213</span><br><span class="line">3214</span><br><span class="line">3215</span><br><span class="line">3216</span><br><span class="line">3217</span><br><span class="line">3218</span><br><span class="line">3219</span><br><span class="line">3220</span><br><span class="line">3221</span><br><span class="line">3222</span><br><span class="line">3223</span><br><span class="line">3224</span><br><span class="line">3225</span><br><span class="line">3226</span><br><span class="line">3227</span><br><span class="line">3228</span><br><span class="line">3229</span><br><span class="line">3230</span><br><span class="line">3231</span><br><span class="line">3232</span><br><span class="line">3233</span><br><span class="line">3234</span><br><span class="line">3235</span><br><span class="line">3236</span><br><span class="line">3237</span><br><span class="line">3238</span><br><span class="line">3239</span><br><span class="line">3240</span><br><span class="line">3241</span><br><span class="line">3242</span><br><span class="line">3243</span><br><span class="line">3244</span><br><span class="line">3245</span><br><span class="line">3246</span><br><span class="line">3247</span><br><span class="line">3248</span><br><span class="line">3249</span><br><span class="line">3250</span><br><span class="line">3251</span><br><span class="line">3252</span><br><span class="line">3253</span><br><span class="line">3254</span><br><span class="line">3255</span><br><span class="line">3256</span><br><span class="line">3257</span><br><span class="line">3258</span><br><span class="line">3259</span><br><span class="line">3260</span><br><span class="line">3261</span><br><span class="line">3262</span><br><span class="line">3263</span><br><span class="line">3264</span><br><span class="line">3265</span><br><span class="line">3266</span><br><span class="line">3267</span><br><span class="line">3268</span><br><span class="line">3269</span><br><span class="line">3270</span><br><span class="line">3271</span><br><span class="line">3272</span><br><span class="line">3273</span><br><span class="line">3274</span><br><span class="line">3275</span><br><span class="line">3276</span><br><span class="line">3277</span><br><span class="line">3278</span><br><span class="line">3279</span><br><span class="line">3280</span><br><span class="line">3281</span><br><span class="line">3282</span><br><span class="line">3283</span><br><span class="line">3284</span><br><span class="line">3285</span><br><span class="line">3286</span><br><span class="line">3287</span><br><span class="line">3288</span><br><span class="line">3289</span><br><span class="line">3290</span><br><span class="line">3291</span><br><span class="line">3292</span><br><span class="line">3293</span><br><span class="line">3294</span><br><span class="line">3295</span><br><span class="line">3296</span><br><span class="line">3297</span><br><span class="line">3298</span><br><span class="line">3299</span><br><span class="line">3300</span><br><span class="line">3301</span><br><span class="line">3302</span><br><span class="line">3303</span><br><span class="line">3304</span><br><span class="line">3305</span><br><span class="line">3306</span><br><span class="line">3307</span><br><span class="line">3308</span><br><span class="line">3309</span><br><span class="line">3310</span><br><span class="line">3311</span><br><span class="line">3312</span><br><span class="line">3313</span><br><span class="line">3314</span><br><span class="line">3315</span><br><span class="line">3316</span><br><span class="line">3317</span><br><span class="line">3318</span><br><span class="line">3319</span><br><span class="line">3320</span><br><span class="line">3321</span><br><span class="line">3322</span><br><span class="line">3323</span><br><span class="line">3324</span><br><span class="line">3325</span><br><span class="line">3326</span><br><span class="line">3327</span><br><span class="line">3328</span><br><span class="line">3329</span><br><span class="line">3330</span><br><span class="line">3331</span><br><span class="line">3332</span><br><span class="line">3333</span><br><span class="line">3334</span><br><span class="line">3335</span><br><span class="line">3336</span><br><span class="line">3337</span><br><span class="line">3338</span><br><span class="line">3339</span><br><span class="line">3340</span><br><span class="line">3341</span><br><span class="line">3342</span><br><span class="line">3343</span><br><span class="line">3344</span><br><span class="line">3345</span><br><span class="line">3346</span><br><span class="line">3347</span><br><span class="line">3348</span><br><span class="line">3349</span><br><span class="line">3350</span><br><span class="line">3351</span><br><span class="line">3352</span><br><span class="line">3353</span><br><span class="line">3354</span><br><span class="line">3355</span><br><span class="line">3356</span><br><span class="line">3357</span><br><span class="line">3358</span><br><span class="line">3359</span><br><span class="line">3360</span><br><span class="line">3361</span><br><span class="line">3362</span><br><span class="line">3363</span><br><span class="line">3364</span><br><span class="line">3365</span><br><span class="line">3366</span><br><span class="line">3367</span><br><span class="line">3368</span><br><span class="line">3369</span><br><span class="line">3370</span><br><span class="line">3371</span><br><span class="line">3372</span><br><span class="line">3373</span><br><span class="line">3374</span><br><span class="line">3375</span><br><span class="line">3376</span><br><span class="line">3377</span><br><span class="line">3378</span><br><span class="line">3379</span><br><span class="line">3380</span><br><span class="line">3381</span><br><span class="line">3382</span><br><span class="line">3383</span><br><span class="line">3384</span><br><span class="line">3385</span><br><span class="line">3386</span><br><span class="line">3387</span><br><span class="line">3388</span><br><span class="line">3389</span><br><span class="line">3390</span><br><span class="line">3391</span><br><span class="line">3392</span><br><span class="line">3393</span><br><span class="line">3394</span><br><span class="line">3395</span><br><span class="line">3396</span><br><span class="line">3397</span><br><span class="line">3398</span><br><span class="line">3399</span><br><span class="line">3400</span><br><span class="line">3401</span><br><span class="line">3402</span><br><span class="line">3403</span><br><span class="line">3404</span><br><span class="line">3405</span><br><span class="line">3406</span><br><span class="line">3407</span><br><span class="line">3408</span><br><span class="line">3409</span><br><span class="line">3410</span><br><span class="line">3411</span><br><span class="line">3412</span><br><span class="line">3413</span><br><span class="line">3414</span><br><span class="line">3415</span><br><span class="line">3416</span><br><span class="line">3417</span><br><span class="line">3418</span><br><span class="line">3419</span><br><span class="line">3420</span><br><span class="line">3421</span><br><span class="line">3422</span><br><span class="line">3423</span><br><span class="line">3424</span><br><span class="line">3425</span><br><span class="line">3426</span><br><span class="line">3427</span><br><span class="line">3428</span><br><span class="line">3429</span><br><span class="line">3430</span><br><span class="line">3431</span><br><span class="line">3432</span><br><span class="line">3433</span><br><span class="line">3434</span><br><span class="line">3435</span><br><span class="line">3436</span><br><span class="line">3437</span><br><span class="line">3438</span><br><span class="line">3439</span><br><span class="line">3440</span><br><span class="line">3441</span><br><span class="line">3442</span><br><span class="line">3443</span><br><span class="line">3444</span><br><span class="line">3445</span><br><span class="line">3446</span><br><span class="line">3447</span><br><span class="line">3448</span><br><span class="line">3449</span><br><span class="line">3450</span><br><span class="line">3451</span><br><span class="line">3452</span><br><span class="line">3453</span><br><span class="line">3454</span><br><span class="line">3455</span><br><span class="line">3456</span><br><span class="line">3457</span><br><span class="line">3458</span><br><span class="line">3459</span><br><span class="line">3460</span><br><span class="line">3461</span><br><span class="line">3462</span><br><span class="line">3463</span><br><span class="line">3464</span><br><span class="line">3465</span><br><span class="line">3466</span><br><span class="line">3467</span><br><span class="line">3468</span><br><span class="line">3469</span><br><span class="line">3470</span><br><span class="line">3471</span><br><span class="line">3472</span><br><span class="line">3473</span><br><span class="line">3474</span><br><span class="line">3475</span><br><span class="line">3476</span><br><span class="line">3477</span><br><span class="line">3478</span><br><span class="line">3479</span><br><span class="line">3480</span><br><span class="line">3481</span><br><span class="line">3482</span><br><span class="line">3483</span><br><span class="line">3484</span><br><span class="line">3485</span><br><span class="line">3486</span><br><span class="line">3487</span><br><span class="line">3488</span><br><span class="line">3489</span><br><span class="line">3490</span><br><span class="line">3491</span><br><span class="line">3492</span><br><span class="line">3493</span><br><span class="line">3494</span><br><span class="line">3495</span><br><span class="line">3496</span><br><span class="line">3497</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">DOS批处理高级教程</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> 前言</span><br><span class="line"></span><br><span class="line">    本教程主要引用伤脑筋版主的系列文章，同时参考引用[英雄]教程等其他批处理教程，本文将这些文章合并在一起，并尽量修改得详细而且简单易懂，修改整理也是学习过程，主要目的是方便自己以后查阅。</span><br><span class="line">    本教程很长啊，需要一定的耐心才能看完，能够看完的话，差不多就是批处理高手了，即使不是高手也是熟手了。本教程还在不断补充之中，当有比较典型的应用技巧时，本教材会将其收入相关的章节之中。本教程适合对dos有一定基础的人慢慢学习或查阅。</span><br><span class="line">    查阅方法：复制目录中的条目，搜索即可。</span><br><span class="line">    整理者邮箱：xiangkg@163.com，如果你要全文或有好的dos使用经验，请你发email给我，谢谢！</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">目录</span><br><span class="line"></span><br><span class="line">第一章 批处理基础</span><br><span class="line">   第一节 常用批处理内部命令简介</span><br><span class="line">     1、REM 和 ::</span><br><span class="line">     2、ECHO 和 @</span><br><span class="line">     3、PAUSE 暂停</span><br><span class="line">     4、ERRORLEVEL</span><br><span class="line">     5、TITLE 设置cmd窗口的标题</span><br><span class="line">     6、COLOR 设置cmd窗口前景和背景颜色</span><br><span class="line">     7、mode 配置系统设备</span><br><span class="line">     8、GOTO 和 :</span><br><span class="line">     9、FIND 在文件中搜索字符串</span><br><span class="line">     10、START 调用外部程序并任其在新窗口自行运行</span><br><span class="line">     11、assoc 和 ftype</span><br><span class="line">     12、pushd 和 popd</span><br><span class="line">     13、CALL 调用批处理程序或命令并等待其执行完毕</span><br><span class="line">     14、shift</span><br><span class="line">     15、IF</span><br><span class="line">     16、setlocal 与 变量延迟</span><br><span class="line">     17、ATTRIB  显示或更改文件属性</span><br><span class="line">     18、findstr 在文件中搜索字符串（find增强版）</span><br><span class="line">     19、date &#x2F;t 和 time &#x2F;t</span><br><span class="line"></span><br><span class="line">   第二节 常用特殊符号</span><br><span class="line">     1、@  命令行回显屏蔽符</span><br><span class="line">     2、%  批处理变量引导符</span><br><span class="line">     3、&gt;   输出重定向符</span><br><span class="line">     4、&gt;&gt;  输出重定向符</span><br><span class="line">     5、&lt;、&gt;&amp;、&lt;&amp; 重定向符</span><br><span class="line">     6、|  命令管道符</span><br><span class="line">     7、^  转义字符</span><br><span class="line">     8、&amp;  组合命令（顺序执行）</span><br><span class="line">     9、&amp;&amp; 组合命令（前面指令成功，才执行后面指令）</span><br><span class="line">     10、||  组合命令（前面指令失败，才执行后面指令）</span><br><span class="line">     11、&quot;&quot;  字符串界定符</span><br><span class="line">     12、, 逗号</span><br><span class="line">     13、; 分号</span><br><span class="line">     14、() 括号</span><br><span class="line">     15、! 感叹号</span><br><span class="line">     16、批处理中可能会见到的其它特殊标记符: （略）</span><br><span class="line">         CR(0D) 命令行结束符 </span><br><span class="line">         Escape(1B) ANSI转义字符引导符 </span><br><span class="line">         Space(20) 常用的参数界定符 </span><br><span class="line">         Tab(09) ; &#x3D; 不常用的参数界定符 </span><br><span class="line">         + COPY命令文件连接符 </span><br><span class="line">         * ? 文件通配符 </span><br><span class="line">         &#x2F; 参数开关引导符 </span><br><span class="line">         : 批处理标签引导符</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第二章 FOR命令详解</span><br><span class="line">    一、基本格式</span><br><span class="line">    二、参数 &#x2F;d 主要搜索匹配目录</span><br><span class="line">    三、参数 &#x2F;R 搜索指定目录树中的匹配文件</span><br><span class="line">    四、参数 &#x2F;L 按数字序列(start,step,end)循环</span><br><span class="line">    五、参数 &#x2F;F 处理命令输出、字符串及文件内容</span><br><span class="line"></span><br><span class="line">第三章 FOR命令中的变量</span><br><span class="line">    一、 ~I          - 删除任何引号(&quot;)，扩展 %I</span><br><span class="line">    二、 %~fI        - 将 %I 扩展到一个完全合格的路径名</span><br><span class="line">    三、 %~dI        - 仅将 %I 扩展到一个驱动器号</span><br><span class="line">    四、 %~pI        - 仅将 %I 扩展到一个路径</span><br><span class="line">    五、 %~nI        - 仅将 %I 扩展到一个文件名</span><br><span class="line">    六、 %~xI        - 仅将 %I 扩展到一个文件扩展名</span><br><span class="line">    七、 %~sI        - 扩展的路径只含有短名</span><br><span class="line">    八、 %~aI        - 将 %I 扩展到文件的文件属性</span><br><span class="line">    九、 %~tI        - 将 %I 扩展到文件的日期&#x2F;时间</span><br><span class="line">    十、 %~zI        - 将 %I 扩展到文件的大小</span><br><span class="line">    十一、 %~$PATH:I</span><br><span class="line"></span><br><span class="line">第四章 批处理中的变量</span><br><span class="line">    一、系统变量</span><br><span class="line">    二、自定义变量</span><br><span class="line"></span><br><span class="line">第五章 set命令详解</span><br><span class="line">    一、用set命令设置自定义变量</span><br><span class="line">    二、用set命令进行简单计算</span><br><span class="line">    三、用set命令进行字符串处理</span><br><span class="line">        1、字符串替换</span><br><span class="line">        2、字符串截取</span><br><span class="line"></span><br><span class="line">第六章 if命令讲解</span><br><span class="line">    第一种用法：IF [NOT] ERRORLEVEL number command</span><br><span class="line">    第二种用法：IF [NOT] string1&#x3D;&#x3D;string2 command</span><br><span class="line">    第三种用法：IF [NOT] EXIST filename command</span><br><span class="line">    第四种用法：IF增强的用法</span><br><span class="line"></span><br><span class="line">第七章 DOS编程高级技巧</span><br><span class="line">    一、交互界面设计</span><br><span class="line">    二、if…else…条件语句</span><br><span class="line">    三、循环语句</span><br><span class="line">    四、子程序</span><br><span class="line">    五、用ftp命令实现自动下载</span><br><span class="line">    六、用7-ZIP实现命令行压缩和解压功能</span><br><span class="line">    七、调用VBScript程序</span><br><span class="line">    八、将批处理转化为可执行文件</span><br><span class="line">    九、时间延迟</span><br><span class="line">       1、利用ping命令延时</span><br><span class="line">       2、利用for命令延时</span><br><span class="line">       3、利用vbs延迟函数，精确度毫秒，误差1000毫秒内</span><br><span class="line">       4、仅用批处理命令实现任意时间延迟，精确度10毫秒，误差50毫秒内</span><br><span class="line">    十、模拟进度条</span><br><span class="line">    十一、特殊字符的输入及应用</span><br><span class="line">    十二、随机数（%random%）的应用技巧</span><br><span class="line">    十三、变量嵌套 与 命令嵌套</span><br><span class="line">    十四、文件内容筛选（type和findstr命令结合使用）</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    全文：http:&#x2F;&#x2F;xiangkg.blog.163.com</span><br><span class="line">    1、更正了所有的错别字，适当排版，增加条理性。</span><br><span class="line">    2、运行改善所有例子，并纠正了一些语法错误。</span><br><span class="line">    3、补充了一些不完全的地方。</span><br><span class="line">    4、第一章参考了网上许多教程汇编而成。</span><br><span class="line">    5、20080229补充了变量延迟的问题。</span><br><span class="line">    6、20080305修改了参数usebackq的说明</span><br><span class="line">    7、20080310增加了特殊字符的输入及应用</span><br><span class="line">    8、20080311修改了子程序部分</span><br><span class="line">    9、20080313修改了echo说明，归纳了9个应用方法</span><br><span class="line">    10、20080320增加任意时间延迟方法</span><br><span class="line">    11、20080321增加了set计算中十进制与八进制混淆问题的说明</span><br><span class="line">    12、20080325修正dos数值计算范围：-2147483648至2147483647，即-2^31～2^31-1</span><br><span class="line">    13、20080326增加随机数的应用</span><br><span class="line">    14、20080327修改了“if增强用法”中的defined语句说明</span><br><span class="line">    15、20080402增加变量嵌套与命令嵌套，重要技巧之一。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    不断学习中，不断更新中。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">第一章 批处理基础</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">批处理定义：顾名思义，批处理文件是将一系列命令按一定的顺序集合为一个可执行的文本文件，其扩展名为BAT或者CMD。这些命令统称批处理命令。</span><br><span class="line"></span><br><span class="line">小知识：可以在键盘上按下Ctrl+C组合键来强行终止一个批处理的执行过程。</span><br><span class="line"></span><br><span class="line">了解了大概意思后,我们正式开始学习.先看一个简单的例子!</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">echo &quot;欢迎来到非常BAT!&quot;</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">把上面的3条命令保存为文件test.bat或者test.cmd然后执行,</span><br><span class="line">他就会在屏幕上显示以下二行话:</span><br><span class="line"></span><br><span class="line">欢迎来到非常BAT!</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">这就是一个简单批处理文件了，这个批处理文件一共就用了2条命令 &quot;echo&quot; 和&quot;pause&quot; 还有一个特殊符号&quot;@&quot;</span><br><span class="line"></span><br><span class="line">从上面这个简单的批处理中,我们可以发现其实批处理就是运用一些含有特殊意义的符号和一些完成指定功能的命令组合而成,那么在批处理中有多少这样的特殊符号和功能命令呢？我们现在就来仔细了解一下一些最常用的!</span><br><span class="line"></span><br><span class="line">(以下内容来源网络,请各位仔细阅读,好进入下节的实例说明)</span><br><span class="line"></span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">   第一节 常用批处理内部命令简介</span><br><span class="line">     1、REM 和 ::</span><br><span class="line">     2、ECHO 和 @</span><br><span class="line">     3、PAUSE 暂停</span><br><span class="line">     4、ERRORLEVEL</span><br><span class="line">     5、TITLE 设置cmd窗口的标题</span><br><span class="line">     6、COLOR 设置cmd窗口前景和背景颜色</span><br><span class="line">     7、mode 配置系统设备</span><br><span class="line">     8、GOTO 和 :</span><br><span class="line">     9、FIND 在文件中搜索字符串</span><br><span class="line">     10、START 调用外部程序并任其在新窗口自行运行</span><br><span class="line">     11、assoc 和 ftype</span><br><span class="line">     12、pushd 和 popd</span><br><span class="line">     13、CALL 调用批处理程序或命令并等待其执行完毕</span><br><span class="line">     14、shift</span><br><span class="line">     15、IF</span><br><span class="line">     16、setlocal 与 变量延迟</span><br><span class="line">     17、ATTRIB  显示或更改文件属性</span><br><span class="line">     18、findstr 在文件中搜索字符串（find增强版）</span><br><span class="line">     19、date &#x2F;t 和 time &#x2F;t</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">介绍命令</span><br><span class="line"></span><br><span class="line">1、REM 和 ::</span><br><span class="line"></span><br><span class="line">REM为注释命令，一般用来给程序加上注解，该命令后的内容不被执行，但能回显。</span><br><span class="line"></span><br><span class="line">:: 也可以起注释作用, 而且更简洁有效; 但有两点需要注意：</span><br><span class="line"></span><br><span class="line">    ①任何以冒号:开头的字符行, 在批处理中都被视作标号, 而直接忽略其后的所有内容。而标号分为有效和无效两种。</span><br><span class="line">    有效标号：冒号后紧跟一个以字母数字开头的字符串，goto语句可以识别。</span><br><span class="line">    无效标号：冒号后紧跟一个非字母数字的一个特殊符号，goto无法识别的标号。</span><br><span class="line"></span><br><span class="line">无效可以起到注释作用，所以 :: 常被用作注释符号，其实 :+ 也可起注释作用。</span><br><span class="line"></span><br><span class="line">    ②与rem 不同的是, ::后的字符行在执行时不会回显, 无论是否用echo on打开命令行回显状态, 因为命令解释器不认为他是一个有效的命令行, 就此点来看, rem 在某些场合下将比 :: 更为适用; 另外, rem 可以用于 config.sys 文件中。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">行内注释格式：%注释内容%  （不常用，容易引起语法错误，慎用少用）</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">2、ECHO 和 @</span><br><span class="line"></span><br><span class="line">@字符放在命令前将关闭该命令回显，无论此时echo是否为打开状态。</span><br><span class="line"></span><br><span class="line">echo命令的作用列举如下：</span><br><span class="line"></span><br><span class="line">（1）打开回显或关闭回显功能</span><br><span class="line">    格式:echo [&#123; on|off &#125;]</span><br><span class="line"></span><br><span class="line">    如果想关闭“ECHO OFF”命令行自身的显示，则需要在该命令行前加上“@”。</span><br><span class="line"></span><br><span class="line">（2）显示当前ECHO设置状态</span><br><span class="line">    格式:echo</span><br><span class="line"></span><br><span class="line">（3）输出提示信息</span><br><span class="line"></span><br><span class="line">    格式：ECHO 信息内容</span><br><span class="line"></span><br><span class="line">    上述是ECHO命令常见的三种用法，也是大家熟悉和会用的，但作为DOS命令淘金者你还应该知道下面的技巧：</span><br><span class="line"></span><br><span class="line">（4）关闭DOS命令提示符 </span><br><span class="line">    在DOS提示符状态下键入ECHO OFF，能够关闭DOS提示符的显示使屏幕只留下光标，直至键入ECHO ON，提示符才会重新出现。</span><br><span class="line"></span><br><span class="line">（5）输出空行，即相当于输入一个回车</span><br><span class="line"></span><br><span class="line">    格式：ECHO．</span><br><span class="line"></span><br><span class="line">    值得注意的是命令行中的“．”要紧跟在ECHO后面中间不能有空格，否则“．”将被当作提示信息输出到屏幕。另外“．”可以用，：；”／[\]＋等任一符号替代。</span><br><span class="line"></span><br><span class="line">    命令ECHO．输出的回车，经DOS管道转向可以作为其它命令的输入，比如echo.|time即相当于在TIME命令执行后给出一个回车。所以执行时系统会在显示当前时间后，自动返回到DOS提示符状态</span><br><span class="line"></span><br><span class="line">（6）答复命令中的提问</span><br><span class="line"></span><br><span class="line">    格式：ECHO 答复语|命令文件名</span><br><span class="line"></span><br><span class="line">上述格式可以用于简化一些需要人机对话的命令（如：CHKDSK／F；FORMAT Drive:；del *.*）的操作，它是通过DOS管道命令把ECHO命令输出的预置答复语作为人机对话命令的输入。下面的例子就相当于在调用的命令出现人机对话时输入“Y”回车：</span><br><span class="line"></span><br><span class="line">     C:&gt;ECHO Y|CHKDSK&#x2F;F</span><br><span class="line"></span><br><span class="line">     C:&gt;ECHO Y|DEL A :*.*</span><br><span class="line"></span><br><span class="line">（7）建立新文件或增加文件内容</span><br><span class="line"></span><br><span class="line">格式：ECHO 文件内容&gt;文件名</span><br><span class="line">      ECHO 文件内容&gt;&gt;文件名</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line">     C:&gt;ECHO @ECHO OFF&gt;AUTOEXEC.BAT 建立自动批处理文件</span><br><span class="line">     C:&gt;ECHO C:\CPAV\BOOTSAFE&gt;&gt;AUTOEXEC.BAT 向自动批处理文件中追加内容</span><br><span class="line"></span><br><span class="line">（8）向打印机输出打印内容或打印控制码</span><br><span class="line"></span><br><span class="line">格式：ECHO 打印机控制码&gt;PRN</span><br><span class="line"></span><br><span class="line">      ECHO 打印内容&gt;PRN</span><br><span class="line"></span><br><span class="line">用得很少，了解就可以了</span><br><span class="line"></span><br><span class="line">下面的例子是向M－1724打印机输入打印控制码。＜Alt＞156是按住Alt键在小键盘键入156，类似情况依此类推：</span><br><span class="line"></span><br><span class="line">C:&gt;ECHO +156+42+116&gt;PRN（输入下划线命令FS＊t）</span><br><span class="line"></span><br><span class="line">C:&gt;ECHO PRN&quot;&gt;+155@&gt;PRN（输入初始化命令ESC@）</span><br><span class="line"></span><br><span class="line">C:&gt;ECHO.&gt;PRN（换行）</span><br><span class="line"></span><br><span class="line">（9）使喇叭鸣响</span><br><span class="line"></span><br><span class="line">C:&gt;ECHO ^G</span><br><span class="line"></span><br><span class="line">“^G”是在dos窗口中用Ctrl＋G或Alt＋007输入，输入多个^G可以产生多声鸣响。使用方法是直接将其加入批处理文件中或做成批处理文件调用。</span><br><span class="line">这里的“^G”属于特殊符号的使用，请看本文后面的章节</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">3、PAUSE 暂停</span><br><span class="line"></span><br><span class="line">   PAUSE，玩游戏的人都知道，暂停的意思</span><br><span class="line">   在这里就是停止系统命令的执行并显示下面的内容。</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">PAUSE</span><br><span class="line"></span><br><span class="line">运行显示：</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">要显示其他提示语，可以这样用：</span><br><span class="line">Echo 其他提示语 &amp; pause &gt; nul</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">4、errorlevel  程序返回码</span><br><span class="line"></span><br><span class="line">echo %errorlevel%</span><br><span class="line">每个命令运行结束，可以用这个命令行格式查看返回码</span><br><span class="line">用于判断刚才的命令是否执行成功</span><br><span class="line">默认值为0，一般命令执行出错会设 errorlevel 为1</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">5、title 设置cmd窗口的标题</span><br><span class="line">设置cmd窗口的标题，批处理编程常用。</span><br><span class="line">title 新标题        #可以看到cmd窗口的标题栏变了</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">6、COLOR 设置cmd窗口前景和背景颜色</span><br><span class="line">设置默认的控制台前景和背景颜色。批处理编程常用。</span><br><span class="line"></span><br><span class="line">COLOR [attr]</span><br><span class="line"></span><br><span class="line">  attr        指定控制台输出的颜色属性</span><br><span class="line"></span><br><span class="line">颜色属性由两个十六进制数字指定 -- 第一个为背景，第二个则为</span><br><span class="line">前景。每个数字可以为以下任何值之一:</span><br><span class="line"></span><br><span class="line">    0 &#x3D; 黑色       8 &#x3D; 灰色</span><br><span class="line">    1 &#x3D; 蓝色       9 &#x3D; 淡蓝色</span><br><span class="line">    2 &#x3D; 绿色       A &#x3D; 淡绿色</span><br><span class="line">    3 &#x3D; 湖蓝色     B &#x3D; 淡浅绿色</span><br><span class="line">    4 &#x3D; 红色       C &#x3D; 淡红色</span><br><span class="line">    5 &#x3D; 紫色       D &#x3D; 淡紫色</span><br><span class="line">    6 &#x3D; 黄色       E &#x3D; 淡黄色</span><br><span class="line">    7 &#x3D; 白色       F &#x3D; 亮白色</span><br><span class="line"></span><br><span class="line">如果没有给定任何参数，该命令会将颜色还原到 CMD.EXE 启动时</span><br><span class="line">的颜色。这个值来自当前控制台窗口、&#x2F;T 开关或</span><br><span class="line">DefaultColor 注册表值。</span><br><span class="line"></span><br><span class="line">如果用相同的前景和背景颜色来执行 COLOR 命令，COLOR 命令</span><br><span class="line">会将 ERRORLEVEL 设置为 1。</span><br><span class="line"></span><br><span class="line">例如: &quot;COLOR fc&quot; 在亮白色上产生亮红色</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">7、mode 配置系统设备</span><br><span class="line"></span><br><span class="line">配置系统设备。</span><br><span class="line"></span><br><span class="line">串行口:　　　     MODE COMm[:] [BAUD&#x3D;b] [PARITY&#x3D;p] [DATA&#x3D;d] [STOP&#x3D;s]</span><br><span class="line">                                [to&#x3D;on|off] [xon&#x3D;on|off] [odsr&#x3D;on|off]</span><br><span class="line">                                [octs&#x3D;on|off] [dtr&#x3D;on|off|hs]</span><br><span class="line">                                [rts&#x3D;on|off|hs|tg] [idsr&#x3D;on|off]</span><br><span class="line"></span><br><span class="line">设备状态:             MODE [device] [&#x2F;STATUS]</span><br><span class="line"></span><br><span class="line">打印重定向:　　 MODE LPTn[:]&#x3D;COMm[:]</span><br><span class="line"></span><br><span class="line">选定代码页:　　 MODE CON[:] CP SELECT&#x3D;yyy</span><br><span class="line"></span><br><span class="line">代码页状态:　　 MODE CON[:] CP [&#x2F;STATUS]</span><br><span class="line"></span><br><span class="line">显示模式:　　     MODE CON[:] [COLS&#x3D;c] [LINES&#x3D;n]</span><br><span class="line"></span><br><span class="line">击键率:　             MODE CON[:] [RATE&#x3D;r DELAY&#x3D;d]</span><br><span class="line"></span><br><span class="line">例：设置dos窗口和颜色</span><br><span class="line">mode con cols&#x3D;113 lines&#x3D;15 &amp; color 9f</span><br><span class="line">此命令设置DOS窗口大小：15行，113列</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">8、GOTO 和 :</span><br><span class="line">GOTO会点编程的朋友就会知道这是跳转的意思。</span><br><span class="line">在批处理中允许以“:XXX”来构建一个标号，然后用GOTO XXX跳转到标号:XXX处，然后执行标号后的命令。</span><br><span class="line">例：</span><br><span class="line">if &#123;%1&#125;&#x3D;&#x3D;&#123;&#125; goto noparms</span><br><span class="line">if &quot;%2&quot;&#x3D;&#x3D;&quot;&quot; goto noparms</span><br><span class="line"></span><br><span class="line">标签的名字可以随便起，但是最好是有意义的字符串啦，前加个冒号用来表示这个字符串是标签，goto命令就是根据这个冒号（:）来寻找下一步跳到到那里。最好有一些说明这样你别人看起来才会理解你的意图啊。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">@echo off</span><br><span class="line">:start</span><br><span class="line">set &#x2F;a var+&#x3D;1</span><br><span class="line">echo %var%</span><br><span class="line">if %var% leq 3 GOTO start</span><br><span class="line">pause</span><br><span class="line">运行显示：</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">休息一下</span><br><span class="line">----------------------------</span><br><span class="line">遭遇失事的外星人</span><br><span class="line">----------------------------</span><br><span class="line">来无影去无踪的UFO困扰了人类很长时间。可现在人们发现，功能特异的外星人也会有失事的时候。前苏联科学家杜朗诺克博士曾透露，1987年11月，一支前苏联沙漠考察队在沙漠里发现了一个直径22.87米的碟状飞行器。飞碟引擎保持完好，里面有14具已经风干成木乃伊的外星人遗体。1947年7月6日夜，美国新墨西哥州小镇罗兹维尔附近风雨大作，电闪雷鸣。第二天天睛后，人们发现了一个圆形的东西躺在草丛里。驻扎在附近的空军迅速赶来，封锁了现场。负责人马赛尔上尉详细地检查了该物体的状况。它直径足有10米，分为内、外两个舱。令他大吃一惊的是，舱内的座椅上竟然有4具类人生物的尸体。它们身高仅有1米左右，皮肤白而细腻，头很大，鼻子很长，嘴很小。手上只有4个指头，指间有蹼相连。它们身穿黑色有金属光泽的外套，但是质地很柔软。这一发现震惊了军方，五角大楼立即下令封锁消息，但消息灵通的记者已经将此新闻发布了出去。许多当地人都证实确实有飞碟在罗兹维尔附近坠毁。</span><br><span class="line">————选自《世界未解之谜》</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">9、find 在文件中搜索字符串</span><br><span class="line">在文件中搜索字符串。</span><br><span class="line"></span><br><span class="line">FIND [&#x2F;V] [&#x2F;C] [&#x2F;N] [&#x2F;I] [&#x2F;OFF[LINE]] &quot;string&quot; [[drive:][path]filename[ ...]]</span><br><span class="line"></span><br><span class="line">  &#x2F;V        显示所有未包含指定字符串的行。</span><br><span class="line">  &#x2F;C        仅显示包含字符串的行数。</span><br><span class="line">  &#x2F;N        显示行号。</span><br><span class="line">  &#x2F;I        搜索字符串时忽略大小写。</span><br><span class="line">  &#x2F;OFF[LINE] 不要跳过具有脱机属性集的文件。</span><br><span class="line">  &quot;string&quot;  指定要搜索的文字串，</span><br><span class="line">  [drive:][path]filename</span><br><span class="line">            指定要搜索的文件。</span><br><span class="line"></span><br><span class="line">如果没有指定路径，FIND 将搜索键入的或者由另一命令产生的文字。</span><br><span class="line"></span><br><span class="line">Find常和type命令结合使用</span><br><span class="line">Type [drive:][path]filename | find &quot;string&quot; [&gt;tmpfile] #挑选包含string的行</span><br><span class="line">Type [drive:][path]filename | find &#x2F;v &quot;string&quot;   #剔除文件中包含string的行</span><br><span class="line">Type [drive:][path]filename | find &#x2F;c   #显示文件行数 </span><br><span class="line">以上用法将去除find命令自带的提示语（文件名提示）</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">@echo off</span><br><span class="line">echo 111 &gt;test.txt</span><br><span class="line">echo 222 &gt;&gt;test.txt</span><br><span class="line">find &quot;111&quot; test.txt</span><br><span class="line">pause</span><br><span class="line">运行显示如下：</span><br><span class="line"></span><br><span class="line">---------- TEST.TXT</span><br><span class="line">111</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">@echo off</span><br><span class="line">echo 111 &gt;test.txt</span><br><span class="line">echo 222 &gt;&gt;test.txt</span><br><span class="line">type test.txt|find &quot;111&quot; </span><br><span class="line">pause</span><br><span class="line">运行显示如下：</span><br><span class="line">111</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">学习久了，容易瞌睡，清醒清醒，请看：</span><br><span class="line">----------------------------</span><br><span class="line">月球上有轰炸机吗</span><br><span class="line">----------------------------</span><br><span class="line">1987年3月，前苏联的一颗人造卫星拍摄到的月球照片上，出现了一架第二次世界大战时期的英国轰炸机。这架飞机机身和机翼上有明显的英国空军标志，飞机有些地方已被陨石损坏，但机体完整，机身上布满青苔。它停放在月球的火山口上。照片清晰，令人不容置疑。消息传出后，立即成为轰动世界的头号新闻。但是，正当科学家们紧锣密鼓地展开研究时，1988年7月22日，负责观察的人报告说：这架轰炸机失踪，在原来的地方没有发现它的影子。轰炸机的突然出现，又忽然间消失得无影无踪，引起了科学家们的种种猜测。有人开始怀疑前苏联人造卫星拍到的照片上根本没有什么轰炸机，但是拿来照片重新细看，它明明清清楚楚地呈现在人们面前，到底是不是真事？那么现在它又在哪里？这给本来就很神秘的这架轰炸机又增添了更为神秘的色彩。</span><br><span class="line">————选自《世界未解之谜》</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">10、start 调用外部程序并任其在新窗口自行运行</span><br><span class="line"></span><br><span class="line">批处理中调用外部程序的命令（该外部程序在新窗口中运行，批处理程序继续往下执行，不理会外部程序的运行状况），如果直接运行外部程序则必须等外部程序完成后才继续执行剩下的指令</span><br><span class="line"></span><br><span class="line">例：start explorer d:\</span><br><span class="line">调用图形界面打开D盘</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">11、assoc 和 ftype</span><br><span class="line">文件关联，不常用。</span><br><span class="line">assoc 设置&#39;文件扩展名&#39;关联，关联到&#39;文件类型&#39;</span><br><span class="line">ftype 设置&#39;文件类型&#39;关联，关联到&#39;执行程序和参数&#39;</span><br><span class="line">当你双击一个.txt文件时，windows并不是根据.txt直接判断用 notepad.exe 打开</span><br><span class="line">而是先判断.txt属于 txtfile &#39;文件类型&#39;</span><br><span class="line">再调用 txtfile 关联的命令行 txtfile&#x3D;%SystemRoot%\system32\NOTEPAD.EXE %1</span><br><span class="line">可以在&quot;文件夹选项&quot;→&quot;文件类型&quot;里修改这2种关联</span><br><span class="line">assoc           #显示所有&#39;文件扩展名&#39;关联</span><br><span class="line">assoc .txt      #显示.txt代表的&#39;文件类型&#39;，结果显示 .txt&#x3D;txtfile</span><br><span class="line">assoc .doc      #显示.doc代表的&#39;文件类型&#39;，结果显示 .doc&#x3D;Word.Document.8</span><br><span class="line">assoc .exe      #显示.exe代表的&#39;文件类型&#39;，结果显示 .exe&#x3D;exefile</span><br><span class="line">ftype           #显示所有&#39;文件类型&#39;关联</span><br><span class="line">ftype exefile   #显示exefile类型关联的命令行，结果显示 exefile&#x3D;&quot;%1&quot; %* </span><br><span class="line">assoc .txt&#x3D;Word.Document.8</span><br><span class="line">设置.txt为word类型的文档，可以看到.txt文件的图标都变了</span><br><span class="line">assoc .txt&#x3D;txtfile</span><br><span class="line">恢复.txt的正确关联</span><br><span class="line"> </span><br><span class="line">ftype exefile&#x3D;&quot;%1&quot; %*</span><br><span class="line">恢复 exefile 的正确关联</span><br><span class="line">如果该关联已经被破坏，可以运行 command.com ，再输入这条命令</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">12、pushd 和 popd</span><br><span class="line"></span><br><span class="line">PUSHD [path | ..] 保存当前目录，然后切换到另一个指定的目录path。</span><br><span class="line">popd  将当前目录恢复为pushd命令保存的目录</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">c: &amp; cd\ &amp; md mp3       #在 C:\ 建立 mp3 文件夹</span><br><span class="line">md d:\mp4               #在 D:\ 建立 mp4 文件夹</span><br><span class="line">cd &#x2F;d d:\mp4            #更改当前目录为 d:\mp4，cd命令的&#x2F;d参数可改变盘符。</span><br><span class="line">pushd c:\mp3            #保存当前目录，并切换当前目录为 c:\mp3</span><br><span class="line">popd                    #恢复当前目录为刚才保存的 d:\mp4</span><br><span class="line">一般用处不大，在当前目录名不确定时，会有点帮助。（dos编程中很有用）</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">13、CALL 调用批处理程序或命令并等待其执行完毕</span><br><span class="line"></span><br><span class="line">CALL命令可以在批处理执行过程中调用另一个批处理，当另一个批处理执行完后，再继续执行原来的批处理</span><br><span class="line"></span><br><span class="line">CALL command</span><br><span class="line">调用一条批处理命令，和直接执行命令效果一样，特殊情况下很有用，比如变量的多级嵌套，见教程后面。在批处理编程中，可以根据一定条件生成命令字符串，用call可以执行该字符串，见例子。</span><br><span class="line"></span><br><span class="line">CALL [drive:][path]filename [batch-parameters]</span><br><span class="line">调用的其它批处理程序。filename 参数必须具有 .bat 或 .cmd 扩展名。</span><br><span class="line"></span><br><span class="line">CALL :label arguments</span><br><span class="line">调用本文件内命令段，相当于子程序。被调用的命令段以标签:label开头</span><br><span class="line">以命令goto :eof结尾。</span><br><span class="line"></span><br><span class="line">另外，批脚本文本参数参照(%0、%1、等等)已如下改变:</span><br><span class="line"></span><br><span class="line">     批脚本里的 %* 指出所有的参数(如 %1 %2 %3 %4 %5 ...)</span><br><span class="line"></span><br><span class="line">     批参数(%n)的替代已被增强。您可以使用以下语法:（看不明白的直接运行后面的例子）</span><br><span class="line"></span><br><span class="line">         %~1         - 删除引号(&quot;)，扩充 %1</span><br><span class="line">         %~f1        - 将 %1 扩充到一个完全合格的路径名</span><br><span class="line">         %~d1        - 仅将 %1 扩充到一个驱动器号</span><br><span class="line">         %~p1        - 仅将 %1 扩充到一个路径</span><br><span class="line">         %~n1        - 仅将 %1 扩充到一个文件名</span><br><span class="line">         %~x1        - 仅将 %1 扩充到一个文件扩展名</span><br><span class="line">         %~s1        - 扩充的路径指含有短名</span><br><span class="line">         %~a1        - 将 %1 扩充到文件属性</span><br><span class="line">         %~t1        - 将 %1 扩充到文件的日期&#x2F;时间</span><br><span class="line">         %~z1        - 将 %1 扩充到文件的大小</span><br><span class="line">         %~$PATH : 1 - 查找列在 PATH 环境变量的目录，并将 %1</span><br><span class="line">                       扩充到找到的第一个完全合格的名称。如果环境</span><br><span class="line">                       变量名未被定义，或者没有找到文件，此组合键会</span><br><span class="line">                       扩充到空字符串</span><br><span class="line"></span><br><span class="line">    可以组合修定符来取得多重结果:</span><br><span class="line"></span><br><span class="line">        %~dp1       - 只将 %1 扩展到驱动器号和路径</span><br><span class="line">        %~nx1       - 只将 %1 扩展到文件名和扩展名</span><br><span class="line">        %~dp$PATH:1 - 在列在 PATH 环境变量中的目录里查找 %1，</span><br><span class="line">                       并扩展到找到的第一个文件的驱动器号和路径。</span><br><span class="line">        %~ftza1     - 将 %1 扩展到类似 DIR 的输出行。</span><br><span class="line"></span><br><span class="line">    在上面的例子中，%1 和 PATH 可以被其他有效数值替换。</span><br><span class="line">%~ 语法被一个有效参数号码终止。%~ 修定符不能跟 %*使用</span><br><span class="line">注意：参数扩充时不理会参数所代表的文件是否真实存在，均以当前目录进行扩展</span><br><span class="line"></span><br><span class="line">要理解上面的知识，下面的例子很关键。</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">@echo off</span><br><span class="line">Echo 产生一个临时文件 &gt; tmp.txt</span><br><span class="line">Rem 下行先保存当前目录，再将c:\windows设为当前目录</span><br><span class="line">pushd c:\windows</span><br><span class="line">Call :sub tmp.txt</span><br><span class="line">Rem 下行恢复前次的当前目录</span><br><span class="line">Popd</span><br><span class="line">Call :sub tmp.txt</span><br><span class="line">pause</span><br><span class="line">Del tmp.txt</span><br><span class="line">exit</span><br><span class="line">:sub</span><br><span class="line">Echo 删除引号： %~1</span><br><span class="line">Echo 扩充到路径： %~f1</span><br><span class="line">Echo 扩充到一个驱动器号： %~d1</span><br><span class="line">Echo 扩充到一个路径： %~p1 </span><br><span class="line">Echo 扩充到一个文件名： %~n1</span><br><span class="line">Echo 扩充到一个文件扩展名： %~x1</span><br><span class="line">Echo 扩充的路径指含有短名： %~s1 </span><br><span class="line">Echo 扩充到文件属性： %~a1 </span><br><span class="line">Echo 扩充到文件的日期&#x2F;时间： %~t1 </span><br><span class="line">Echo 扩充到文件的大小： %~z1 </span><br><span class="line">Echo 扩展到驱动器号和路径：%~dp1</span><br><span class="line">Echo 扩展到文件名和扩展名：%~nx1</span><br><span class="line">Echo 扩展到类似 DIR 的输出行：%~ftza1</span><br><span class="line">Echo.</span><br><span class="line">Goto :eof</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">set aa&#x3D;123456</span><br><span class="line">set cmdstr&#x3D;echo %aa%</span><br><span class="line">echo %cmdstr%</span><br><span class="line">call %cmdstr%</span><br><span class="line">pause</span><br><span class="line">本例中如果不用call，而直接运行%cmdstr%，将显示结果%aa%，而不是123456</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">14、shift</span><br><span class="line">更改批处理文件中可替换参数的位置。</span><br><span class="line"></span><br><span class="line">SHIFT [&#x2F;n]</span><br><span class="line"></span><br><span class="line">如果命令扩展名被启用，SHIFT 命令支持&#x2F;n 命令行开关；该命令行开关告诉</span><br><span class="line">命令从第 n 个参数开始移位；n 介于零和八之间。例如:</span><br><span class="line"></span><br><span class="line">    SHIFT &#x2F;2</span><br><span class="line"></span><br><span class="line">会将 %3 移位到 %2，将 %4 移位到 %3，等等；并且不影响 %0 和 %1。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">枯燥的学习让人烦躁，休息一下，请看：</span><br><span class="line">----------------</span><br><span class="line">神奇的“海底人”</span><br><span class="line">----------------</span><br><span class="line">几十年来，高级生物在地球各大水域出现的传闻层出不穷，一些科学家推测，海底可能有高度文明的生物存在，即在海洋深处的某些地方可能生活着一些智力高度发达的生命体——“海底人”。在众多传闻之中，最令人惊奇的是1959年初，在波兰丁尼亚港发现的海底人。当时他正筋疲力尽地走在沙滩上，人们把他送到附近的学校医院进行治疗时，发现这古怪的病人穿着没有开口的金属衣裳，此人的手指和脚趾与普通人不同，他的血液循环系统和器官并非人类所有。当人们打算对他进一步研究时，这个怪人突然之间杳如黄鹤，一去不复返。</span><br><span class="line"></span><br><span class="line">————选自《世界未解之谜》</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">15、IF</span><br><span class="line"></span><br><span class="line">IF 条件判断语句，语法格式如下：</span><br><span class="line"></span><br><span class="line">IF [NOT] ERRORLEVEL number command</span><br><span class="line">IF [NOT] string1&#x3D;&#x3D;string2 command</span><br><span class="line">IF [NOT] EXIST filename command</span><br><span class="line"></span><br><span class="line">下面逐一介绍，更详细的分析请看后面章节。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(1) IF [NOT] ERRORLEVEL number command</span><br><span class="line">IF ERRORLEVEL这个句子必须放在某一个命令的后面，执行命令后由IF ERRORLEVEL 来判断命令的返回值。</span><br><span class="line">Number的数字取值范围0~255，判断时值的排列顺序应该由大到小。返回的值大于等于指定的值时，条件成立</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">@echo off</span><br><span class="line">dir c:</span><br><span class="line">rem退出代码为&gt;&#x3D;1就跳至标题1处执行，&gt;&#x3D;0就跳至标题0处执行</span><br><span class="line">IF ERRORLEVEL 1 goto 1</span><br><span class="line">IF ERRORLEVEL 0 goto 0</span><br><span class="line">Rem 上面的两行不可交换位置，否则失败了也显示成功。</span><br><span class="line">:0</span><br><span class="line">echo 命令执行成功！</span><br><span class="line">Rem 程序执行完毕跳至标题exit处退出</span><br><span class="line">goto exit</span><br><span class="line">:1</span><br><span class="line">echo 命令执行失败！</span><br><span class="line">Rem 程序执行完毕跳至标题exit处退出</span><br><span class="line">goto exit</span><br><span class="line">:exit</span><br><span class="line">pause</span><br><span class="line">运行显示：命令执行成功！</span><br><span class="line"></span><br><span class="line">(2) IF [NOT] string1&#x3D;&#x3D;string2 command</span><br><span class="line">string1和string2都为字符的数据，英文内字符的大小写将看作不同，这个条件中的等于号必须是两个（绝对相等的意思），条件成立即执行后面的command</span><br><span class="line"></span><br><span class="line">检测当前变量的值做出判断，为了防止字符串中含有空格，可用以下格式</span><br><span class="line">if [NOT] &#123;string1&#125;&#x3D;&#x3D;&#123;string2&#125; command</span><br><span class="line">if [NOT] [string1]&#x3D;&#x3D;[string2] command</span><br><span class="line">if [NOT] &quot;string1&quot;&#x3D;&#x3D;&quot;string2&quot; command</span><br><span class="line"></span><br><span class="line">这种写法实际上将括号或引号当成字符串的一部分了，只要等号左右两边一致就行了，比如下面的写法就不行：</span><br><span class="line">if &#123;string1&#125;&#x3D;&#x3D;[string2] command</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">(3) IF [NOT] EXIST filename command</span><br><span class="line">EXIST filename为文件或目录存在的意思</span><br><span class="line"></span><br><span class="line">echo off</span><br><span class="line">IF EXIST autoexec.bat echo 文件存在！</span><br><span class="line">IF not EXIST autoexec.bat echo 文件不存在！</span><br><span class="line"></span><br><span class="line">这个批处理大家可以放在C盘和D盘分别执行，看看效果</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">16、setlocal 与 变量延迟</span><br><span class="line"></span><br><span class="line">本条内容引用[英雄出品]的批处理教程：</span><br><span class="line"></span><br><span class="line">要想进阶，变量延迟是必过的一关！所以这一部分希望你能认真看。</span><br><span class="line"></span><br><span class="line">为了更好的说明问题，我们先引入一个例子。</span><br><span class="line">例1:</span><br><span class="line"> @echo off</span><br><span class="line"> set a&#x3D;4</span><br><span class="line"> set a&#x3D;5 &amp; echo %a%</span><br><span class="line"> pause</span><br><span class="line">结果：4</span><br><span class="line">解说：为什么是4而不是5呢？在echo之前明明已经把变量a的值改成5了？</span><br><span class="line"></span><br><span class="line">让我们先了解一下批处理运行命令的机制：</span><br><span class="line"></span><br><span class="line">批处理读取命令时是按行读取的（另外例如for命令等，其后用一对圆括号闭合的所有语句也当作一行），在读取某行命令时，如果其中有变量，则变量值应该取上一行的值。所以在读取命令“set a&#x3D;5 &amp; echo %a%”时，dos将其预处理为“set a&#x3D;5 &amp; echo 4”，然后执行。而其中的a&#x3D;5所做的数值变更，只能在下一命令行才能体现了。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">而为了能够及时感知环境变量的动态变化，批处理设计了变量延迟。简单来说，在读取了一条完整的语句之后，不立即对该行的变量赋值，而会在某个单条语句执行之前再进行赋值，也就是说“延迟”了对变量的赋值。</span><br><span class="line"></span><br><span class="line">那么如何开启变量延迟呢？变量延迟又需要注意什么呢？举个例子说明一下：</span><br><span class="line"></span><br><span class="line">例2:</span><br><span class="line"> @echo off</span><br><span class="line"> setlocal enabledelayedexpansion</span><br><span class="line"> set a&#x3D;4</span><br><span class="line"> set a&#x3D;5 &amp; echo !a!</span><br><span class="line"> pause </span><br><span class="line">结果：5</span><br><span class="line">解说：启动了变量延迟，得到了正确答案。变量延迟的启动语句是“setlocal enabledelayedexpansion”，并且变量要用一对叹号“!!”括起来（注意要用英文的叹号），否则就没有变量延迟的效果。</span><br><span class="line"></span><br><span class="line">分析一下例2，首先“setlocal enabledelayedexpansion”开启变量延迟，然后“set a&#x3D;4”先给变量a赋值为4，“set a&#x3D;5 &amp; echo !a!”这句是给变量a赋值为5并输出（由于启动了变量延迟，所以批处理能够感知到动态变化，即不是先给该行变量赋值，而是在运行过程中给变量赋值，因此此时a的值就是5了）。</span><br><span class="line"></span><br><span class="line">再举一个例子巩固一下。</span><br><span class="line">例3:</span><br><span class="line"> @echo off</span><br><span class="line"> setlocal enabledelayedexpansion</span><br><span class="line"> for &#x2F;l %%i in (1,1,5) do (</span><br><span class="line"> set a&#x3D;%%i</span><br><span class="line"> echo !a!</span><br><span class="line"> )</span><br><span class="line"> pause</span><br><span class="line"></span><br><span class="line">结果：</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">解说：本例开启了变量延迟并用“!!”将变量扩起来，因此得到我们预期的结果。如果不用变量延迟会出现什么结果呢？结果是这样的：</span><br><span class="line">ECHO 处于关闭状态。</span><br><span class="line">ECHO 处于关闭状态。</span><br><span class="line">ECHO 处于关闭状态。</span><br><span class="line">ECHO 处于关闭状态。</span><br><span class="line">ECHO 处于关闭状态。</span><br><span class="line">即没有感知到for语句中的动态变化。</span><br><span class="line"></span><br><span class="line">提示：在没有开启变量延迟的情况下，某条命令行中的变量改变，必须到下一条命令才能体现。这一点也可以加以利用，看例子。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例4：交换两个变量的值，且不用中间变量</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">::交换两个变量的值，但是不使用临时变量</span><br><span class="line">set var1&#x3D;abc</span><br><span class="line">set var2&#x3D;123</span><br><span class="line">echo 交换前： var1&#x3D;%var1% var2&#x3D;%var2%</span><br><span class="line">set var1&#x3D;%var2%&amp; set var2&#x3D;%var1%</span><br><span class="line">echo 交换后： var1&#x3D;%var1% var2&#x3D;%var2%</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">运行显示：</span><br><span class="line"></span><br><span class="line">交换前： var1&#x3D;abc var2&#x3D;123</span><br><span class="line">交换后： var1&#x3D;123 var2&#x3D;abc</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">　　在代码中，使用 setlocal enabledelayedexpansion 语句来启用变量延迟之后，有得有失：</span><br><span class="line"></span><br><span class="line">　　优点：</span><br><span class="line"></span><br><span class="line">　　(a)、可以在同一语句内部直接使用上一次改变后的变量；</span><br><span class="line">　　(b)、在echo特殊字符的时候，无须用引号括起来，比如变量的值含有&lt;、&gt;、|等字符的时候，直接使用 echo !str! 就可以了；</span><br><span class="line"></span><br><span class="line">　　缺点：</span><br><span class="line"></span><br><span class="line">　　(a)、会把文本中所有的感叹号抛弃；</span><br><span class="line">    (b)、增加代码的复杂度，有时容易出错。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">17、ATTRIB  显示或更改文件属性</span><br><span class="line"></span><br><span class="line">ATTRIB [+R|-R] [+A|-A] [+S|-S] [+H|-H] [[drive:] [path] filename] [&#x2F;S [&#x2F;D]]</span><br><span class="line"></span><br><span class="line">  +   设置属性。</span><br><span class="line">  -    清除属性。</span><br><span class="line">  R   只读文件属性。</span><br><span class="line">  A   存档文件属性。</span><br><span class="line">  S   系统文件属性。</span><br><span class="line">  H   隐藏文件属性。</span><br><span class="line">  [drive:][path][filename]</span><br><span class="line">      指定要处理的文件属性。</span><br><span class="line">  &#x2F;S  处理当前文件夹及其子文件夹中的匹配文件。</span><br><span class="line">  &#x2F;D  也处理文件夹。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">md autorun</span><br><span class="line">attrib +a +s +h autorun</span><br><span class="line">上面的命令将建立文件夹autorun，然后将其设为存档、系统、隐藏属性</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">18、findstr 在文件中搜索字符串（find增强版）</span><br><span class="line"></span><br><span class="line">find命令不能处理文件中超过1024个字符的数据行，此时可用findstr命令。</span><br><span class="line"></span><br><span class="line">FINDSTR [&#x2F;B] [&#x2F;E] [&#x2F;L] [&#x2F;R] [&#x2F;S] [&#x2F;I] [&#x2F;X] [&#x2F;V] [&#x2F;N] [&#x2F;M] [&#x2F;O] [&#x2F;F:file]</span><br><span class="line">        [&#x2F;C:string] [&#x2F;G:file] [&#x2F;D:dir list] [&#x2F;A:color attributes] [&#x2F;OFF[LINE]]</span><br><span class="line">        strings [[drive:][path]filename[ ...]]</span><br><span class="line"></span><br><span class="line">  &#x2F;B        在一行的开始配对模式。</span><br><span class="line">  &#x2F;E        在一行的结尾配对模式。</span><br><span class="line">  &#x2F;L        按字使用搜索字符串。</span><br><span class="line">  &#x2F;R        将搜索字符串作为一般表达式使用。</span><br><span class="line">  &#x2F;S        在当前目录和所有子目录中搜索</span><br><span class="line">              匹配文件。</span><br><span class="line">  &#x2F;I         指定搜索不分大小写。</span><br><span class="line">  &#x2F;X        打印完全匹配的行。</span><br><span class="line">  &#x2F;V        只打印不包含匹配的行。</span><br><span class="line">  &#x2F;N        在匹配的每行前打印行数。</span><br><span class="line">  &#x2F;M        如果文件含有匹配项，只打印其文件名。</span><br><span class="line">  &#x2F;O        在每个匹配行前打印字符偏移量。</span><br><span class="line">  &#x2F;P        忽略有不可打印字符的文件。</span><br><span class="line">  &#x2F;OFF[LINE] 不跳过带有脱机属性集的文件。</span><br><span class="line">  &#x2F;A:attr   指定有十六进位数字的颜色属性。请见 &quot;color &#x2F;?&quot;</span><br><span class="line">  &#x2F;F:file   从指定文件读文件列表 (&#x2F; 代表控制台)。</span><br><span class="line">  &#x2F;C:string 使用指定字符串作为文字搜索字符串。</span><br><span class="line">  &#x2F;G:file   从指定的文件获得搜索字符串。 (&#x2F; 代表控制台)。</span><br><span class="line">  &#x2F;D:dir    查找以分号为分隔符的目录列表</span><br><span class="line">  strings   要查找的文字。</span><br><span class="line">  [drive:][path]filename</span><br><span class="line">            指定要查找的文件。</span><br><span class="line"></span><br><span class="line">除非参数有 &#x2F;C 前缀，请使用空格隔开搜索字符串。</span><br><span class="line">例如: &#39;FINDSTR &quot;hello there&quot; x.y&#39; 在文件 x.y 中寻找 &quot;hello&quot; 或</span><br><span class="line">&quot;there&quot; 。  &#39;FINDSTR &#x2F;C:&quot;hello there&quot; x.y&#39; 文件 x.y  寻找</span><br><span class="line">&quot;hello there&quot;。</span><br><span class="line"></span><br><span class="line">一般表达式的快速参考:</span><br><span class="line">  .        通配符: 任何字符</span><br><span class="line">  *        重复: 以前字符或类别出现零或零以上次数</span><br><span class="line">  ^        行位置: 行的开始</span><br><span class="line">  $        行位置: 行的终点</span><br><span class="line">  [class]  字符类别: 任何在字符集中的字符</span><br><span class="line">  [^class] 补字符类别: 任何不在字符集中的字符</span><br><span class="line">  [x-y]    范围: 在指定范围内的任何字符</span><br><span class="line">  \x       Escape: 元字符 x 的文字用法</span><br><span class="line">  \&lt;xyz    字位置: 字的开始</span><br><span class="line">  xyz\&gt;    字位置: 字的结束</span><br><span class="line"></span><br><span class="line">有关 FINDSTR 常见表达法的详细情况，请见联机命令参考。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">大自然中的很多神奇现象令人惊叹不已：</span><br><span class="line">----------------------------</span><br><span class="line">神奇的龙卷风</span><br><span class="line">----------------------------</span><br><span class="line">龙卷风外貌奇特，它上部是一块乌黑或浓灰的积雨云，下部是下垂着的形如大象鼻子的漏斗状云柱，具有小、快、猛、短的特点。龙卷风通常是极其迅速的，风速一般每秒50米至100米，有时可达每秒300米，甚至超过声速（340米&#x2F;秒）。它像一个巨大的吸尘器，经过地面，地面的一切都要被它卷走；经过水库、河流，常卷起冲天水柱，有时连水库、河流的底部都露了出来。同时，龙卷风维持时间一般很短，往往只有几分钟或几十分钟，最多几小时，一般移动10米到10千米，便“寿终正寝”了。龙卷风还有一些“古怪行为”，使人难以捉摸。它席卷城镇，捣毁房屋，把碗橱从一个地方刮到另一个地方，却没有打碎碗橱里的一个碗；吓呆了的人们常常被它抬向高空，然后又被它平平安安地送回地面；有时它拔去一只鸡一侧的毛，而另一侧却完好无损；它将百年古松吹倒并拧成麻花状，而近旁的小杨树连一根枝条都未受到折损。人们对龙卷风的形成及后果进行了多年的研究，但还有很多谜底没有被揭开。</span><br><span class="line">————选自《世界未解之谜》</span><br><span class="line"></span><br><span class="line">19、date &#x2F;t 和 time &#x2F;t</span><br><span class="line"></span><br><span class="line">date &#x2F;t 直接显示当前日期，可用来提取或显示日期。</span><br><span class="line"></span><br><span class="line">time &#x2F;t 直接显示当前时间，可用来提取或显示时间。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第二节 常用特殊符号</span><br><span class="line"></span><br><span class="line">    1、@  命令行回显屏蔽符</span><br><span class="line">    2、%  批处理变量引导符</span><br><span class="line">    3、&gt;   输出重定向符</span><br><span class="line">    4、&gt;&gt;  输出重定向符</span><br><span class="line">    5、&lt;、&gt;&amp;、&lt;&amp; 重定向符</span><br><span class="line">    6、|  命令管道符</span><br><span class="line">    7、^  转义字符</span><br><span class="line">    8、&amp;  组合命令（顺序执行）</span><br><span class="line">    9、&amp;&amp; 组合命令（前面指令成功，才执行后面指令）</span><br><span class="line">    10、||  组合命令（前面指令失败，才执行后面指令）</span><br><span class="line">    11、&quot;&quot;  字符串界定符</span><br><span class="line">    12、, 逗号</span><br><span class="line">    13、; 分号</span><br><span class="line">    14、() 括号</span><br><span class="line">    15、! 感叹号</span><br><span class="line">    16、批处理中可能会见到的其它特殊标记符: （略）</span><br><span class="line">        CR(0D) 命令行结束符 </span><br><span class="line">        Escape(1B) ANSI转义字符引导符 </span><br><span class="line">        Space(20) 常用的参数界定符 </span><br><span class="line">        Tab(09) ; &#x3D; 不常用的参数界定符 </span><br><span class="line">        + COPY命令文件连接符 </span><br><span class="line">        * ? 文件通配符 </span><br><span class="line">        &#x2F; 参数开关引导符 </span><br><span class="line">        : 批处理标签引导符</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">废话少说，开讲了</span><br><span class="line"></span><br><span class="line">1、@  命令行回显屏蔽符</span><br><span class="line"></span><br><span class="line">这个字符在批处理中的意思是关闭当前行的回显。我们从前几课知道</span><br><span class="line">ECHO OFF可以关闭掉整个批处理命令的回显，但不能关掉ECHO OFF这个命令，现在我们在ECHO OFF这个命令前加个@，就可以达到所有命令均不回显的要求</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">2、%  批处理变量引导符</span><br><span class="line"></span><br><span class="line">这个百分号严格来说是算不上命令的，它只是批处理中的参数而已（多个%一起使用的情况除外，以后还将详细介绍）。</span><br><span class="line">引用变量用%var%，调用程序外部参数用%1至%9等等</span><br><span class="line">%0  %1  %2  %3  %4  %5  %6  %7  %8  %9  %*为命令行传递给批处理的参数</span><br><span class="line">%0 批处理文件本身，包括完整的路径和扩展名</span><br><span class="line">%1 第一个参数</span><br><span class="line">%9 第九个参数</span><br><span class="line">%* 从第一个参数开始的所有参数</span><br><span class="line">参数%0具有特殊的功能，可以调用批处理自身，以达到批处理本身循环的目的，也可以复制和删除文件自身等等。</span><br><span class="line"></span><br><span class="line">例：最简单的复制文件自身的方法</span><br><span class="line">copy %0 d:\wind.bat</span><br><span class="line"></span><br><span class="line">小技巧：添加行内注释</span><br><span class="line">%注释内容%（可以用作行内注释，不能出现重定向符号和管道符号）</span><br><span class="line">为什么这样呢？此时“注释内容”其实被当作变量，其值是空的，故只起注释作用，不过这种用法容易出现语法错误，一般不用。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3、&gt;   输出重定向符</span><br><span class="line">输出重定向命令</span><br><span class="line">这个字符的意思是传递并且覆盖，他所起的作用是将运行的结果传递到后面的范围（后边可以是文件，也可以是默认的系统控制台）</span><br><span class="line">    在NT系列命令行中，重定向的作用范围由整个命令行转变为单个命令语句，受到了命令分隔符&amp;,&amp;&amp;,||和语句块的制约限制。</span><br><span class="line"></span><br><span class="line">比如：</span><br><span class="line">使用命令：echo hello &gt;1.txt将建立文件1.txt，内容为”hello “（注意行尾有一空格）</span><br><span class="line">使用命令：echo hello&gt;1.txt将建立文件1.txt，内容为”hello“（注意行尾没有空格）</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">4、&gt;&gt;  输出重定向符</span><br><span class="line">输出重定向命令</span><br><span class="line">这个符号的作用和&gt;有点类似，但他们的区别是&gt;&gt;是传递并在文件的末尾追加，而&gt;是覆盖</span><br><span class="line"></span><br><span class="line">用法同上</span><br><span class="line"></span><br><span class="line">同样拿1.txt做例子</span><br><span class="line"></span><br><span class="line">使用命令：</span><br><span class="line">echo hello &gt; 1.txt</span><br><span class="line">echo world &gt;&gt;1.txt</span><br><span class="line"></span><br><span class="line">这时候1.txt 内容如下:</span><br><span class="line">hello</span><br><span class="line">world</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">5、&lt;、&gt;&amp;、&lt;&amp; 重定向符</span><br><span class="line"></span><br><span class="line">这三个命令也是管道命令，但&gt;&amp;、&lt;&amp;一般不常用，你只需要知道一下就ok了，当然如果想仔细研究的话，可以自己查一下资料。(本人已查过，网上也查不到相关资料)</span><br><span class="line"></span><br><span class="line">&lt;，输入重定向命令，从文件中读入命令输入，而不是从键盘中读入。</span><br><span class="line">@echo off</span><br><span class="line">echo 2005-05-01&gt;temp.txt</span><br><span class="line">set &#x2F;p today&#x3D;&lt;temp.txt</span><br><span class="line">echo %today%</span><br><span class="line">del temp.txt</span><br><span class="line">pause</span><br><span class="line">运行显示：</span><br><span class="line">2005-05-01</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;&amp;，将一个句柄的输出写入到另一个句柄的输入中。</span><br><span class="line">&lt;&amp;，刚好和&gt;&amp;相反，从一个句柄读取输入并将其写入到另一个句柄输出中。</span><br><span class="line"></span><br><span class="line">常用句柄：0、1、2，未定义句柄：3—9</span><br><span class="line">1&gt;nul 表示禁止输出正确的信息</span><br><span class="line">2&gt;nul 表示禁止输出错误信息。</span><br><span class="line">其中的1与2都是代表某个数据流输入输出的地址（NT CMD 称之为句柄，MSDOS称之为设备）。</span><br><span class="line"></span><br><span class="line">句柄0：标准输入stdin，键盘输入</span><br><span class="line">句柄1：标准输出stdout，输出到命令提示符窗口（console，代码为CON）</span><br><span class="line">句柄2：标准错误stderr，输出到命令提示符窗口（console，代码为CON）</span><br><span class="line">其中的stdin可被&lt;重定向，stdout可被&gt;、&gt;&gt;重定向。</span><br><span class="line"></span><br><span class="line">我们已经知道读取文本中的内容可以用for命令，但如果只需要读取第一行用for命令就有点麻烦。简单的办法如下:</span><br><span class="line"> @echo off</span><br><span class="line"> set &#x2F;p str&#x3D;&lt;%0</span><br><span class="line"> echo %str%</span><br><span class="line"> pause</span><br><span class="line">运行显示批处理文件自身的第一行：@echo off</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">----------------------------</span><br><span class="line">行踪诡秘的球状闪电</span><br><span class="line">----------------------------</span><br><span class="line">球状闪电是一种非常奇特的现象。一般闪电都是呈枝条状，球状闪电则呈圆球状；一般闪电只能存在百分之几秒，最多不超过几秒，而球状闪电却能存在好几分钟；一般闪电有固定的路径，球状闪电却能像幽灵般的四处飘荡，游移不定。它到底是怎么形成的呢？科学界对此尚无定论。球状闪电的颜色各种各样，有的橘红，有的淡红，有的闪着蓝白色的光，有的冒着紫色的火星。它们的行踪十分诡秘。1984年，一架前苏联运输机与球状闪电在空中相遇，它竟然能穿透金属机身来到机舱内，并分裂成两个半圆形，最后两个半圆又合而为一，消失在空气中。</span><br><span class="line">————选自《世界未解之谜》</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">6、|  命令管道符</span><br><span class="line"></span><br><span class="line">格式：第一条命令 | 第二条命令 [| 第三条命令...]</span><br><span class="line">将第一条命令的结果作为第二条命令的参数来使用，记得在unix中这种方式很常见。</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line"></span><br><span class="line">dir c:\|find &quot;txt&quot;</span><br><span class="line"></span><br><span class="line">以上命令是：查找C：\所有，并发现TXT字符串。</span><br><span class="line">FIND的功能请用 FIND &#x2F;? 自行查看</span><br><span class="line"></span><br><span class="line">在不使format的自动格式化参数时，我是这样来自动格式化A盘的</span><br><span class="line"></span><br><span class="line">echo y|format a: &#x2F;s &#x2F;q &#x2F;v:system</span><br><span class="line"></span><br><span class="line">用过format的都知道，再格盘时要输入y来确认是否格盘，这个命令前加上echo y并用|字符来将echo y的结果传给format命令</span><br><span class="line"></span><br><span class="line">从而达到自动输入y的目的</span><br><span class="line"></span><br><span class="line">（这条命令有危害性，测试时请慎重）</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">7、^  转义字符</span><br><span class="line"></span><br><span class="line">^是对特殊符号&lt;,&gt;,&amp;的前导字符，在命令中他将以上3个符号的特殊功能去掉，仅仅只把他们当成符号而不使用他们的特殊意义。</span><br><span class="line"></span><br><span class="line">比如</span><br><span class="line"></span><br><span class="line">echo test ^&gt;1.txt</span><br><span class="line"></span><br><span class="line">结果则是：test &gt; 1.txt</span><br><span class="line"></span><br><span class="line">他没有追加在1.txt里，呵呵。只是显示了出来</span><br><span class="line"></span><br><span class="line">另外，此转义字符还可以用作续行符号。</span><br><span class="line">举个简单的例子：</span><br><span class="line">@echo off</span><br><span class="line">echo 英雄^</span><br><span class="line">是^</span><br><span class="line">好^</span><br><span class="line">男人</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">不用多说，自己试一下就明白了。</span><br><span class="line"></span><br><span class="line">为什么转义字符放在行尾可以起到续行符的作用呢？原因很简单，因为每行末尾还有一个看不见的符号，即回车符，转义字符位于行尾时就让回车符失效了，从而起到了续行的作用。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">8、&amp;  组合命令（顺序执行）</span><br><span class="line"></span><br><span class="line">语法：第一条命令 &amp; 第二条命令 [&amp; 第三条命令...]</span><br><span class="line">&amp;、&amp;&amp;、||为组合命令，顾名思义，就是可以把多个命令组合起来当一个命令来执行。这在批处理脚本里是允许的，而且用的非常广泛。因为批处理认行不认命令数目。</span><br><span class="line"></span><br><span class="line">这个符号允许在一行中使用2个以上不同的命令，当第一个命令执行失败了，也不影响后边的命令执行。</span><br><span class="line">这里&amp;两边的命令是顺序执行的，从前往后执行。</span><br><span class="line">比如：</span><br><span class="line"></span><br><span class="line">dir z:\ &amp; dir y:\ &amp; dir c:\</span><br><span class="line"></span><br><span class="line">以上命令会连续显示z,y,c盘的内容，不理会该盘是否存在</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">9、&amp;&amp; 组合命令（前面指令成功，才执行后面指令）</span><br><span class="line">语法：第一条命令 &amp;&amp; 第二条命令 [&amp;&amp; 第三条命令...]</span><br><span class="line"></span><br><span class="line">用这种方法可以同时执行多条命令，当碰到执行出错的命令后将不执行后面的命令，如果一直没有出错则一直执行完所有命令</span><br><span class="line">这个命令和上边的类似，但区别是，第一个命令失败时，后边的命令也不会执行</span><br><span class="line"></span><br><span class="line">dir z:\ &amp;&amp; dir y:\ &amp;&amp; dir c:\</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">10、||  组合命令（前面指令失败，才执行后面指令）</span><br><span class="line"></span><br><span class="line">语法：第一条命令 || 第二条命令 [|| 第三条命令...]</span><br><span class="line"></span><br><span class="line">用这种方法可以同时执行多条命令，当一条命令失败后才执行第二条命令，当碰到执行正确的命令后将不执行后面的命令，如果没有出现正确的命令则一直执行完所有命令；</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">提示：组合命令和重定向命令一起使用必须注意优先级</span><br><span class="line">管道命令的优先级高于重定向命令，重定向命令的优先级高于组合命令</span><br><span class="line"></span><br><span class="line">问题：把C盘和D盘的文件和文件夹列出到a.txt文件中。看例：</span><br><span class="line">dir c:\ &amp;&amp; dir d:\ &gt; a.txt</span><br><span class="line"></span><br><span class="line">这样执行后a.txt里只有D盘的信息！为什么？因为组合命令的优先级没有重定向命令的优先级高！所以这句在执行时将本行分成这两部分：dir c:\和dir d:\ &gt; a.txt，而并不是如你想的这两部分：dir c:\ &amp;&amp; dir d:\和&gt; a.txt。要使用组合命令&amp;&amp;达到题目的要求，必须得这么写：</span><br><span class="line"></span><br><span class="line">dir c:\ &gt; a.txt &amp;&amp; dir d:\ &gt;&gt; a.txt</span><br><span class="line"></span><br><span class="line">这样，依据优先级高低，DOS将把这句话分成以下两部分：dir c:\ &gt; a.txt和dir d:\ &gt;&gt; a.txt。例十八中的几句的差别比较特殊，值得好好研究体会一下。</span><br><span class="line"></span><br><span class="line">当然这里还可以利用&amp;命令（自己想一下道理哦）：</span><br><span class="line"></span><br><span class="line">dir c:\ &gt; a.txt &amp; dir d:\ &gt;&gt; a.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------------------------</span><br><span class="line">“行为”古怪的闪电 </span><br><span class="line">----------------------------</span><br><span class="line">1892年7月19日，两个黑人在美国宾夕法尼亚州被闪电击毙，当时他们在公园的一棵树下躲雨。当人们从其中一人的身上脱下衣服时，看见了令人震惊的奇景：死者的前胸留下了闪电发生地点的影像，上边还有一片略带棕色的橡树叶以及藏在草中的羊齿草。树叶和羊齿草的图像如此清晰，连肉眼也能看见最细小的筋络。1957年，美国一位牧场女工在雷雨中工作。忽然巨雷一响，她虽未被劈死，但感到胸部作痛，解开上衣才发现，竟有一头牛的影像印在胸前。在俄罗斯，有一个人遭到雷击后， 全身上下的衣服都不见了，只剩下一只衬衫的袖子和几个皮靴上的铁钉，10分钟以后，他恢复了知觉，看到自己全身一丝不挂，感到非常奇怪。闪电所造成的这些奇怪现象该如何解释呢？</span><br><span class="line">————选自《世界未解之谜》</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">11、&quot;&quot;  字符串界定符</span><br><span class="line"></span><br><span class="line">双引号允许在字符串中包含空格，进入一个特殊目录可以用如下方法</span><br><span class="line"></span><br><span class="line">cd &quot;program files&quot;</span><br><span class="line">cd progra~1</span><br><span class="line">cd pro*</span><br><span class="line"></span><br><span class="line">以上三种方法都可以进入program files这个目录</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">12、, 逗号</span><br><span class="line"></span><br><span class="line">逗号相当于空格，在某些情况下“,”可以用来当做空格使</span><br><span class="line"></span><br><span class="line">比如</span><br><span class="line">dir,c:\</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">13、; 分号</span><br><span class="line"></span><br><span class="line">分号，当命令相同时，可以将不同目标用；来隔离，但执行效果不变，如执行过程中发生错误，则只返回错误报告，但程序仍会执行。（有人说不会继续执行，其实测试一下就知道了）</span><br><span class="line"></span><br><span class="line">比如：</span><br><span class="line">dir c:\;d:\;e:\;z:\</span><br><span class="line"></span><br><span class="line">以上命令相当于</span><br><span class="line">dir c:\</span><br><span class="line">dir d:\</span><br><span class="line">dir e:\</span><br><span class="line">dir f:\</span><br><span class="line">如果其中z盘不存在，运行显示：系统找不到指定的路径。然后终止命令的执行。</span><br><span class="line"></span><br><span class="line">例：dir c:\;d:\;e:\1.txt</span><br><span class="line">以上命令相当于</span><br><span class="line">dir c:\</span><br><span class="line">dir d:\</span><br><span class="line">dir e:\1.txt</span><br><span class="line">其中文件e:\1.txt不存在，但e盘存在，有错误提示，但命令仍会执行。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">为什么？如果目标路径不存在，则终止执行；如果路径存在，仅文件不存在，则继续执行。</span><br><span class="line"></span><br><span class="line">就说这些了!各位有什么意见请回贴!有什么疑问请到BAT交流区发贴!下一节改进!</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">14、() 括号</span><br><span class="line"></span><br><span class="line">小括号在批处理编程中有特殊的作用，左右括号必须成对使用，括号中可以包括多行命令，这些命令将被看成一个整体，视为一条命令行。</span><br><span class="line">    括号在for语句和if语句中常见，用来嵌套使用循环或条件语句，其实括号()也可以单独使用，请看例子。</span><br><span class="line">例：</span><br><span class="line">命令：echo 1 &amp; echo 2 &amp; echo 3</span><br><span class="line">可以写成：</span><br><span class="line">(</span><br><span class="line">echo 1</span><br><span class="line">echo 2</span><br><span class="line">echo 3</span><br><span class="line">)</span><br><span class="line">上面两种写法效果一样，这两种写法都被视为是一条命令行。</span><br><span class="line">注意：这种多条命令被视为一条命令行时，如果其中有变量，就涉及到变量延迟的问题。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">15、! 感叹号</span><br><span class="line">没啥说的，在变量延迟问题中，用来表示变量，即%var%应该表示为!var!，请看前面的setlocal命令介绍。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">累了，换换思维，有兴趣的可以学一段古文化：《三字经》第一节，可谓人人皆知。</span><br><span class="line">【原文】</span><br><span class="line">人(rén) 之(zhī) 初(chū)，性(xìng) 本(běn) 善(shàn)，</span><br><span class="line">性(xìng) 相(xiāng) 近(jìn)，习(xí) 相(xiāng) 远(yuǎn)。</span><br><span class="line">苟(gǒu) 不(bú) 教(jiào)，性(xìng) 乃(nǎi) 迁(qiān)，</span><br><span class="line">教(jiào) 之(zhī) 道(dào)，贵(guì) 以(yǐ) 专(zhuān)。</span><br><span class="line">　　　　　</span><br><span class="line">【译文参考】</span><br><span class="line">人刚生下来的时候，本性中有善的一面。这时候善良的本性，大致都很相近，没有多大的差别。等到长大以后，因各人的环境不同，所学习的也不同；在好的环境人就会变好，在不好的环境人就容易学坏，于是性情开始有了差别。假如在这个时候，不给他适当的教导，学了种种不良的习惯，他原本善良的本性，就会渐渐变坏；而教导的方法，最重要的就是必须专心一致，不可边做边停，才能使他有完整的学习。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第二章 DOS循环：for命令详解</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">讲FOR之前呢,咋先告诉各位新手朋友,如果你有什么命令不懂,直接在CMD下面输入:</span><br><span class="line">name &#x2F;? 这样的格式来看系统给出的帮助文件,比如for &#x2F;? 就会把FOR命令的帮助全部显示出来!当然许多菜鸟都看不懂.... 所以才会有那么多批处理文章! 俺也照顾菜鸟,把FOR命令用我自己的方式说明下!</span><br><span class="line"></span><br><span class="line">正式开始:</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">一、基本格式</span><br><span class="line"></span><br><span class="line">FOR %%variable IN (set) DO command [command-parameters]</span><br><span class="line"></span><br><span class="line">  %%variable  指定一个单一字母表示可替换的参数。</span><br><span class="line">  (set)      指定一个或一组文件。可以使用通配符。</span><br><span class="line">  command    指定对每个文件执行的命令。</span><br><span class="line">  command-parameters</span><br><span class="line">             为特定命令指定参数或命令行开关。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">参数:FOR有4个参数 &#x2F;d   &#x2F;l   &#x2F;r   &#x2F;f   他们的作用我在下面用例子解释</span><br><span class="line">现在开始讲每个参数的意思</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">二、参数 &#x2F;d 主要搜索匹配目录</span><br><span class="line">FOR &#x2F;D %%variable IN (set) DO command [command-parameters]</span><br><span class="line">    如果集中包含通配符，则指定与目录名匹配，而不与文件</span><br><span class="line">    名匹配。</span><br><span class="line"></span><br><span class="line">如果 Set (也就是我上面写的 &quot;相关文件或命令&quot;) 包含通配符（* 和 ?），将对与 Set 相匹配的每个目录（而不是指定目录中的文件组）执行指定的 Command。</span><br><span class="line"></span><br><span class="line">这个参数主要用于目录搜索,不会搜索文件,看这样的例子</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">for &#x2F;d %%i in (c:\*) do echo %%i</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">运行会把C盘根目录下的全部目录名字打印出来,而文件名字一个也不显示!</span><br><span class="line"></span><br><span class="line">在来一个,比如我们要把当前路径下文件夹的名字只有1-3个字母的打出来</span><br><span class="line">@echo off</span><br><span class="line">for &#x2F;d %%i in (???) do echo %%i</span><br><span class="line">pause</span><br><span class="line">这样的话如果你当前目录下有目录名字只有1-3个字母的,就会显示出来,没有就不显示了</span><br><span class="line"></span><br><span class="line">这里解释下*号和?号的作用,*号表示任意N个字符,而?号只表示任意一个字符</span><br><span class="line"></span><br><span class="line">知道作用了,给大家个思考题目!</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">for &#x2F;d %%i in (window?) do echo %%i</span><br><span class="line">pause</span><br><span class="line">保存到C盘下执行,会显示什么呢?自己看吧! 显示：windows</span><br><span class="line">&#x2F;D参数只能显示当前目录下的目录名字,这个大家要注意!</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">三、参数 &#x2F;R 搜索指定目录树中的匹配文件</span><br><span class="line"></span><br><span class="line">FOR &#x2F;R [[drive:]path] %%variable IN (set) DO command [command-parameters]</span><br><span class="line"></span><br><span class="line">    检查以 [drive:]path 为根的目录树，指向每个目录中的</span><br><span class="line">    FOR 语句。如果在 &#x2F;R 后没有指定目录，则使用当前</span><br><span class="line">目录。如果集仅为一个单点(.)字符，则枚举该目录树。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">递归</span><br><span class="line"></span><br><span class="line">上面我们知道,&#x2F;D只能显示当前路径下的目录名字,那么现在这个&#x2F;R也是和目录有关,他能干嘛呢?放心他比&#x2F;D强大多了!</span><br><span class="line">他可以把当前或者你指定路径下的文件名字全部读取,注意是文件名字,有什么用看例子!</span><br><span class="line"></span><br><span class="line">*****************************请注意2点：</span><br><span class="line"></span><br><span class="line">    1、set中的文件名如果含有通配符(？或*)，则列举&#x2F;R参数指定的目录及其下面的所用子目录中与set相符合的所有文件，无相符文件的目录则不列举。如果目录树中没有相符的文件，或者指定的目录根本不存在，这两种情况下均不会列举目录。</span><br><span class="line">    2、相反，如果set中为具体文件名（即不含通配符?和*)，则枚举该目录树（即列举该目录及其下面的所有子目录），而不管set中的指定文件是否存在，也就是说，此时不但列举含有指定文件的目录，也要列举不含指定文件的其它所有目录。这与前面所说的单点（.）枚举目录树是一个道理，单点代表当前目录，也可视为一个文件。此时哪怕指定的目录根本不存在，同样会列举目录。</span><br><span class="line">    比如：for &#x2F;r M:\不存在 %%i in (1.exe) do echo %%i</span><br><span class="line">    运行显示：M:\不存在\1.exe</span><br><span class="line">*****************************</span><br><span class="line">例：</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">for &#x2F;r c:\ %%i in (*.exe) do echo %%i</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">咱们把这个BAT保存到D盘随便哪里然后执行,我会就会看到,他把C盘根目录,和每个目录的子目录下面全部的EXE文件都列出来了!!!!没有exe文件的目录则不列举。</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">@echo off</span><br><span class="line">for &#x2F;r %%i in (*.exe) do echo %%i</span><br><span class="line">pause</span><br><span class="line">参数不一样了吧!这个命令前面没加那个C:\也就是搜索路径,这样他就会以当前目录为搜索路径,比如你这个BAT你把他放在d:\test目录下执行,那么他就会把D:\test目录和他下面的子目录的全部EXE文件列出来!!!</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">@echo off</span><br><span class="line">for &#x2F;r c:\ %%i in (boot.ini) do echo %%i</span><br><span class="line">pause</span><br><span class="line">运行本例发现枚举了c盘所有目录。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">为了只列举boot.ini存在的目录，可改成下面这样：</span><br><span class="line">@echo off</span><br><span class="line">for &#x2F;r c:\ %%i in (boot.ini) do if exist %%i echo %%i</span><br><span class="line">pause</span><br><span class="line">用这条命令搜索文件真不错。。。。。。</span><br><span class="line"></span><br><span class="line">这个参数大家应该理解了吧!还是满好玩的命令!</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">四、参数 &#x2F;L 按数字序列(start,step,end)循环</span><br><span class="line"></span><br><span class="line">FOR &#x2F;L %%variable IN (start,step,end) DO command [command-parameters]</span><br><span class="line"></span><br><span class="line">    该集表示以增量形式从开始到结束的一个数字序列。</span><br><span class="line">    因此，(1,1,5) 将产生序列 1 2 3 4 5，(5,-1,1) 将产生</span><br><span class="line">    序列 (5 4 3 2 1)。</span><br><span class="line"></span><br><span class="line">使用迭代变量设置起始值 (Start#)，然后逐步执行一组范围的值，直到该值超过所设置的终止值 (End#)。&#x2F;L 将通过对 Start# 与 End# 进行比较来执行迭代变量。如果 Start# 小于 End#，就会执行该命令。如果迭代变量超过 End#，则命令解释程序退出此循环。还可以使用负的 Step# 以递减数值的方式逐步执行此范围内的值。例如，(1,1,5) 生成序列 1 2 3 4 5，而 (5,-1,1) 则生成序列 (5 4 3 2 1)。语法是：</span><br><span class="line"></span><br><span class="line">看着这说明有点晕吧!咱们看例子就不晕了!</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">for &#x2F;l %%i in (1,1,5) do @echo %%i</span><br><span class="line">pause</span><br><span class="line">保存执行看效果,他会打印从1 2 3 4 5  这样5个数字</span><br><span class="line">(1,1,5)这个参数也就是表示从1开始每次加1直到5终止!</span><br><span class="line"></span><br><span class="line">等会晕,就打印个数字有P用...好的满足大家,看这个例子</span><br><span class="line">@echo off</span><br><span class="line">for &#x2F;l %%i in (1,1,5) do start cmd</span><br><span class="line">pause</span><br><span class="line">执行后是不是吓了一跳,怎么多了5个CMD窗口,呵呵!如果把那个 (1,1,5)改成 (1,1,65535)会有什么结果,我先告诉大家,会打开65535个CMD窗口....这么多你不死机算你强!</span><br><span class="line">当然我们也可以把那个start cmd改成md %%i 这样就会建立指定个目录了!!!名字为1-65535</span><br><span class="line"></span><br><span class="line">看完这个被我赋予破坏性质的参数后,我们来看最后一个参数</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">----------------------------</span><br><span class="line">三叶虫化石</span><br><span class="line">----------------------------</span><br><span class="line">1968年，一个三叶虫化石的收藏家在犹他州旅行时，发现了让他惊喜不已的三叶虫化石。我们知道，三叶虫是一种生存在5亿年前的小生物。可他回家后，竟在这个化石上看见了人类的脚印，那是一个穿着凉鞋的脚印，不偏不倚正好踩在三叶虫上。它不会是人为的恶作剧吧？开始也有人是这么想的，但是如果要制作这些脚印并把它们刻在石头上，再埋在深深的土层里，还要做到不留痕迹，这似乎完全没有可能。而且就在这之后，又先后有人在同一地区发现了类似的多处脚印，要伪造这么多脚印且都做到人不知鬼不觉是不可能的，可惜的是人们依然无法确定这些鞋印是怎么回事。按照达尔文进化论，在遥远的5亿年前，连人类的近亲猩猩、猴子都没有，谁会穿着凉鞋在这一带溜达呢？</span><br><span class="line">————选自《世界未解之谜》</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">五、参数 &#x2F;F 处理命令输出、字符串及文件内容</span><br><span class="line"></span><br><span class="line">\迭代及文件解析</span><br><span class="line">使用文件解析来处理命令输出、字符串及文件内容。使用迭代变量定义要检查的内容或字符串，并使用各种options选项进一步修改解析方式。使用options令牌选项指定哪些令牌应该作为迭代变量传递。请注意：在没有使用令牌选项时，&#x2F;F 将只检查第一个令牌。</span><br><span class="line">文件解析过程包括读取输出、字符串或文件内容，将其分成独立的文本行以及再将每行解析成零个或更多个令牌。然后通过设置为令牌的迭代变量值，调用 for 循环。默认情况下，&#x2F;F 传递每个文件每一行的第一个空白分隔符号。跳过空行。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">详细的帮助格式为：</span><br><span class="line">FOR &#x2F;F [&quot;options&quot;] %%variable IN (file-set) DO command [command-parameters]</span><br><span class="line">FOR &#x2F;F [&quot;options&quot;] %%variable IN (&quot;string&quot;) DO command [command-parameters]</span><br><span class="line">FOR &#x2F;F [&quot;options&quot;] %%variable IN (&#39;command&#39;) DO command [command-parameters]</span><br><span class="line"></span><br><span class="line">    带引号的字符串&quot;options&quot;包括一个或多个</span><br><span class="line">    指定不同解析选项的关键字。这些关键字为:</span><br><span class="line"></span><br><span class="line">        eol&#x3D;c           - 指一个行注释字符的结尾(就一个)</span><br><span class="line">        skip&#x3D;n          - 指在文件开始时忽略的行数。</span><br><span class="line">        delims&#x3D;xxx      - 指分隔符集。这个替换了空格和跳格键的</span><br><span class="line">                          默认分隔符集。</span><br><span class="line">        tokens&#x3D;x,y,m-n  - 指每行的哪一个符号被传递到每个迭代</span><br><span class="line">                          的 for 本身。这会导致额外变量名称的分配。m-n</span><br><span class="line">                          格式为一个范围。通过 nth 符号指定 mth。如果</span><br><span class="line">                          符号字符串中的最后一个字符星号，</span><br><span class="line">                          那么额外的变量将在最后一个符号解析之后</span><br><span class="line">                          分配并接受行的保留文本。经测试，该参数最多</span><br><span class="line">                          只能区分31个字段。</span><br><span class="line"></span><br><span class="line">        usebackq        - 使用后引号（键盘上数字1左面的那个键&#96;）。</span><br><span class="line"></span><br><span class="line">                        未使用参数usebackq时：file-set表示文件，但不能含有空格</span><br><span class="line">                            双引号表示字符串，即&quot;string&quot;</span><br><span class="line">                            单引号表示执行命令，即&#39;command&#39;</span><br><span class="line"></span><br><span class="line">                          使用参数usebackq时：file-set和&quot;file-set&quot;都表示文件</span><br><span class="line">                          当文件路径或名称中有空格时，就可以用双引号括起来</span><br><span class="line">                            单引号表示字符串，即&#39;string&#39;</span><br><span class="line">                            后引号表示命令执行，即&#96;command&#96;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">以上是用for &#x2F;?命令获得的帮助信息，直接复制过来的。</span><br><span class="line">晕惨了!我这就举个例子帮助大家来理解这些参数!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">For命令例1：****************************************</span><br><span class="line">@echo off</span><br><span class="line">rem 首先建立临时文件test.txt</span><br><span class="line">echo ;注释行,这是临时文件,用完删除 &gt;test.txt</span><br><span class="line">echo 11段 12段 13段 14段 15段 16段 &gt;&gt;test.txt</span><br><span class="line">echo 21段,22段,23段,24段,25段,26段 &gt;&gt;test.txt</span><br><span class="line">echo 31段-32段-33段-34段-35段-36段 &gt;&gt;test.txt</span><br><span class="line">FOR &#x2F;F &quot;eol&#x3D;; tokens&#x3D;1,3* delims&#x3D;,- &quot; %%i in (test.txt) do echo %%i %%j %%k</span><br><span class="line">Pause</span><br><span class="line">Del test.txt</span><br><span class="line"></span><br><span class="line">运行显示结果：</span><br><span class="line"></span><br><span class="line">11段 13段 14段 15段 16段</span><br><span class="line">21段 23段 24段,25段,26段</span><br><span class="line">31段 33段 34段-35段-36段</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">为什么会这样?我来解释：</span><br><span class="line">eol&#x3D;;          分号开头的行为注释行</span><br><span class="line">tokens&#x3D;1,3*    将每行第1段,第3段和剩余字段分别赋予变量%%i，%%j，%%k</span><br><span class="line">delims&#x3D;,-     （减号后有一空格）以逗号减号和空格为分隔符，空格必须放在最后</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">For命令例2：****************************************</span><br><span class="line">@echo off</span><br><span class="line">FOR &#x2F;F &quot;eol&#x3D; delims&#x3D;&quot; %%i in (test.txt) do echo %%i</span><br><span class="line">Pause</span><br><span class="line"></span><br><span class="line">运行将显示test.txt全部内容，包括注释行，不解释了哈。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">For命令例3：****************************************</span><br><span class="line"></span><br><span class="line">另外&#x2F;F参数还可以以输出命令的结果看这个例子</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">FOR &#x2F;F &quot;delims&#x3D;&quot; %%i in (&#39;net user&#39;) do @echo %%i</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">这样你本机全部帐号名字就出来了把扩号内的内容用两个单引号引起来就表示那个当命令执行,FOR会返回命令的每行结果,加那个&quot;delims&#x3D;&quot; 是为了让我空格的行能整行显示出来,不加就只显示空格左边一列!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">基本上讲完了FOR的基本用法了...如果你看过FOR的系统帮助,你会发现他下面还有一些特定义的变量,这些我先不讲.大家因该都累了吧!你不累我累啊....</span><br><span class="line"></span><br><span class="line">所谓文武之道，一张一弛，现休息一下。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第三章 FOR命令中的变量</span><br><span class="line"></span><br><span class="line">FOR命令中有一些变量,他们的用法许多新手朋友还不太了解,今天给大家讲解他们的用法!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">先把FOR的变量全部列出来:</span><br><span class="line">     ~I          - 删除任何引号(&quot;)，扩展 %I</span><br><span class="line">     %~fI        - 将 %I 扩展到一个完全合格的路径名</span><br><span class="line">     %~dI        - 仅将 %I 扩展到一个驱动器号</span><br><span class="line">     %~pI        - 仅将 %I 扩展到一个路径</span><br><span class="line">     %~nI        - 仅将 %I 扩展到一个文件名</span><br><span class="line">     %~xI        - 仅将 %I 扩展到一个文件扩展名</span><br><span class="line">     %~sI        - 扩展的路径只含有短名</span><br><span class="line">     %~aI        - 将 %I 扩展到文件的文件属性</span><br><span class="line">     %~tI        - 将 %I 扩展到文件的日期&#x2F;时间</span><br><span class="line">     %~zI        - 将 %I 扩展到文件的大小</span><br><span class="line">     %~$PATH:I   - 查找列在路径环境变量的目录，并将 %I 扩展</span><br><span class="line">                   到找到的第一个完全合格的名称。如果环境变量名</span><br><span class="line">                   未被定义，或者没有找到文件，此组合键会扩展到</span><br><span class="line">                   空字符串</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">我们可以看到每行都有一个大写字母&quot;I&quot;,这个I其实就是我们在FOR带入的变量,我们FOR语句代入的变量名是什么,这里就写什么.</span><br><span class="line">比如:FOR &#x2F;F  %%z IN (&#39;set&#39;) DO @echo %%z</span><br><span class="line">这里我们代入的变量名是z那么我们就要把那个I改成z,例如%~fI改为%~fz</span><br><span class="line">至于前面的%~p这样的内容就是语法了!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">好开始讲解:</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">一、 ~I          - 删除任何引号(&quot;)，扩展 %I</span><br><span class="line"></span><br><span class="line">这个变量的作用就如他的说明,删除引号!</span><br><span class="line">我们来看这个例子:</span><br><span class="line">首先建立临时文件temp.txt，内容如下</span><br><span class="line">&quot;1111</span><br><span class="line">&quot;2222&quot;</span><br><span class="line">3333&quot;</span><br><span class="line">&quot;4444&quot;44</span><br><span class="line">&quot;55&quot;55&quot;55</span><br><span class="line"></span><br><span class="line">可建立个BAT文件代码如下:</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">echo ^&quot;1111&gt;temp.txt</span><br><span class="line">echo &quot;2222&quot;&gt;&gt;temp.txt</span><br><span class="line">echo 3333^&quot;&gt;&gt;temp.txt</span><br><span class="line">echo &quot;4444&quot;44&gt;&gt;temp.txt</span><br><span class="line">echo ^&quot;55&quot;55&quot;55&gt;&gt;temp.txt</span><br><span class="line">rem 上面建立临时文件，注意不成对的引号要加转义字符^，重定向符号前不要留空格</span><br><span class="line">FOR &#x2F;F &quot;delims&#x3D;&quot; %%i IN (temp.txt) DO echo  %%~i</span><br><span class="line">pause</span><br><span class="line">del temp.txt</span><br><span class="line">执行后,我们看CMD的回显如下:</span><br><span class="line">1111           #字符串前的引号被删除了</span><br><span class="line">2222           #字符串首尾的引号都被删除了</span><br><span class="line">3333&quot;          #字符串前无引号，后面的引号保留</span><br><span class="line">4444&quot;44        #字符串前面的引号删除了，而中间的引号保留</span><br><span class="line">55&quot;55&quot;55       #字符串前面的引号删除了，而中间的引号保留</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">和之前temp.txt中的内容对比一下,我们会发现第1、2、5行的引号都消失了,这就是删除引号~i的作用了!</span><br><span class="line">删除引号规则如下(BAT兄补充!)</span><br><span class="line">1、若字符串首尾同时存在引号，则删除首尾的引号；</span><br><span class="line">2、若字符串尾不存在引号，则删除字符串首的引号；</span><br><span class="line">3、如果字符串中间存在引号，或者只在尾部存在引号，则不删除。</span><br><span class="line"></span><br><span class="line">龙卷风补充：无头不删，有头连尾删。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">二、 %~fI        - 将 %I 扩展到一个完全合格的路径名</span><br><span class="line"></span><br><span class="line">看例子:</span><br><span class="line">把代码保存放在随便哪个地方,我这里就放桌面吧.</span><br><span class="line">FOR &#x2F;F &quot;delims&#x3D;&#x3D;&quot; %%i IN (&#39;dir &#x2F;b&#39;) DO @echo  %%~fi</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">执行后显示内容如下</span><br><span class="line">C:\Documents and Settings\Administrator\桌面\test.bat</span><br><span class="line">C:\Documents and Settings\Administrator\桌面\test.vbs</span><br><span class="line">当我把代码中的 %%~fi直接改成%%i</span><br><span class="line">FOR &#x2F;F &quot;delims&#x3D;&#x3D;&quot; %%i IN (&#39;dir &#x2F;b&#39;) DO @echo  %%i</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">执行后就会显示以下内容：</span><br><span class="line">test.bat</span><br><span class="line">test.vbs</span><br><span class="line"></span><br><span class="line">通过对比,我们很容易就看出没有路径了,这就是&quot;将 %I 扩展到一个完全合格的路径名&quot;的作用</span><br><span class="line">也就是如果%i变量的内容是一个文件名的话,他就会把这个文件所在的绝对路径打印出来,而不只单单打印一个文件名,自己动手动实验下就知道了!</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">三、 %~dI        - 仅将 %I 扩展到一个驱动器号</span><br><span class="line"></span><br><span class="line">看例子:</span><br><span class="line">代码如下,我还是放到桌面执行!</span><br><span class="line">FOR &#x2F;F &quot;delims&#x3D;&#x3D;&quot; %%i IN (&#39;dir &#x2F;b&#39;) DO @echo  %%~di</span><br><span class="line">pause</span><br><span class="line">执行后我CMD里显示如下</span><br><span class="line">C:</span><br><span class="line">C:</span><br><span class="line">我桌面就两个文件test.bat,test.vbs,%%~di作用是,如果变量%%i的内容是一个文件或者目录名,他就会把他这文件</span><br><span class="line">或者目录所在的盘符号打印出来!</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">四、 %~pI        - 仅将 %I 扩展到一个路径</span><br><span class="line"></span><br><span class="line">这个用法和上面一样,他只打印路径不打印文件名字</span><br><span class="line">FOR &#x2F;F &quot;delims&#x3D;&#x3D;&quot; %%i IN (&#39;dir &#x2F;b&#39;) DO @echo  %%~pi</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">我就不打结果了,大家自己复制代码看结果吧,下面几个都是这么个用法,代码给出来,大家自己看结果吧!</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">五、 %~nI        - 仅将 %I 扩展到一个文件名</span><br><span class="line">只打印文件名字</span><br><span class="line">FOR &#x2F;F &quot;delims&#x3D;&#x3D;&quot; %%i IN (&#39;dir &#x2F;b&#39;) DO @echo  %%~ni</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">六、 %~xI        - 仅将 %I 扩展到一个文件扩展名</span><br><span class="line">只打印文件的扩展名</span><br><span class="line">FOR &#x2F;F &quot;delims&#x3D;&#x3D;&quot; %%i IN (&#39;dir &#x2F;b&#39;) DO @echo  %%~xi</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">七、 %~sI        - 扩展的路径只含有短名</span><br><span class="line">打印绝对短文件名</span><br><span class="line">FOR &#x2F;F &quot;delims&#x3D;&#x3D;&quot; %%i IN (&#39;dir &#x2F;b&#39;) DO @echo  %%~si</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">八、 %~aI        - 将 %I 扩展到文件的文件属性</span><br><span class="line">打印文件的属性</span><br><span class="line">FOR &#x2F;F &quot;delims&#x3D;&#x3D;&quot; %%i IN (&#39;dir &#x2F;b&#39;) DO @echo  %%~ai</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">九、 %~tI        - 将 %I 扩展到文件的日期&#x2F;时间</span><br><span class="line">打印文件建立的日期</span><br><span class="line">FOR &#x2F;F &quot;delims&#x3D;&#x3D;&quot; %%i IN (&#39;dir &#x2F;b&#39;) DO @echo  %%~ti</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">十、 %~zI        - 将 %I 扩展到文件的大小</span><br><span class="line">打印文件的大小</span><br><span class="line">FOR &#x2F;F &quot;delims&#x3D;&#x3D;&quot; %%i IN (&#39;dir &#x2F;b&#39;) DO @echo  %%~zi</span><br><span class="line">pause</span><br><span class="line">上面例子中的&quot;delims&#x3D;&#x3D;&quot;可以改为&quot;delims&#x3D;&quot;，即不要分隔符</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">十一、 %~$PATH:I - 查找列在路径环境变量的目录，并将 %I 扩展</span><br><span class="line">                   到找到的第一个完全合格的名称。如果环境变量名</span><br><span class="line">                   未被定义，或者没有找到文件，此组合键会扩展到</span><br><span class="line">                   空字符串</span><br><span class="line">这是最后一个,和上面那些都不一样,我单独说说!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">然后在把这些代码保存为批处理,放在桌面。</span><br><span class="line">@echo off</span><br><span class="line">FOR &#x2F;F &quot;delims&#x3D;&quot; %%i IN (“notepad.exe”) DO echo  %%~$PATH:i</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">龙卷风补充：上面代码显示结果为C:\WINDOWS\system32\notepad.exe</span><br><span class="line"></span><br><span class="line">他的意思就在PATH变量里指定的路径里搜索notepad.exe文件，如果有notepad.exe则会把他所在绝对路径打印出来，没有就打印一个错误！</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">好了,FOR的的变量就介绍到这了!</span><br><span class="line">                                  BY  伤脑筋</span><br><span class="line"></span><br><span class="line">好了，理科学习告一段落，请欣赏《千字文》第一节：</span><br><span class="line"></span><br><span class="line">【原文】</span><br><span class="line"></span><br><span class="line">　　天(tiān) 地(dì) 玄(xuán) 黄(huáng) ，</span><br><span class="line"></span><br><span class="line">　　宇(yǔ) 宙(zhòu) 洪(hóng) 荒(huāng) 。</span><br><span class="line"></span><br><span class="line">　　日(rì) 月(yuè) 盈(yíng) 昃(zè) ，</span><br><span class="line"></span><br><span class="line">　　辰(chén) 宿(xiù) 列(liè) 张(zhāng) 。</span><br><span class="line"></span><br><span class="line">　　（1）玄黄：形容在远古地球刚诞生时的景象，新的天体正在组成，天地之间一片浑沌炽热。天空因大气燃烧而赤黑又变化莫测，所以称之为“天玄”。大地因燃烧而变得焦黄，所以称之为“地黄”。玄，黑中带红的颜色，后来多指黑色；深远莫测的。黄，黄色，与红、蓝合称三原色。出自于《易经》：夫玄黄者，天地之杂也，天玄而地黄。</span><br><span class="line"></span><br><span class="line">　　（2）宇宙：时空的总合。宇，上下四方无限广大的空间。宙，古往今来无限久远的时间。出自于《淮南子》：上下四方叫作宇,古往今来叫作宙。</span><br><span class="line"></span><br><span class="line">　　（3）洪荒：远古时期地球有很大的面积以及很长一段时间被洪水所淹没，到处显得荒芜凄凉。洪，大；大水。荒，杂草丛生。出自于西汉? 杨雄《太玄经》：洪荒之世。</span><br><span class="line"></span><br><span class="line">　　（4）盈：充满，此指月圆。月亮盈亏的变化，阴历每月十五日是满月，又称望月、盈月；三十日月尽，没有月光。</span><br><span class="line"></span><br><span class="line">　　（5）昃：倾斜，指太阳西斜。太阳每天东升西落，早上从东边升起，正午时位置最高，过了正午向西边斜落。</span><br><span class="line"></span><br><span class="line">　　（6）辰宿：星辰。辰：星体的总称。宿：星群、星座。单颗星体称星，一颗以上称宿。</span><br><span class="line"></span><br><span class="line">　　（7）列张：陈列分布。列，陈列。张，分布。出自《淮南子》：天设日月，列星辰，调阴阳，张四时。</span><br><span class="line"></span><br><span class="line">　　【译文参考】</span><br><span class="line"></span><br><span class="line">　　在地球刚诞生的时候，地球的四周被浑沌不清、变幻莫测的赤黑色气体所包围，而大地则是枯黄的一片。到处都是大水，举目所见一片荒凉。</span><br><span class="line"></span><br><span class="line">　　经过很长的一段时间后，天地之间慢慢澄清了，这时可以看到太阳、月亮很有规律的在天空中运行着，日出日落，月圆月缺。在无边无际的天空中布满了大大小小的星星。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第四章 批处理中的变量</span><br><span class="line"></span><br><span class="line">批处理中的变量,我把他分为两类,分别为&quot;系统变量&quot;和&quot;自定义变量&quot;</span><br><span class="line"></span><br><span class="line">我们现在来详解这两个变量!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">一、系统变量</span><br><span class="line"></span><br><span class="line">他们的值由系统将其根据事先定义的条件自动赋值,也就是这些变量系统已经给他们定义了值,</span><br><span class="line">不需要我们来给他赋值,我们只需要调用而以!  我把他们全部列出来!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%ALLUSERSPROFILE% 本地 返回“所有用户”配置文件的位置。</span><br><span class="line">%APPDATA% 本地 返回默认情况下应用程序存储数据的位置。</span><br><span class="line">%CD% 本地 返回当前目录字符串。</span><br><span class="line">%CMDCMDLINE% 本地 返回用来启动当前的 Cmd.exe 的准确命令行。</span><br><span class="line">%CMDEXTVERSION% 系统 返回当前的“命令处理程序扩展”的版本号。</span><br><span class="line">%COMPUTERNAME%  系统 返回计算机的名称。</span><br><span class="line">%COMSPEC%  系统 返回命令行解释器可执行程序的准确路径。</span><br><span class="line">%DATE%  系统 返回当前日期。使用与 date &#x2F;t 命令相同的格式。由 Cmd.exe 生成。有关</span><br><span class="line"></span><br><span class="line">date 命令的详细信息，请参阅 Date。</span><br><span class="line">%ERRORLEVEL%  系统 返回上一条命令的错误代码。通常用非零值表示错误。</span><br><span class="line">%HOMEDRIVE%  系统 返回连接到用户主目录的本地工作站驱动器号。基于主目录值而设置。用</span><br><span class="line"></span><br><span class="line">户主目录是在“本地用户和组”中指定的。</span><br><span class="line">%HOMEPATH%  系统 返回用户主目录的完整路径。基于主目录值而设置。用户主目录是在“本地用户和组”中指定的。</span><br><span class="line"></span><br><span class="line">%HOMESHARE%  系统 返回用户的共享主目录的网络路径。基于主目录值而设置。用户主目录是</span><br><span class="line"></span><br><span class="line">在“本地用户和组”中指定的。</span><br><span class="line">%LOGONSERVER%  本地 返回验证当前登录会话的域控制器的名称。</span><br><span class="line">%NUMBER_OF_PROCESSORS%  系统 指定安装在计算机上的处理器的数目。</span><br><span class="line">%OS%  系统 返回操作系统名称。Windows 2000 显示其操作系统为 Windows_NT。</span><br><span class="line">%PATH% 系统 指定可执行文件的搜索路径。</span><br><span class="line">%PATHEXT% 系统 返回操作系统认为可执行的文件扩展名的列表。</span><br><span class="line">%PROCESSOR_ARCHITECTURE%  系统 返回处理器的芯片体系结构。值：x86 或 IA64 基于</span><br><span class="line"></span><br><span class="line">Itanium</span><br><span class="line">%PROCESSOR_IDENTFIER% 系统 返回处理器说明。</span><br><span class="line">%PROCESSOR_LEVEL%  系统 返回计算机上安装的处理器的型号。</span><br><span class="line">%PROCESSOR_REVISION% 系统 返回处理器的版本号。</span><br><span class="line">%PROMPT% 本地 返回当前解释程序的命令提示符设置。由 Cmd.exe 生成。</span><br><span class="line">%RANDOM% 系统 返回 0 到 32767 之间的任意十进制数字。由 Cmd.exe 生成。</span><br><span class="line">%SYSTEMDRIVE% 系统 返回包含 Windows server operating system 根目录（即系统根目录）</span><br><span class="line"></span><br><span class="line">的驱动器。</span><br><span class="line">%SYSTEMROOT%  系统 返回 Windows server operating system 根目录的位置。</span><br><span class="line">%TEMP% 和 %TMP% 系统和用户 返回对当前登录用户可用的应用程序所使用的默认临时目录。</span><br><span class="line"></span><br><span class="line">有些应用程序需要 TEMP，而其他应用程序则需要 TMP。</span><br><span class="line">%TIME% 系统 返回当前时间。使用与 time &#x2F;t 命令相同的格式。由 Cmd.exe 生成。有关</span><br><span class="line"></span><br><span class="line">time 命令的详细信息，请参阅 Time。</span><br><span class="line">%USERDOMAIN% 本地 返回包含用户帐户的域的名称。</span><br><span class="line">%USERNAME% 本地 返回当前登录的用户的名称。</span><br><span class="line">%USERPROFILE% 本地 返回当前用户的配置文件的位置。</span><br><span class="line">%WINDIR% 系统 返回操作系统目录的位置。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">这么多系统变量,我们如何知道他的值是什么呢?</span><br><span class="line">在CMD里输入  echo %WINDIR%</span><br><span class="line">这样就能显示一个变量的值了!</span><br><span class="line"></span><br><span class="line">举个实际例子,比如我们要复制文件到当前帐号的启动目录里就可以这样</span><br><span class="line"></span><br><span class="line">copy d:\1.bat &quot;%USERPROFILE%\「开始」菜单\程序\启动\&quot;</span><br><span class="line"></span><br><span class="line">%USERNAME% 本地 返回当前登录的用户的名称。  注意有空格的目录要用引号引起来</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">另外还有一些系统变量,他们是代表一个意思,或者一个操作!</span><br><span class="line"></span><br><span class="line">他们分别是%0 %1 %2 %3 %4 %5 ......一直到%9 还有一个%*</span><br><span class="line"></span><br><span class="line">%0 这个有点特殊,有几层意思,先讲%1-%9的意思.</span><br><span class="line"></span><br><span class="line">%1 返回批处理的第一个参数</span><br><span class="line">%2 返回批处理的第二个参数</span><br><span class="line">%3-%9依此推类</span><br><span class="line"></span><br><span class="line">反回批处理参数?到底怎么个返回法?</span><br><span class="line"></span><br><span class="line">我们看这个例子,把下面的代码保存为test.BAT然后放到C盘下</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">echo %1 %2 %3 %4</span><br><span class="line">echo %1</span><br><span class="line">echo %2</span><br><span class="line">echo %3</span><br><span class="line">echo %4</span><br><span class="line"></span><br><span class="line">进入CMD,输入cd c:\</span><br><span class="line">然后输入 test.bat 我是第一个参数 我是第二个参数  我是第三个参数  我是第四个参数</span><br><span class="line"></span><br><span class="line">注意中间的空格,我们会看到这样的结果:</span><br><span class="line"></span><br><span class="line">我是第一个参数 我是第二个参数 我是第三个参数 我是第四个参数</span><br><span class="line">我是第一个参数</span><br><span class="line">我是第二个参数</span><br><span class="line">我是第三个参数</span><br><span class="line">我是第四个参数</span><br><span class="line"></span><br><span class="line">对比下代码,%1就是”我是第一个参数”  %2就是”我是第二个参数”</span><br><span class="line">怎么样理解了吧!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">这些%1和%9可以让批处理也能带参数运行,大大提高批处理功能!</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">还有一个%*  他是什么呢?他的作用不是很大,只是返回参数而已,不过他是一次返回全部参数的值,不用在输入%1 %2来确定一个个的</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例子</span><br><span class="line">@echo off</span><br><span class="line">echo %*</span><br><span class="line"></span><br><span class="line">同样保存为test.bat 放到C盘</span><br><span class="line">进入CMD,输入cd c:\</span><br><span class="line">然后输入 test.bat 我是第一个参数 我是第二个参数  我是第三个参数  我是第四个参数</span><br><span class="line"></span><br><span class="line">可以看到他一次把全部参数都显示出来了</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">好现在开始讲那个比较特殊的%0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%0  这个不是返回参数的值了,他有两层意思!</span><br><span class="line"></span><br><span class="line">第一层意思:返回批处理所在绝对路径</span><br><span class="line"></span><br><span class="line">例子:</span><br><span class="line">@echo off</span><br><span class="line">echo %0</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">保存为test.BAT放在桌面运行,会显示如下结果</span><br><span class="line">&quot;C:\Documents and Settings\Administrator\桌面\test.bat&quot;</span><br><span class="line"></span><br><span class="line">他把当前批处理执行的所在路经打印出来了,这就是返回批处理所在绝对路径的意思</span><br><span class="line"></span><br><span class="line">第二层意思:无限循环执行BAT</span><br><span class="line"></span><br><span class="line">例子:</span><br><span class="line">@echo off</span><br><span class="line">net user</span><br><span class="line">%0</span><br><span class="line"></span><br><span class="line">保存为BAT执行,他就会无限循环执行net user这条命令,直到你手动停止.</span><br><span class="line">龙卷风补充：其实%0就是第一参数%1前面那个参数，当然就是批处理文件名（包括路径）。</span><br><span class="line"></span><br><span class="line">以上就是批处理中的一些系统变量,另外还有一些变量,他们也表示一些功能,</span><br><span class="line">FOR命令中的那些就是,FOR变量已经说过,就不讲了.</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">二、自定义变量</span><br><span class="line"></span><br><span class="line">故名思意,自定义变量就是由我们来给他赋予值的变量</span><br><span class="line"></span><br><span class="line">要使用自定义变量就得使用set命令了,看例子.</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">set var&#x3D;我是值</span><br><span class="line">echo %var%</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">保存为BAT执行,我们会看到CMD里返回一个  &quot;我是值&quot;</span><br><span class="line"></span><br><span class="line">var为变量名,&#x3D;号右变的是要给变量的值</span><br><span class="line">这就是最简单的一种设置变量的方法了</span><br><span class="line"></span><br><span class="line">如果我们想让用户手工输入变量的值,而不是在代码里指定,可以用用set命令的&#x2F;p参数</span><br><span class="line"></span><br><span class="line">例子:</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">set &#x2F;p var&#x3D;请输入变量的值</span><br><span class="line">echo %var%</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">var变量名  &#x3D;号右边的是提示语,不是变量的值</span><br><span class="line">变量的值由我们运行后自己用键盘输入!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">好了批处理的变量先介绍到这,关于set命令,下次再写个专门的文章吧.</span><br><span class="line">                                                   by 伤脑筋</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">休息一下，看点其它的：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------------------------</span><br><span class="line">临死时人会见到什么?</span><br><span class="line">----------------------------</span><br><span class="line">由于医学的日渐发达，越来越多的病人有了“起死复生”的经历。他们从生命的虚无尽头走出来，重新投向洒满阳光的人世间，再次见到熟悉的亲人朋友，感慨自然很多。但在这些感慨中，有一些是他们临死时的亲见亲闻。我们尚且不要怀疑其真实性有多大，先来听听又何妨呢？毕竟他们对这些见闻有着深切的体验和真实的回忆。科学家对这个命题也极感兴趣，他们访问了很多有过“死亡经历”的人，将其见闻总结起来，进行归纳与分析，试图破解人类死亡之谜。统计数字中，大多数人都提到临死时有一种分外安详和放松的感觉。他们的意识好像飘离了身体，在一片虚无缥缈中升腾，然后会通过一个完全的暗夜，直到看见黎明的曙光，在黑与白之间他们会做一些选择与挣扎，只有最后留恋光明的人才会重新回到人间。有些人还会在临死时看见自己所有的亲朋好友，包括那些已经过世的。他们个个都像天使一样形象光辉高大；有人在这时候还能把自己生前的事迹再经历一遍，就像在看一场电影……</span><br><span class="line">————选自《世界未解之谜》</span><br><span class="line"></span><br><span class="line">第五章 set命令详解</span><br><span class="line"></span><br><span class="line">很久没发贴了,今天来写点讲BAT的新手教学贴!</span><br><span class="line"></span><br><span class="line">在上一贴中我简单的介绍了一下SET设置自定义变量的作用,现在我来具体讲一下set的其他功能.</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">一、用set命令设置自定义变量</span><br><span class="line"></span><br><span class="line">显示、设置或删除 cmd.exe 环境变量。</span><br><span class="line">SET [variable&#x3D;[string]]</span><br><span class="line">  variable  指定环境变量名。</span><br><span class="line">  string    指定要指派给变量的一系列字符串。</span><br><span class="line">要显示当前环境变量，键入不带参数的 SET。</span><br><span class="line">SET 命令不允许变量名含有等号。</span><br><span class="line"></span><br><span class="line">注意：以下用法将清除变量variable的值，使其变成未定义状态。</span><br><span class="line">SET variable&#x3D;</span><br><span class="line">上面等号后面无任何符号，如果写成SET variable&#x3D;&quot;&quot;，此时变量值并不为空，而是等于两个引号，即&quot;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例子:</span><br><span class="line">@echo off</span><br><span class="line">set var&#x3D;我是值</span><br><span class="line">echo %var%</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">请看 set var&#x3D;我是值 ,这就是BAT直接在批处理中设置变量的方法!</span><br><span class="line">set 是命令   var是变量名  &#x3D;号右边的&quot;我是值&quot;是变量的值</span><br><span class="line">在批处理中我们要引用这个变就把var变量名用两个%(百分号)扩起来,如%var%</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SET还可以提供一个交互界面,让用户自己输入变量的值,然后我们在来根据这个值来做相应操作,现在我就来说说SET的这种语法,只需要加一个&quot;&#x2F;P&quot;参数就可以了!</span><br><span class="line">SET &#x2F;P variable&#x3D;[promptString]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例子:</span><br><span class="line">@echo off</span><br><span class="line">set &#x2F;p var&#x3D;请输入变量的值:</span><br><span class="line">echo 您输入了 %var%  ~_~</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">set &#x2F;p 是命令语法  var是变量名    &#x3D;号右边的&quot;请输入变量的值: &quot;,这个是提示语,不是变量的值了!</span><br><span class="line">运行后,我们在提示语后面直接输入1,就会显示一行您输入了 1 ~_~</span><br><span class="line"></span><br><span class="line">好了,先回顾到这,现在讲SET其他功能</span><br><span class="line"></span><br><span class="line">使用set &#x2F;?查看SET的帮助我们发现SET除了我上面讲的</span><br><span class="line">SET [variable&#x3D;[string]]</span><br><span class="line">SET &#x2F;P variable&#x3D;[promptString]</span><br><span class="line">这两种语法外,还有如下几种语法:</span><br><span class="line">SET &#x2F;A expression</span><br><span class="line">环境变量替换已如下增强:</span><br><span class="line">%PATH:str1&#x3D;str2%</span><br><span class="line">%PATH:~10,5%</span><br><span class="line">%PATH:~-10%</span><br><span class="line">%PATH:~0,-2%</span><br><span class="line"></span><br><span class="line">这机种语法有什么用处呢?下面我们来一个个讲解他们!</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">二、用set命令进行简单计算</span><br><span class="line"></span><br><span class="line">语法：SET &#x2F;A expression</span><br><span class="line">&#x2F;A 命令行开关指定等号右边的字符串为被评估的数字表达式。该表达式</span><br><span class="line">评估器很简单并以递减的优先权顺序支持下列操作:</span><br><span class="line">    ()                  -分组</span><br><span class="line">    ! ~ -               -一元运算符</span><br><span class="line">    * &#x2F; %               -算数运算符</span><br><span class="line">    + -                 -算数运算符</span><br><span class="line">    &lt;&lt; &gt;&gt;               -二进制逻辑移位</span><br><span class="line">    &amp;                   -二进制按位“与”</span><br><span class="line">    ^                   -二进制按位“异”</span><br><span class="line">    |                   -二进制按位“或”</span><br><span class="line">    &#x3D; *&#x3D; &#x2F;&#x3D; %&#x3D; +&#x3D; -&#x3D;    -算数赋值</span><br><span class="line">    &amp;&#x3D; ^&#x3D; |&#x3D; &lt;&lt;&#x3D; &gt;&gt;&#x3D;    -二进制运算赋值</span><br><span class="line">    ,                   -表达式分隔符</span><br><span class="line"></span><br><span class="line">如果 SET &#x2F;A 在命令脚本外的命令行执行的，那么它显示该表达式的最后值。</span><br><span class="line">除十六进制有 0x 前缀， 八进制有 0 前缀的，数字值为十进位数字。</span><br><span class="line">因此， 0x12 与 18 和 022相同。请注意八进制公式可能很容易搞混:</span><br><span class="line"> 08 和 09 是无效的数字，因为 8 和 9 不是有效的八进制位数。</span><br><span class="line"></span><br><span class="line">上面这些是系统帮助里的内容,看着是不是有点晕，没关系我来简单解释一下:</span><br><span class="line">set的&#x2F;A参数就是让SET可以支持数学符号进行加减等一些简单数学运算!</span><br><span class="line"></span><br><span class="line">注意：一般的运算常为十进制运算，如果数字字符串最左边为0，将被认为是八进制，从而出错。比如，0812之类的数字不能参与十进制运算，转换方法为：10812-10000</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">set aa&#x3D;0812</span><br><span class="line">set &#x2F;a aa&#x3D;1%aa%-10000</span><br><span class="line">echo %aa%</span><br><span class="line">结果为：812</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">  @echo off</span><br><span class="line">  set &#x2F;p input&#x3D;请输入计算表达式：</span><br><span class="line">  set &#x2F;a var&#x3D;%input%</span><br><span class="line">  echo 计算结果：%input%&#x3D;%var%</span><br><span class="line">  pause</span><br><span class="line"></span><br><span class="line">上面的例子是龙卷风设计的，很好用哟，请看下面几个运算过程：</span><br><span class="line">注意：DOS计算只能进行整数运算，精确到整数</span><br><span class="line"></span><br><span class="line">请输入计算表达式：1+9+20+30-10</span><br><span class="line">计算结果：1+9+20+30-10&#x3D;50</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">请输入计算表达式：10&#x2F;3    #除法只能精确到整数</span><br><span class="line">计算结果：10&#x2F;3&#x3D;3</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">请输入计算表达式：-100+62  #负数</span><br><span class="line">计算结果：-100+62&#x3D;-38</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">请输入计算表达式：100%3    ＃求余数</span><br><span class="line">计算结果：100%3&#x3D;1</span><br><span class="line">请按任意键继续. . .</span><br><span class="line">注意：以上的求余数运算符%在批处理程序中必须写成%%</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">请输入计算表达式：(25+75)*2&#x2F;(15+5)   #括号</span><br><span class="line">计算结果：(25+75)*2&#x2F;(15+5)&#x3D;10</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">请输入计算表达式：1234567890*9876543210   #范围</span><br><span class="line">无效数字。数字精确度限为 32 位。</span><br><span class="line">计算结果：1234567890*9876543210&#x3D;</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">注意：上面的计算过程显示，DOS计算只能精确到32位，这个32位是指二进制32位，其中最高位为符号位（0为正，1为负），低位31位为数值。31个1换成十进制为2147483647，所以DOS计算的有效值范围是-2147483648至2147483647，超出该数值范围时计算出错，请看下面的计算过程：</span><br><span class="line"></span><br><span class="line">请输入计算表达式：2147483647-1    #最大值减1，值有效</span><br><span class="line">计算结果：2147483647-1&#x3D;2147483646</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">请输入计算表达式：2147483647+1    #最大值加1，出错，结果为最小值</span><br><span class="line">计算结果：2147483647+1&#x3D;-2147483648</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">请输入计算表达式：-2147483648-1   #最小值减1，出错，结果为最大值</span><br><span class="line">计算结果：-2147483648-1&#x3D;2147483647</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">运行set &#x2F;a a&#x3D;1+1,b&#x3D;2+1,c&#x3D;3+1后会显示一个4,但我们用</span><br><span class="line">echo %a% %b% %c%后看结果,会发现其他数学运算也有效果!,这就是表达式分隔符&quot;逗&quot;号的</span><br><span class="line">作用!</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">有时候我们需要直接在原变量进行加减操作就可以用这种语法</span><br><span class="line">set &#x2F;a var+&#x3D;1  这样的语法对应原始语法就是set &#x2F;a var &#x3D; %var% + 1</span><br><span class="line">都是一样的结果,在原变量的值上在进行数学运算,不过这样写简单一点</span><br><span class="line">再来一个:</span><br><span class="line">set &#x2F;a var*&#x3D;2</span><br><span class="line">其他都这么用,只要帮助里有这个语法!</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">另外还有一些用逻辑或取余操作符,这些符号,按照上面的使用方法会报错的</span><br><span class="line"></span><br><span class="line">比如我们在CMD里输入set &#x2F;a var&#x3D;1 &amp; 1 &quot;与运算&quot;,他并不会显示为1,而是报错,</span><br><span class="line">为什么?对于这样的&quot;逻辑或取余操作符&quot;,我们需要把他们用双引号引起来,也可以用转义字符^，看例子</span><br><span class="line"></span><br><span class="line">set &#x2F;a var&#x3D; 1 &quot;&amp;&quot; 1 这样结果就显示出来了,其他逻辑或取余操作符用法</span><br><span class="line">set &#x2F;a var&#x3D; 1 &quot;+&quot; 1 异运算</span><br><span class="line">set &#x2F;a var&#x3D; 1 &quot;%&quot; 1  取模运算</span><br><span class="line">set &#x2F;a var&#x3D; 3 &quot;&lt;&lt;&quot; 2 左移位运算， 3的二进制为11，左移2位为1100，换成十进制就是12，自行验证</span><br><span class="line">set &#x2F;a var&#x3D; 4 &quot;&gt;&gt;&quot; 2右移位运算，4的二进制为100，右移动2位为1，结果为1</span><br><span class="line"></span><br><span class="line">龙卷风补充：凡是按位计算均需换算成二进制。</span><br><span class="line"></span><br><span class="line">思考题：求2的n次方</span><br><span class="line">参考答案：</span><br><span class="line">@echo off</span><br><span class="line">set &#x2F;p n&#x3D;请输入2的几次方: </span><br><span class="line">set &#x2F;a num&#x3D;1^&lt;^&lt;n</span><br><span class="line">echo %num%</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">请输入2的几次方: 3</span><br><span class="line">8</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">请输入2的几次方: 10</span><br><span class="line">1024</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">请输入2的几次方: 15</span><br><span class="line">32768</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">休息一下！</span><br><span class="line"></span><br><span class="line">----------------------------</span><br><span class="line">史前超文明谜团</span><br><span class="line">----------------------------</span><br><span class="line">    奥克洛（Oklo）是非洲加蓬共和国一个铀矿的名字，法国有一些工厂使用从加蓬进口的铀矿石。1972年6月7日，法国科学家皮尔里特在用质谱计分析天然丰度的六氟化铀时，惊讶地发现，这批进口铀矿石已被人利用过了。因为这批铀矿石的含铀量相当低，铀矿石的一般含铀量为0.72%，而奥克洛铀矿石的含铀量却不足0.3%，和我们现有的核反应堆的废料几乎相同。</span><br><span class="line">    这件事引起了法国原子能委员会的高度重视。为此，许多科学家赶赴矿区进行考察研究。不久，奥克洛爆出了一条震惊世界的新闻：这里有一个古老的核反应堆，而且核反应堆的构成非常合理。法国政府宣布的这一发现，震惊了全世界。</span><br><span class="line">    这个核反应堆是由6个区域的大约500吨铀矿石组成，它的输出功率很低，只有10到100千瓦。据考证，该矿成矿年代大约在20亿年前，核反应堆在成矿后不久就开始运转，运转时间长达50万年之久,核反应所产生的废物，并没有扩散，而是局限在矿区周围。面对这个保存完整、结构合理的核反应堆，科学家们膛目结舌。</span><br><span class="line">--------------</span><br><span class="line">耐人寻味的疑问</span><br><span class="line">--------------</span><br><span class="line">    是谁在20亿年前留下了这个古老的核反应堆？是外星人的作品，还是前一代地球文明的遗迹？20亿年前的反应堆又怎么来解释呢？这个铀矿到底是怎么回事呢？有人认为这是20亿年前的天外来客的杰作。他们乘坐宇宙飞船来到地球上，选择了奥克洛这个地方建造了原子反应堆，以原子裂变或聚变所释放的能量为能源动力，为他们在地球上的活动提供能量。后来，他们离开了地球，返回了他们的“故里”，就在地球上留下了这座极古老而又神秘的原子反应堆。还有一种推断认为这是史前文明所留下的遗迹。也就是说，20亿年前，在今天我们叫做奥克洛的地方，可能存在着高度发达的文明，远远超过今天的人类文明。</span><br><span class="line">————选自《世界未解之谜》</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">三、用set命令进行字符串处理</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1、字符串替换</span><br><span class="line"></span><br><span class="line">好了，符号说到这，现在说%PATH:str1&#x3D;str2%</span><br><span class="line">上面语法的意思就是：将字符串变量%PATH%中的str1替换为str2</span><br><span class="line">这个是替换变量值的内容,看例子</span><br><span class="line">@echo off</span><br><span class="line">set a&#x3D; bbs. verybat. cn</span><br><span class="line">echo 替换前的值: &quot;%a%&quot;</span><br><span class="line">set var&#x3D;%a: &#x3D;%</span><br><span class="line">echo 替换后的值: &quot;%var%&quot;</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">运行显示：（龙卷风添加）</span><br><span class="line">替换前的值: &quot; bbs. verybat. cn&quot;</span><br><span class="line">替换后的值: &quot;bbs.verybat.cn&quot;</span><br><span class="line"></span><br><span class="line">对比一下,我们发现他把变量%a%的空格给替换掉了,从这个例子,我们就可以发现</span><br><span class="line">%PATH:str1&#x3D;str2%这个操作就是把变量%PATH%的里的str1全部用str2替换</span><br><span class="line"></span><br><span class="line">比如我们把上面的例子改成这样</span><br><span class="line">@echo off</span><br><span class="line">set a&#x3D;bbs.verybat.cn</span><br><span class="line">echo 替换前的值: &quot;%a%&quot;</span><br><span class="line">set var&#x3D;%a:.&#x3D;伤脑筋%</span><br><span class="line">echo 替换后的值: &quot;%var%&quot;</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">运行显示： </span><br><span class="line">替换前的值: &quot;bbs.verybat.cn&quot;</span><br><span class="line">替换后的值: &quot;bbs伤脑筋verybat伤脑筋cn&quot;</span><br><span class="line"></span><br><span class="line">解释set var&#x3D;%a:.&#x3D;伤脑筋%</span><br><span class="line">    set是命令 var是变量名 字a是要进行字符替换的变量的值,&quot;.&quot;为要替换的值,</span><br><span class="line">&quot;伤脑筋&quot;为替换后的值!</span><br><span class="line">执行后就会把变量%a%里面的&quot;.&quot;全部替换为&quot;伤脑筋&quot;</span><br><span class="line">这就是set的替换字符的很好的功能! 替换功能先讲到这，下面将字符串截取功能</span><br><span class="line"></span><br><span class="line">请注意：字符串的替换和截取功能在引用变量的地方均可以，并不一定必须要有set命令</span><br><span class="line">例：</span><br><span class="line">@echo off</span><br><span class="line">set a&#x3D;bbs.verybat.cn</span><br><span class="line">echo 替换前的值: &quot;%a%&quot;</span><br><span class="line">echo 替换后的值: &quot;%a:.&#x3D;伤脑筋%&quot;</span><br><span class="line">pause</span><br><span class="line">此例在echo语句中就替换了字符串，效果一样。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2、字符串截取</span><br><span class="line"></span><br><span class="line">**********************************************</span><br><span class="line">截取功能统一语法格式为：%a:~[m[,n]]%</span><br><span class="line">**********************************************</span><br><span class="line">方括号表示可选，%为变量标识符，a为变量名，不可少，冒号用于分隔变量名和说明部分，符号～可以简单理解为“偏移”即可，m为偏移量（缺省为0），n为截取长度（缺省为全部）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%PATH:~10,5%  这个什么意思,看例子:</span><br><span class="line"></span><br><span class="line">截取功能例子1：</span><br><span class="line">@echo off</span><br><span class="line">set a&#x3D;bbs.verybat.cn</span><br><span class="line">set var&#x3D;%a:~1,2%</span><br><span class="line">echo %var%</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">执行后,我们会发现只显示了&quot;bs&quot;两个字母,我们的变量%a%的值不是为bbs.verybat.cn吗？</span><br><span class="line">怎么只显示了第2个字母和第3个字母&quot;bs&quot;,分析一结果我们就可以很容易看出</span><br><span class="line">%a:~10,5%就是显示变量a里从11位（偏移量10）开始的5个字符!</span><br><span class="line">分析set var&#x3D;%a:~1,2%</span><br><span class="line">  set是命令，var是变量值，a要进行字符操作的变量，&quot;1&quot;从变量&quot;a&quot;第几位开始显示，&quot;2&quot;表示显示几位。</span><br><span class="line">合起来就是把变量a的值从第2位（偏移量1）开始,把2个字符赋予给变量var</span><br><span class="line">这样应该明白了吧~</span><br><span class="line"></span><br><span class="line">其他两种语法</span><br><span class="line">%PATH:~-10%</span><br><span class="line">%PATH:~0,-2%</span><br><span class="line">他们也是显示指定变量指定几位的值的意思</span><br><span class="line"></span><br><span class="line">%PATH:~-10% 看例子</span><br><span class="line"></span><br><span class="line">截取功能例子2：</span><br><span class="line">@echo off</span><br><span class="line">set a&#x3D;bbs.verybat.cn</span><br><span class="line">set var&#x3D;%a:~-3%</span><br><span class="line">echo %var%</span><br><span class="line">pause</span><br><span class="line">运行结果：.cn</span><br><span class="line">这个就是把变量a倒数3位的值给变量VAR</span><br><span class="line"></span><br><span class="line">当然我们也可以改成这样</span><br><span class="line">截取功能例子3：</span><br><span class="line">@echo off</span><br><span class="line">set a&#x3D;bbs.verybat.cn</span><br><span class="line">set var&#x3D;%a:~3%</span><br><span class="line">echo %var%</span><br><span class="line">pause</span><br><span class="line">运行显示：.verybat.cn</span><br><span class="line">这个就是把变量a的从第3位开始后面全部的值给变量VAR</span><br><span class="line"></span><br><span class="line">%PATH:~0,-2%  例子</span><br><span class="line"></span><br><span class="line">截取功能例子4：</span><br><span class="line">@echo off</span><br><span class="line">set a&#x3D;bbs.verybat.cn</span><br><span class="line">set var&#x3D;%a:~0,-3%</span><br><span class="line">echo %var%</span><br><span class="line">pause</span><br><span class="line">执行后,我们发现显示的是&quot;bbs.verybat&quot;,少了&quot;.cn&quot;</span><br><span class="line">从结果分析,很容易分析出,这是把变量a的值从0位开始,</span><br><span class="line">到倒数第三位之间的值全部赋予给var</span><br><span class="line"></span><br><span class="line">如果改成这样</span><br><span class="line"></span><br><span class="line">截取功能例子5：</span><br><span class="line">@echo off</span><br><span class="line">set a&#x3D;bbs.verybat.cn</span><br><span class="line">set var&#x3D;%a:~2,-3%</span><br><span class="line">echo %var%</span><br><span class="line">pause</span><br><span class="line">运行显示：s.verybat</span><br><span class="line">那么他就是显示从第3位（偏移量2）开始减去倒数三位字符的值,并赋予给变量var</span><br><span class="line"></span><br><span class="line">讲得好，例子就是说明问题，为便于记忆，龙卷风小节如下：</span><br><span class="line">a&#x3D;bbs.verybat.cn</span><br><span class="line">%a:~1,2%   ＝“bs”   偏移量1，从第二位开始向右取2位</span><br><span class="line">%a:~-3%    ＝“.cn”  偏移量负3，即倒数3位（也可理解为留下右边3位），右取全部</span><br><span class="line">%a:~3%     ＝“.verybat.cn” 偏移量3（也可理解为去掉左边3位），右取全部</span><br><span class="line">%a:~0,-3%   ＝“bbs.verybat” 偏移量0，右取长度至负3，即倒数3位</span><br><span class="line">%a:~2,-3%   ＝“s.verybat”  偏移量2，右取长度至负3，即倒数3位</span><br><span class="line"></span><br><span class="line">**********************************************</span><br><span class="line">所以，截取功能统一语法格式为：%a:~[m[,n]]%</span><br><span class="line">**********************************************</span><br><span class="line">方括号表示可选，%a%为变量名，不可少，冒号用于分隔变量名和说明部分，符号～可以简单理解为“偏移”即可，m为偏移量（缺省为0），n为截取长度（缺省为全部）</span><br><span class="line">上面所述用法其实相当于vbs函数mid、left、right</span><br><span class="line">%a:~0,n%  相当于函数left(a,n)  取左边n位</span><br><span class="line">%a:~-m%  相当于函数right（a,m） 取右边m位</span><br><span class="line">%a:~m,n% 相当于函数mid(a,m+1,n) 从m+1位开始取n位</span><br><span class="line">%a:~m,-n% 相当于函数mid(a,m+1,len(a)-m-n),从m+1位开始，至倒数n+1位</span><br><span class="line">%a:~m %  相当于函数mid(a,m+1,len(a)-m) 或者right(a,len(a)-m)，从m+1位开始取右边全部。</span><br><span class="line"></span><br><span class="line">思考题目：输入任意字符串，求字符串的长度</span><br><span class="line">参考答案：</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">set &#x2F;p str&#x3D;请输入任意长度的字符串:</span><br><span class="line">echo 你输入了字符串:&quot;%str%&quot;</span><br><span class="line">call :stringlenth &quot;%str%&quot; num</span><br><span class="line">echo 字符串长度为：%num%</span><br><span class="line">pause</span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line">:StringLenth</span><br><span class="line">::---------字符串长度计算子程序</span><br><span class="line">::---------参数%1为字符串(如有空格，请用引号括起来)</span><br><span class="line">::---------参数%2为返回变量名称，不能含空格或特殊字符</span><br><span class="line">::@echo off</span><br><span class="line">set theString&#x3D;%~1</span><br><span class="line">if not defined theString goto :eof</span><br><span class="line">set Return&#x3D;0</span><br><span class="line">:StringLenth_continue</span><br><span class="line">set &#x2F;a Return+&#x3D;1</span><br><span class="line">set thestring&#x3D;%thestring:~0,-1%</span><br><span class="line">if defined thestring goto StringLenth_continue</span><br><span class="line">if not &quot;%2&quot;&#x3D;&#x3D;&quot;&quot; set %2&#x3D;%Return%</span><br><span class="line">goto :eof</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">好了set的一些用法,就介绍到这了,希望对各位有所帮助,时间不早睡觉Zz....</span><br><span class="line"></span><br><span class="line">                                              by 伤脑筋</span><br><span class="line"></span><br><span class="line">休息休息！</span><br><span class="line"></span><br><span class="line">诗曰：　　</span><br><span class="line"></span><br><span class="line">　　混沌未分天地乱，茫茫渺渺无人见。　　</span><br><span class="line">　　自从盘古破鸿蒙，开辟从兹清浊辨。　　</span><br><span class="line">　　覆载群生仰至仁，发明万物皆成善。　　</span><br><span class="line">　　欲知造化会元功，须看西游释厄传。　　</span><br><span class="line"></span><br><span class="line">    《西游记》是我国著名神话小说，是中华五千年文化的见证之一。唐僧乃大唐高僧玄奘法师，往印度求取佛经，致使中华佛家文化大放异彩。</span><br><span class="line">    唐僧：代表古代修行人对佛法的坚定执着之心。虽然唐僧手无缚鸡之力，但他不受金钱、美女、权利的诱惑，面对生死也不改变志向。这些都是古人所推崇的，所以唐僧是师父，其他人再有本事也只能当徒弟了。</span><br><span class="line">    悟空：“空”、“无”都是高层次的体现，故悟空本事最大。悟空的兵器为“定海神针”，寓意佛家的“定”。</span><br><span class="line">    悟能：层次不高，缺点也多，但有点本事。因其缺点多，故又名“八戒”。</span><br><span class="line">    悟净：层次不高，本事不大，仅仅有一个清净之心，故名“悟净”。但清净心也很重要，所以有几次悟空遇难时，乃悟净所救。</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">第六章 if命令讲解</span><br><span class="line"></span><br><span class="line">最近发现有些朋友一老问IF命令的用法,IF命令个人觉得很简单,所以就一直没把发放到新手教学贴里说,现在我给补上一文,希望对各位&quot;非常BAT的&quot;新手朋友们有所帮助.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">现在开始:</span><br><span class="line"></span><br><span class="line">在CMD使用IF &#x2F;?打开IF的系统帮助(自己看我就不全部列出来了),我们会发现IF有3种基本的用法!</span><br><span class="line">执行批处理程序中的条件处理。</span><br><span class="line"></span><br><span class="line">IF [NOT] ERRORLEVEL number command</span><br><span class="line">IF [NOT] string1&#x3D;&#x3D;string2 command</span><br><span class="line">IF [NOT] EXIST filename command</span><br><span class="line"></span><br><span class="line">  NOT               指定只有条件为 false 的情况下， Windows XP 才</span><br><span class="line">                    应该执行该命令。</span><br><span class="line"></span><br><span class="line">  ERRORLEVEL number 如果最后运行的程序返回一个等于或大于</span><br><span class="line">                    指定数字的退出编码，指定条件为 true。</span><br><span class="line"></span><br><span class="line">  string1&#x3D;&#x3D;string2  如果指定的文字字符串匹配，指定条件为 true。</span><br><span class="line"></span><br><span class="line">  EXIST filename    如果指定的文件名存在，指定条件为 true。</span><br><span class="line"></span><br><span class="line">  command           如果符合条件，指定要执行的命令。如果指定的</span><br><span class="line">                     条件为 FALSE，命令后可跟一个执行 ELSE</span><br><span class="line">                      关键字后的命令的 ELSE 命令。</span><br><span class="line"></span><br><span class="line">ELSE 子句必须在 IF 之后出现在同一行上。例如:</span><br><span class="line"></span><br><span class="line">    IF EXIST filename (</span><br><span class="line">        del filename</span><br><span class="line">    ) ELSE (</span><br><span class="line">        echo filename missing</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第一种用法：IF [NOT] ERRORLEVEL number command</span><br><span class="line"></span><br><span class="line">这个用法的基本做用是判断上一条命令执行结果的代码,以决定下一个步骤.</span><br><span class="line">一般上一条命令的执行结果代码只有两结果,&quot;成功&quot;用0表示  &quot;失败&quot;用1表示.</span><br><span class="line"></span><br><span class="line">举个例子:</span><br><span class="line">@echo off</span><br><span class="line">net user</span><br><span class="line">IF %ERRORLEVEL% &#x3D;&#x3D; 0 echo net user 执行成功了!</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">这是个简单判断上条命令是否执行成功.</span><br><span class="line">细心的朋友可能会发现,这个用法和帮助里的用法不太一样,按照帮助里的写法&quot;IF %ERRORLEVEL% &#x3D;&#x3D; 0 echo net user 执行成功了!  &quot;这一句代码应该写成:IF ERRORLEVEL 0 echo net user 执行成功了!</span><br><span class="line">那为什么我要写成这样呢?各位自己把代码改掉执行后,就会发现错误了!用这种语法,不管你的上面的命令是否执行成功,他都会认为命令成功了,不知道是BUG还是本人理解错误...</span><br><span class="line"></span><br><span class="line">补充：这不是bug，而是 if errorlevel 语句的特点：当使用 if errorlevel 0 …… 的句式时，它的含义是：如果错误码的值大于或等于0的时候，将执行某个操作；当使用 if %errorlevel%&#x3D;&#x3D;0 …… 的句式时，它的含义是：如果错误码的值等于0的时候，将执行某操作。因为这两种句式含义的差别，如果使用前一种句式的时候，错误码语句的排列顺序是从大到小排列</span><br><span class="line"></span><br><span class="line">%ERRORLEVEL% 这是个系统变量,返回上条命令的执行结果代码! &quot;成功&quot;用0表示  &quot;失败&quot;用1表示. 当然还有其他参数,用的时候基本就这两数字.</span><br><span class="line">一般上一条命令的执行结果代码只有两结果,&quot;成功&quot;用0表示  &quot;失败&quot;用1表示</span><br><span class="line">　　这只是一般的情况，实际上，errorlevel返回值可以在0~255之间，比如，xcopy默认的errorlevel值就有5个，分别表示5种执行状态：</span><br><span class="line"></span><br><span class="line">退出码 说明</span><br><span class="line">0 文件复制没有错误。</span><br><span class="line">1 if errorlevel 2 echo。</span><br><span class="line">2 用户按 CTRL+C 终止了 xcopy。</span><br><span class="line">4 出现了初始化错误。没有足够的内存或磁盘空间，或命令行上输入了无效的驱动器名称或语法。</span><br><span class="line">5 出现了磁盘写入错误。</span><br><span class="line"></span><br><span class="line">要判断上面xcopy命令的5种退出情况，应写成：</span><br><span class="line">if errorlevel 5 echo出现了磁盘写入错误</span><br><span class="line">if errorlevel 4 echo出现了初始化错误</span><br><span class="line">if errorlevel 2 echo用户按 CTRL+C 终止了 xcopy</span><br><span class="line">if errorlevel 1 echo if errorlevel 2 echo</span><br><span class="line">if errorlevel 0 echo文件复制没有错误。</span><br><span class="line">才能正确执行。</span><br><span class="line"></span><br><span class="line">补充完毕。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">再举几个例子给新手理解</span><br><span class="line">@echo off</span><br><span class="line">net usertest</span><br><span class="line">IF %ERRORLEVEL% &#x3D;&#x3D; 1 echo net user 执行失败了!</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">这个是判断上一条命令是否执行失败的</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">set &#x2F;p var&#x3D;随便输入个命令:</span><br><span class="line">%var%</span><br><span class="line">if %ERRORLEVEL% &#x3D;&#x3D; 0 goto yes</span><br><span class="line">goto no</span><br><span class="line">:yes</span><br><span class="line">echo !var! 执行成功了</span><br><span class="line">pause</span><br><span class="line">exit</span><br><span class="line">:no</span><br><span class="line">echo 基本上执行失败了..</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">这个是根据你输入的命令,自动判断是成功还是失败了!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">在来一个简化版的</span><br><span class="line">@echo off</span><br><span class="line">set &#x2F;p var&#x3D;随便输入个命令:</span><br><span class="line">%var%</span><br><span class="line">if %ERRORLEVEL% &#x3D;&#x3D; 0 (echo %var%执行成功了) ELSE echo %var%执行失败了!</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">else后面写上执行失败后的操作!</span><br><span class="line"></span><br><span class="line">当然我门还可以把if else这样的语句分成几行写出来,使他看上去好看点...</span><br><span class="line">@echo off</span><br><span class="line">set &#x2F;p var&#x3D;随便输入个命令:</span><br><span class="line">%var%</span><br><span class="line">if %ERRORLEVEL% &#x3D;&#x3D; 0  (</span><br><span class="line">   echo !var! 执行成功了</span><br><span class="line">   ) ELSE (</span><br><span class="line">   echo 基本上执行失败了..</span><br><span class="line">   )</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">这里介绍的两种简写对IF的三种语法都可以套用,不单单是在IF [NOT] ERRORLEVEL number command</span><br><span class="line">这种法上才能用</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第二种用法：IF [NOT] string1&#x3D;&#x3D;string2 command</span><br><span class="line"></span><br><span class="line">这个呢就是用来比较变量或者字符的值是不是相等的.</span><br><span class="line"></span><br><span class="line">例子</span><br><span class="line">@echo off</span><br><span class="line">set &#x2F;p var&#x3D;请输入第一个比较字符:</span><br><span class="line">set &#x2F;p var2&#x3D;请输入第二个比较字符:</span><br><span class="line">if %var% &#x3D;&#x3D; %var2% (echo 我们相等) ELSE echo 我们不相等</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">上面这个例子可以判断你输入的值是不是相等,但是你如果输入相同的字符,但是如果其中一个后面打了一个空格,</span><br><span class="line">这个例子还是会认为相等,如何让有空格的输入不相等呢?我们在比较字符上加个双引号就可以了.</span><br><span class="line">@echo off</span><br><span class="line">set &#x2F;p var&#x3D;请输入第一个比较字符:</span><br><span class="line">set &#x2F;p var2&#x3D;请输入第二个比较字符(多输入个空格试试):</span><br><span class="line">if &quot;%var%&quot; &#x3D;&#x3D; &quot;%var2%&quot; (echo 我们相等) ELSE echo 我们不相等</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">第三种用法：IF [NOT] EXIST filename command</span><br><span class="line"></span><br><span class="line">这个就是判断某个文件或者文件夹是否存在的语法</span><br><span class="line"></span><br><span class="line">例子</span><br><span class="line">@echo off</span><br><span class="line">if exist &quot;c:\test&quot; (echo 存在文件) ELSE echo 不存在文件</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">判断的文件路径加引号是为了防止路径有空格,如果路径有空格加个双引号就不会出现判断出错了!</span><br><span class="line"></span><br><span class="line">这个语法没什么太多的用法,基本就这样了,就不多介绍了.</span><br><span class="line"></span><br><span class="line">另外我们看到每条IF用法后都有个[NOT]语句,这啥意思?其他加上他的话,就表示先判断我们的条件不成立时,</span><br><span class="line">没加他默认是先判断条件成立时,比如上面这个例子</span><br><span class="line">@echo off</span><br><span class="line">if not exist &quot;c:\test&quot; (echo 存在文件) ELSE echo 不存在文件</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">加个NOT,执行后有什么结果,如果你的C盘下根本就没c:\test,他还是会显示&quot;存在文件&quot;,这就表示了加了NOT就</span><br><span class="line">会先判断条件失败!懂了吧,上面例子改成这样就正确了!</span><br><span class="line">@echo off</span><br><span class="line">if not exist &quot;c:\test&quot; (echo 不存在文件) ELSE echo 存在文件</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第四种用法：IF增强的用法</span><br><span class="line"></span><br><span class="line">  IF [&#x2F;I] string1 compare-op string2 command  #参数&#x2F;I表示不区分大小写</span><br><span class="line">  IF CMDEXTVERSION number command</span><br><span class="line">  IF DEFINED variable command  #判断变量是否存在，很有用</span><br><span class="line"></span><br><span class="line">CMDEXTVERSION 条件的作用跟 ERRORLEVEL 的一样，除了它</span><br><span class="line">是在跟与命令扩展名有关联的内部版本号比较。第一个版本</span><br><span class="line">是 1。每次对命令扩展名有相当大的增强时，版本号会增加一个。</span><br><span class="line">命令扩展名被停用时，CMDEXTVERSION 条件不是真的。</span><br><span class="line"></span><br><span class="line">如果已定义环境变量，DEFINED 条件的作用跟 EXISTS 的一样</span><br><span class="line">IF DEFINED variable command</span><br><span class="line">IF NOT &quot;variable&quot;&#x3D;&#x3D;&quot;&quot; command</span><br><span class="line">上面两条命令效果一样。</span><br><span class="line"></span><br><span class="line">用“set variable&#x3D;”命令使变量variable变成未定义，即空值。</span><br><span class="line"></span><br><span class="line">一句话，变量值为空，则为未定义；变量值不为空，则为已定义。</span><br><span class="line">用语句IF DEFINED variable command判断变量是否存在时，请注意variable为不使用引导符号%的变量名，不能用写为%variable%，否则出错。</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">if defined aa (echo 变量aa存在) else (echo 变量aa不存在)</span><br><span class="line">运行显示：变量aa不存在</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">set aa&#x3D;123</span><br><span class="line">set aa&#x3D;</span><br><span class="line">if defined aa (echo 变量aa存在) else (echo 变量aa不存在)</span><br><span class="line">运行显示：变量aa不存在</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">@echo off</span><br><span class="line">if a &#x3D;&#x3D; A (echo 我们相等) ELSE echo 我们不相等</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">执行后会显示：我们不相等</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">@echo off</span><br><span class="line">if &#x2F;i a &#x3D;&#x3D; A (echo 我们相等) ELSE echo 我们不相等</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">加上&#x2F;I不区分大小写就相等了!</span><br><span class="line"></span><br><span class="line">最后面还有一些用来判断数字的符号</span><br><span class="line"></span><br><span class="line">    EQU - 等于</span><br><span class="line">    NEQ - 不等于</span><br><span class="line">    LSS - 小于</span><br><span class="line">    LEQ - 小于或等于</span><br><span class="line">    GTR - 大于</span><br><span class="line">    GEQ - 大于或等于</span><br><span class="line"></span><br><span class="line">我就举一个例子,大家都懂数学...不讲多了</span><br><span class="line">@echo off</span><br><span class="line">set &#x2F;p var&#x3D;请输入一个数字:</span><br><span class="line">if %var% LEQ  4 (echo 我小于等于4) ELSE echo 我不小于等于4</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                         BY 伤脑筋</span><br><span class="line"></span><br><span class="line">----------------------------</span><br><span class="line">难明其妙的水宫殿</span><br><span class="line">----------------------------</span><br><span class="line">土耳其首都伊斯坦布尔是座横跨欧亚的历史名城。来自欧亚非三大洲的各种文化在此交织碰撞，形成了各种文明奇迹，也留下了许多难解的谜题。在伊斯坦布尔郊外的埃列巴坦有座被当地人视为“恶魔之地”的宫殿，传说殿中藏有恶魔。人们从空旷阴森的大殿外走过，往往能听到里面奇怪的哗哗水声，格外玄秘恐怖，没有人敢去探个究竟。直到1920年，一对情侣才在好奇心的驱使下走进了大殿。他们刚刚踏入殿中，突然一声巨响，地下顿时大水汹涌。两人急忙转身逃出，发现大水已经高出门槛但却并不溢出。转眼之间，水又立即退下，无影无踪。两人鼓足勇气再次走进大殿，才发现这里竟是一座华丽无比的古罗马式厅堂，有高耸雪白的大理石柱、呼之欲出的美丽雕像、繁复优美的高雅壁画。</span><br><span class="line">    闻讯而来的考古学家们对宫殿进行了全面的勘查，发现它大约建于公元4世纪左右，有可能是东罗马帝国的君士坦丁大帝定都于此后的建筑。殿中的大水涨落极有规律，一昼夜涨落6次，每次都有准确的时间。更奇怪的是宫殿大门之下发现的一堆碎石，它似乎是控制着水涨水落的闸门。碎石底下是一排空心圆柱，似乎是引水管道。这座奇怪的建筑是干什么用的呢？有人说是罗马人的蓄水池。那么它为什么要建得如此华丽，而且能够控制水位涨落呢？为什么大水高过门槛却漫不出来呢？它的工作原理又是什么？</span><br><span class="line">————选自《世界未解之谜》</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第七章 DOS编程高级技巧</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">本章节乃龙卷风根据自己平时学用批处理的经验而总结的，不断补充中……。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">一、交互界面设计</span><br><span class="line"></span><br><span class="line">没啥说的，看看高手设计的菜单界面吧：</span><br><span class="line">@echo off</span><br><span class="line">cls</span><br><span class="line">title 终极多功能修复</span><br><span class="line">:menu</span><br><span class="line">cls</span><br><span class="line">color 0A</span><br><span class="line">echo.</span><br><span class="line">echo                 &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">echo                 请选择要进行的操作，然后按回车</span><br><span class="line">echo                 &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">echo.</span><br><span class="line">echo              1.网络修复及上网相关设置,修复IE,自定义屏蔽网站</span><br><span class="line">echo.</span><br><span class="line">echo              2.病毒专杀工具，端口关闭工具,关闭自动播放</span><br><span class="line">echo.</span><br><span class="line">echo              3.清除所有多余的自启动项目，修复系统错误</span><br><span class="line">echo.</span><br><span class="line">echo              4.清理系统垃圾,提高启动速度</span><br><span class="line">echo.</span><br><span class="line">echo              Q.退出</span><br><span class="line">echo.</span><br><span class="line">echo.</span><br><span class="line">:cho</span><br><span class="line">set choice&#x3D;</span><br><span class="line">set &#x2F;p choice&#x3D;          请选择:</span><br><span class="line">IF NOT &quot;%choice%&quot;&#x3D;&#x3D;&quot;&quot; SET choice&#x3D;%choice:~0,1%</span><br><span class="line">if &#x2F;i &quot;%choice%&quot;&#x3D;&#x3D;&quot;1&quot; goto ip</span><br><span class="line">if &#x2F;i &quot;%choice%&quot;&#x3D;&#x3D;&quot;2&quot; goto setsave</span><br><span class="line">if &#x2F;i &quot;%choice%&quot;&#x3D;&#x3D;&quot;3&quot; goto kaiji</span><br><span class="line">if &#x2F;i &quot;%choice%&quot;&#x3D;&#x3D;&quot;4&quot; goto clean</span><br><span class="line">if &#x2F;i &quot;%choice%&quot;&#x3D;&#x3D;&quot;Q&quot; goto endd</span><br><span class="line">echo 选择无效，请重新输入</span><br><span class="line">echo.</span><br><span class="line">goto cho</span><br><span class="line">只要学完本教程前面的章节，上面的程序应该能看懂了。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">二、if…else…条件语句</span><br><span class="line"></span><br><span class="line">前面已经谈到，DOS条件语句主要有以下形式</span><br><span class="line">IF [NOT] ERRORLEVEL number command</span><br><span class="line">IF [NOT] string1&#x3D;&#x3D;string2 command</span><br><span class="line">IF [NOT] EXIST filename command</span><br><span class="line">增强用法：IF [&#x2F;I] string1 compare-op string2 command</span><br><span class="line">增强用法中加上&#x2F;I就不区分大小写了!</span><br><span class="line">增强用法中还有一些用来判断数字的符号：</span><br><span class="line"></span><br><span class="line">EQU - 等于</span><br><span class="line">NEQ - 不等于</span><br><span class="line">LSS - 小于</span><br><span class="line">LEQ - 小于或等于</span><br><span class="line">GTR - 大于</span><br><span class="line">GEQ - 大于或等于</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">上面的command命令都可以用小括号来使用多条命令的组合，包括else子句，组合命令中可以嵌套使用条件或循环命令。</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line"></span><br><span class="line">    IF EXIST filename (</span><br><span class="line">        del filename</span><br><span class="line">    ) ELSE (</span><br><span class="line">        echo filename missing</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">也可写成：</span><br><span class="line">if exist filename (del filename) else (echo filename missing)</span><br><span class="line">但这种写法不适合命令太多或嵌套命令的使用。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------------------------</span><br><span class="line">水晶人头之谜</span><br><span class="line">----------------------------</span><br><span class="line">你可曾见到这样一颗水晶雕成的人头？它和真人头骨同等大小，用一整块水晶雕琢而成，牙齿十分整齐地排列在牙床上，鼻骨由3颗水晶石拼接起来，两只眼睛各为一块圆形水晶。人头的底部还藏着棱镜。它的模样估计是一个女人的头颅。整个水晶头骨上没有任何人工打磨的痕迹，看上去精美绝伦、熠熠生辉，即使用现代科技雕琢它也会十分耗时费工，可科学家却推断它早在3600年前就已诞生，你相信有这样的事情吗？</span><br><span class="line">这颗水晶头骨发现于中美洲的洪都拉斯，难道是印第安人的祖先制作出来的吗？可20世纪的印第安人还在美洲的丛林里过着衣不蔽体、食不果腹的原始生活，谁能相信他们的祖先早在几千年前就拥有了如此高超的雕刻技艺呢？我们知道，水晶的硬度非常之高，用一般的器具是很难对其加工的，那么古人是用什么工具雕刻它的呢？而且要找到这么大的水晶实在是不容易的事情啊。他们又如何能凭借原始的手工工具把它雕刻得如此成功？现在研究者还一致认为，当时的加工者并不了解水晶晶体的结构，他们也不具备现代的光学和人体骨骼构造的知识，在这样一种模糊的认识上能雕刻出这样的杰作，实在让人称奇！在古代玛雅的传说里，这颗水晶人头具有某种神奇的力量，他们通过它与神灵相通。</span><br><span class="line">————选自《世界未解之谜》</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">三、循环语句</span><br><span class="line"></span><br><span class="line">1、指定次数循环</span><br><span class="line">FOR &#x2F;L %variable IN (start,step,end) DO command [command-parameters]</span><br><span class="line"></span><br><span class="line">组合命令：</span><br><span class="line">FOR &#x2F;L %variable IN (start,step,end) DO (</span><br><span class="line">Command1</span><br><span class="line">Command2</span><br><span class="line">……</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">2、对某集合执行循环语句。</span><br><span class="line">FOR %%variable IN (set) DO command [command-parameters]</span><br><span class="line"></span><br><span class="line">  %%variable  指定一个单一字母可替换的参数。</span><br><span class="line">  (set)      指定一个或一组文件。可以使用通配符。</span><br><span class="line">  command   对每个文件执行的命令，可用小括号使用多条命令组合。</span><br><span class="line"></span><br><span class="line">FOR &#x2F;R [[drive:]path] %variable IN (set) DO command [command-parameters]</span><br><span class="line"></span><br><span class="line">    检查以 [drive:]path 为根的目录树，指向每个目录中的</span><br><span class="line">    FOR 语句。如果在 &#x2F;R 后没有指定目录，则使用当前</span><br><span class="line">目录。如果集仅为一个单点(.)字符，则枚举该目录树。</span><br><span class="line"></span><br><span class="line">同前面一样，command可以用括号来组合：</span><br><span class="line">FOR &#x2F;R [[drive:]path] %variable IN (set) DO (</span><br><span class="line">Command1</span><br><span class="line">Command2</span><br><span class="line">……</span><br><span class="line">commandn</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">3、条件循环</span><br><span class="line">    上面的循环结构是用for命令来实现的，for命令循环有一个缺点，就是整个循环被当作一条命令语句，涉及到变量延迟的问题。</span><br><span class="line">    利用goto语句和条件判断，dos可以实现条件循环，很简单啦，看例子：</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">@echo off</span><br><span class="line">set var&#x3D;0</span><br><span class="line">rem ************循环开始了</span><br><span class="line">:continue</span><br><span class="line">set &#x2F;a var+&#x3D;1</span><br><span class="line">echo 第%var%次循环</span><br><span class="line">if %var% lss 100 goto continue</span><br><span class="line">rem ************循环结束了</span><br><span class="line">echo 循环执行完毕</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">@echo off</span><br><span class="line">set var&#x3D;100</span><br><span class="line">rem ************循环开始了</span><br><span class="line">:continue</span><br><span class="line">echo 第%var%次循环</span><br><span class="line">set &#x2F;a var-&#x3D;1</span><br><span class="line">if %var% gtr 0 goto continue</span><br><span class="line">rem ************循环结束了</span><br><span class="line">echo 循环执行完毕</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">四、子程序</span><br><span class="line"></span><br><span class="line">在批处理程序中可以调用外部可运行程序，比如exe程序，也可调用其他批处理程序，这些也可以看作子程序，但是不够方便，如果被调用的程序很多，就显得不够简明了，很繁琐。</span><br><span class="line">   在windowsXP中，批处理可以调用本程序中的一个程序段，相当于子程序，这些子程序一般放在主程序后面。</span><br><span class="line"></span><br><span class="line">子程序调用格式：</span><br><span class="line">  CALL :label arguments</span><br><span class="line"></span><br><span class="line">子程序语法：</span><br><span class="line">  :label</span><br><span class="line">  command1</span><br><span class="line">  command2</span><br><span class="line">  ......</span><br><span class="line">  commandn</span><br><span class="line">  goto :eof</span><br><span class="line"></span><br><span class="line">在子程序段中，参数%0指标签:label</span><br><span class="line"></span><br><span class="line">子过程一般放在最后，并且注意在主程序最后要加上exit或跳转语句，避免错误的进入子过程。</span><br><span class="line"></span><br><span class="line">子程序和主程序中的变量都是全局变量，其作用范围都是整个批处理程序。</span><br><span class="line"></span><br><span class="line">传至子程序的参数在call语句中指定，在子程序中用%1、%2至%9的形式调用，而子程序返回主程序的数据只需在调用结束后直接引用就可以了，当然也可以指定返回变量，请看下面的例子。</span><br><span class="line"></span><br><span class="line">子程序例1：</span><br><span class="line">@echo off</span><br><span class="line">call :sub return 你好</span><br><span class="line">echo 子程序返回值：%return%</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">:sub</span><br><span class="line">set %1&#x3D;%2</span><br><span class="line">goto :eof</span><br><span class="line">运行结果：你好</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">子程序例2：设计一个求多个整数相加的子程序</span><br><span class="line">@echo off</span><br><span class="line">set sum&#x3D;0</span><br><span class="line">call :sub sum 10 20 35</span><br><span class="line">echo 数据求和结果：%sum%</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">:sub</span><br><span class="line">rem 参数1为返回变量名称</span><br><span class="line">set &#x2F;a %1&#x3D;%1+%2</span><br><span class="line">shift &#x2F;2</span><br><span class="line">if not &quot;%2&quot;&#x3D;&#x3D;&quot;&quot; goto sub</span><br><span class="line">goto :eof</span><br><span class="line"></span><br><span class="line">运行结果：65</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">在win98系统中，不支持上面这种标号调用，须将子程序单独保存为一个批处理程序，然后调用。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------------------------</span><br><span class="line">进化论的空白之谜</span><br><span class="line">----------------------------</span><br><span class="line">古猿：生活于1400万～800万年前</span><br><span class="line">南猿：生活于400万～190万年前</span><br><span class="line">猿人：生活于170万～20万年前</span><br><span class="line">在这三个阶段的两大衔接处，有几百万年的空白，科学家迄今没有发现此间的任何生物化石。</span><br><span class="line">————选自《世界未解之谜》</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">五、用ftp命令实现自动下载</span><br><span class="line"></span><br><span class="line">ftp是常用的下载工具，ftp界面中有40多个常用命令，自己学习了，不介绍了。这里介绍如何用dos命令行调用ftp命令，实现ftp自动登录，并上传下载，并自动退出ftp程序。</span><br><span class="line">其实可以将ftp命令组合保存为一个文本文件，然后用以下命令调用即可。</span><br><span class="line"></span><br><span class="line">ftp  -n -s:[[drive:]path]filename</span><br><span class="line"></span><br><span class="line">上面的filename为ftp命令文件，包括登录IP地址，用户名、密码、操作命令等</span><br><span class="line">例：</span><br><span class="line">open 90.52.8.3   ＃打开ip</span><br><span class="line">user iware       ＃用户为iware</span><br><span class="line">password8848    ＃密码</span><br><span class="line">bin             ＃二进制传输模式</span><br><span class="line">prompt</span><br><span class="line">cd tmp1         ＃切换至iware用户下的tmp1目录</span><br><span class="line">pwd</span><br><span class="line">lcd d:\download   ＃本地目录</span><br><span class="line">mget *          ＃下载tmp1目录下的所有文件</span><br><span class="line">bye             ＃退出ftp</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">六、用7-ZIP实现命令行压缩和解压功能</span><br><span class="line"></span><br><span class="line">语法格式：（详细情况见7-zip帮助文件，看得头晕可以跳过，用到再学）</span><br><span class="line">7z &lt;command&gt; [&lt;switch&gt;...] &lt;base_archive_name&gt; [&lt;arguments&gt;...]</span><br><span class="line"></span><br><span class="line">7z.exe的每个命令都有不同的参数&lt;switch&gt;,请看帮助文件</span><br><span class="line">&lt;base_archive_name&gt;为压缩包名称</span><br><span class="line">&lt;arguments&gt;为文件名称，支持通配符或文件列表</span><br><span class="line"></span><br><span class="line">其中，7z是至命令行压缩解压程序7z.exe，&lt;command&gt;是7z.exe包含的命令，列举如下：</span><br><span class="line"></span><br><span class="line">a： Adds files to archive. 添加至压缩包</span><br><span class="line">a命令可用参数：</span><br><span class="line">  -i (Include)</span><br><span class="line">  -m (Method)</span><br><span class="line">  -p (Set Password)</span><br><span class="line">  -r (Recurse)</span><br><span class="line">  -sfx (create SFX)</span><br><span class="line">  -si (use StdIn)</span><br><span class="line">  -so (use StdOut)</span><br><span class="line">  -ssw (Compress shared files)</span><br><span class="line">  -t (Type of archive)</span><br><span class="line">  -u (Update)</span><br><span class="line">  -v (Volumes)</span><br><span class="line">  -w (Working Dir)</span><br><span class="line">  -x (Exclude)</span><br><span class="line"></span><br><span class="line">b： Benchmark</span><br><span class="line"></span><br><span class="line">d： Deletes files from archive. 从压缩包中删除文件</span><br><span class="line">d命令可用参数：</span><br><span class="line">  -i (Include)</span><br><span class="line">  -m (Method)</span><br><span class="line">  -p (Set Password)</span><br><span class="line">  -r (Recurse)</span><br><span class="line">  -u (Update)</span><br><span class="line">  -w (Working Dir)</span><br><span class="line">  -x (Exclude)</span><br><span class="line"></span><br><span class="line">e： Extract解压文件至当前目录或指定目录</span><br><span class="line">e命令可用参数：</span><br><span class="line">  -ai (Include archives)</span><br><span class="line">  -an (Disable parsing of archive_name)</span><br><span class="line">  -ao (Overwrite mode)</span><br><span class="line">  -ax (Exclude archives)</span><br><span class="line">  -i (Include)</span><br><span class="line">  -o (Set Output Directory)</span><br><span class="line">  -p (Set Password)</span><br><span class="line">  -r (Recurse)</span><br><span class="line">  -so (use StdOut)</span><br><span class="line">  -x (Exclude)</span><br><span class="line">  -y (Assume Yes on all queries)</span><br><span class="line"></span><br><span class="line">l： Lists contents of archive.</span><br><span class="line">t： Test </span><br><span class="line">u： Update</span><br><span class="line"></span><br><span class="line">x： eXtract with full paths用文件的完整路径解压至当前目录或指定目录</span><br><span class="line">x命令可用参数：</span><br><span class="line">  -ai (Include archives)</span><br><span class="line">  -an (Disable parsing of archive_name)</span><br><span class="line">  -ao (Overwrite mode)</span><br><span class="line">  -ax (Exclude archives)</span><br><span class="line">  -i (Include)</span><br><span class="line">  -o (Set Output Directory)</span><br><span class="line">  -p (Set Password)</span><br><span class="line">  -r (Recurse)</span><br><span class="line">  -so (use StdOut)</span><br><span class="line">  -x (Exclude)</span><br><span class="line">  -y (Assume Yes on all queries)</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">七、调用VBScript程序</span><br><span class="line"></span><br><span class="line">使用 Windows 脚本宿主，可以在命令提示符下运行脚本。CScript.exe 提供了用于设置脚本属性的命令行开关。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">用法：CScript 脚本名称 [脚本选项...] [脚本参数...]</span><br><span class="line"></span><br><span class="line">选项：</span><br><span class="line"> &#x2F;&#x2F;B         批模式：不显示脚本错误及提示信息</span><br><span class="line"> &#x2F;&#x2F;D         启用 Active Debugging</span><br><span class="line"> &#x2F;&#x2F;E:engine  使用执行脚本的引擎</span><br><span class="line"> &#x2F;&#x2F;H:CScript 将默认的脚本宿主改为 CScript.exe</span><br><span class="line"> &#x2F;&#x2F;H:WScript 将默认的脚本宿主改为 WScript.exe （默认）</span><br><span class="line"> &#x2F;&#x2F;I         交互模式（默认，与 &#x2F;&#x2F;B 相对)</span><br><span class="line"> &#x2F;&#x2F;Job:xxxx  执行一个 WSF 工作</span><br><span class="line"> &#x2F;&#x2F;Logo      显示徽标（默认）</span><br><span class="line"> &#x2F;&#x2F;Nologo    不显示徽标：执行时不显示标志</span><br><span class="line"> &#x2F;&#x2F;S         为该用户保存当前命令行选项</span><br><span class="line"> &#x2F;&#x2F;T:nn      超时设定秒：允许脚本运行的最长时间</span><br><span class="line"> &#x2F;&#x2F;X         在调试器中执行脚本</span><br><span class="line"> &#x2F;&#x2F;U         用 Unicode 表示来自控制台的重定向 I&#x2F;O</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">“脚本名称”是带有扩展名和必需的路径信息的脚本文件名称，如d:\admin\vbscripts\chart.vbs。</span><br><span class="line">“脚本选项和参数”将传递给脚本。脚本参数前面有一个斜杠 (&#x2F;)。每个参数都是可选的；但不能在未指定脚本名称的情况下指定脚本选项。如果未指定参数，则 CScript 将显示 CScript 语法和有效的宿主参数。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">八、将批处理转化为可执行文件：</span><br><span class="line"></span><br><span class="line">由于批处理文件是一种文本文件，任何人都可以对其进行随便编辑，不小心就会把里面的命令破坏掉，所以如果将其转换成.com格式的可执行文件，不仅执行效率会大大提高，而且不会破坏原来的功能，更能将优先级提到最高。Bat2Com就可以完成这个转换工作。</span><br><span class="line">小知识：在DOS环境下，可执行文件的优先级由高到低依次为.com&gt;.exe&gt;.bat&gt;.cmd，即如果在同一目录下存在文件名相同的这四类文件，当只键入文件名时，DOS执行的是name.com，如果需要执行其他三个文件，则必须指定文件的全名，如name.bat。</span><br><span class="line"></span><br><span class="line">这是一个只有5.43K大小的免费绿色工具，可以运行在纯DOS或DOS窗口的命令行中，用法：Bat2Com</span><br><span class="line">FileName，这样就会在同一目录下生成一个名为FileNme.com的可执行文件，执行的效果和原来的.bat文件一样。</span><br><span class="line"></span><br><span class="line">----------------------------</span><br><span class="line">人体辉光之谜</span><br><span class="line">----------------------------</span><br><span class="line">现代科技发现了很多让人吃惊的现象，它能使人们相信很多在传说或者梦境里才有的事情。宗教油画上的小天使总是头顶光圈飞来飞去。可你相信吗？在我们每个人的身体表面其实都有一层肉眼所见不到的彩色光！天使拥有的还只是头顶的光圈，可我们拥有的是全身的辉光，这多神奇。只要通过特殊的手段，譬如凭借某种涂了特殊颜料的玻璃，我们就能亲眼见到自己身体周围的辉光。而科学家发明了一种特殊的高频电场照相技术，能把人体辉光的状况显示在彩色照片上，不仅能让我们一睹为快，还能永久收藏。这实在是一件有意思的事情。科学家的实验还发现人体辉光是处于变动之中的，人体不同部位辉光的颜色不一样，而且在人体的精神和身体状况有变动时，辉光的明暗、强弱和大小都会随之发生变化。</span><br><span class="line">————选自《世界未解之谜》</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">九、时间延迟</span><br><span class="line"></span><br><span class="line">本条参考引用[英雄]教程</span><br><span class="line">什么是时间延迟？顾名思义，就是执行一条命令后延迟一段时间再进行下一条命令。</span><br><span class="line">延迟的应用见下节：“模拟进度条”。</span><br><span class="line">1、利用ping命令延时</span><br><span class="line"> 例：</span><br><span class="line">  @echo off</span><br><span class="line">  echo 延时前：%time%</span><br><span class="line">  ping &#x2F;n 3 127.0.0.1 &gt;nul</span><br><span class="line">  echo 延时后：%time%</span><br><span class="line">  pause </span><br><span class="line">解说：用到了ping命令的“&#x2F;n”参数，表示要发送多少次请求到指定的ip。本例中要发送3次请求到本机的ip（127.0.0.1）。127.0.0.1可简写为127.1。“&gt;nul”就是屏蔽掉ping命令所显示的内容。</span><br><span class="line"></span><br><span class="line">2、利用for命令延时</span><br><span class="line"> 例：</span><br><span class="line">  @echo off</span><br><span class="line">  echo 延时前：%time%</span><br><span class="line">  for &#x2F;l %%i in (1,1,5000) do echo %%i&gt;nul</span><br><span class="line">  echo 延时后：%time%</span><br><span class="line">  pause</span><br><span class="line">解说：原理很简单，就是利用一个计次循环并屏蔽它所显示的内容来达到延时的目的。</span><br><span class="line"></span><br><span class="line">3、利用vbs延迟函数，精确度毫秒，误差1000毫秒内</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">    @echo off</span><br><span class="line">    echo %time%</span><br><span class="line">    call :delay 5000</span><br><span class="line">    echo %time%</span><br><span class="line">    pause</span><br><span class="line">    exit</span><br><span class="line"></span><br><span class="line">    :delay</span><br><span class="line">    echo WScript.Sleep %1&gt;delay.vbs</span><br><span class="line">    CScript &#x2F;&#x2F;B delay.vbs</span><br><span class="line">    del delay.vbs</span><br><span class="line">    goto :eof</span><br><span class="line"></span><br><span class="line">运行显示：</span><br><span class="line">10:44:06.45</span><br><span class="line">10:44:11.95</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">上面的运行结果显示实际延时了5500毫秒，多出来的500毫秒时建立和删除临时文件所耗费的时间。误差在一秒之内。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4、仅用批处理命令实现任意时间延迟，精确度10毫秒，误差50毫秒内</span><br><span class="line"></span><br><span class="line">仅用批处理命令就可以实现延迟操作。</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">set &#x2F;p delay&#x3D;请输入需延迟的毫秒数：</span><br><span class="line">set TotalTime&#x3D;0</span><br><span class="line">set NowTime&#x3D;%time%</span><br><span class="line">::读取起始时间，时间格式为：13:01:05.95</span><br><span class="line">echo 程序开始时间：%NowTime%</span><br><span class="line">:delay_continue</span><br><span class="line">set &#x2F;a minute1&#x3D;1%NowTime:~3,2%-100</span><br><span class="line">::读取起始时间的分钟数</span><br><span class="line">set &#x2F;a second1&#x3D;1%NowTime:~-5,2%%NowTime:~-2%0-100000</span><br><span class="line">::将起始时间的秒数转为毫秒</span><br><span class="line">set NowTime&#x3D;%time%</span><br><span class="line">set &#x2F;a minute2&#x3D;1%NowTime:~3,2%-100</span><br><span class="line">:: 读取现在时间的分钟数</span><br><span class="line">set &#x2F;a second2&#x3D;1%NowTime:~-5,2%%NowTime:~-2%0-100000</span><br><span class="line">::将现在时间的秒数转为毫秒</span><br><span class="line">set &#x2F;a TotalTime+&#x3D;(%minute2%-%minute1%+60)%%60*60000+%second2%-%second1%</span><br><span class="line">if %TotalTime% lss %delay% goto delay_continue</span><br><span class="line">echo 程序结束时间：%time%</span><br><span class="line">echo 设定延迟时间：%delay%毫秒</span><br><span class="line">echo 实际延迟时间：%TotalTime%毫秒</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">运行显示：</span><br><span class="line"></span><br><span class="line">   请输入需延迟的毫秒数：6000</span><br><span class="line">   程序开始时间：15:32:16.37</span><br><span class="line">   程序结束时间：15:32:22.37</span><br><span class="line">   设定延迟时间：6000毫秒</span><br><span class="line">   实际延迟时间：6000毫秒</span><br><span class="line">   请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">实现原理：首先设定要延迟的毫秒数，然后用循环累加时间，直到累加时间大于等于延迟时间。</span><br><span class="line"></span><br><span class="line">误差：windows系统时间只能精确到10毫秒，所以理论上有可能存在10毫秒误差。</span><br><span class="line">      经测试，当延迟时间大于500毫秒时，上面的延迟程序一般不存在误差。当延迟时间小于500毫秒时，可能有几十毫秒误差，为什么？因为延迟程序本身也是有运行时间的，同时系统时间只能精确到10毫秒。</span><br><span class="line"></span><br><span class="line">为了方便引用，可将上面的例子改为子程序调用形式：</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">echo 程序开始时间：%Time%</span><br><span class="line">call :delay 10</span><br><span class="line">echo 实际延迟时间：%totaltime%毫秒</span><br><span class="line">echo 程序结束时间：%time%</span><br><span class="line">pause</span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line">::-----------以下为延时子程序--------------------</span><br><span class="line">:delay</span><br><span class="line">@echo off</span><br><span class="line">if &quot;%1&quot;&#x3D;&#x3D;&quot;&quot; goto :eof</span><br><span class="line">set DelayTime&#x3D;%1</span><br><span class="line">set TotalTime&#x3D;0</span><br><span class="line">set NowTime&#x3D;%time%</span><br><span class="line">::读取起始时间，时间格式为：13:01:05.95</span><br><span class="line">:delay_continue</span><br><span class="line">set &#x2F;a minute1&#x3D;1%NowTime:~3,2%-100</span><br><span class="line">set &#x2F;a second1&#x3D;1%NowTime:~-5,2%%NowTime:~-2%0-100000</span><br><span class="line">set NowTime&#x3D;%time%</span><br><span class="line">set &#x2F;a minute2&#x3D;1%NowTime:~3,2%-100</span><br><span class="line">set &#x2F;a second2&#x3D;1%NowTime:~-5,2%%NowTime:~-2%0-100000</span><br><span class="line">set &#x2F;a TotalTime+&#x3D;(%minute2%-%minute1%+60)%%60*60000+%second2%-%second1%</span><br><span class="line">if %TotalTime% lss %DelayTime% goto delay_continue</span><br><span class="line">goto :eof</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">十、模拟进度条</span><br><span class="line"></span><br><span class="line">下面给出一个模拟进度条的程序。如果将它运用在你自己的程序中，可以使你的程序更漂亮。</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">mode con cols&#x3D;113 lines&#x3D;15 &amp;color 9f</span><br><span class="line">cls</span><br><span class="line">echo.</span><br><span class="line">echo  程序正在初始化. . . </span><br><span class="line">echo.</span><br><span class="line">echo  ┌──────────────────────────────────────┐</span><br><span class="line">set&#x2F;p&#x3D;  ■&lt;nul</span><br><span class="line">for &#x2F;L %%i in (1 1 38) do set &#x2F;p a&#x3D;■&lt;nul&amp;ping &#x2F;n 1 127.0.0.1&gt;nul</span><br><span class="line">echo   100%%</span><br><span class="line">echo  └──────────────────────────────────────┘</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">解说：“set &#x2F;p a&#x3D;■&lt;nul”的意思是：只显示提示信息“■”且不换行，也不需手工输入任何信息，这样可以使每个“■”在同一行逐个输出。“ping &#x2F;n 0 127.1&gt;nul”是输出每个“■”的时间间隔，即每隔多少时间输出一个“■”。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">十一、特殊字符的输入及应用</span><br><span class="line"></span><br><span class="line">开始 -&gt; 运行 -&gt; 输入cmd -&gt; edit -&gt; ctrl+p（意思是允许输入特殊字符）-&gt; 按ctrl+a将会显示笑脸图案。</span><br><span class="line"></span><br><span class="line">（如果要继续输入特殊字符请再次按ctrl+p，然后ctrl+某个字母）</span><br><span class="line"></span><br><span class="line">以上是特殊字符的输入方法，选自[英雄]教程，很管用的。也就是用编辑程序edit输入特殊字符，然后保存为一文本文件，再在windows下打开此文件，复制其中的特殊符号即可。</span><br><span class="line"></span><br><span class="line">一些简单的特殊符号可以在dos命令窗口直接输入，并用重定向保存为文本文件。</span><br><span class="line">例：</span><br><span class="line">C:&gt;ECHO ^G&gt;temp.txt</span><br><span class="line">“^G”是用Ctrl＋G或Alt＋007输入，输入多个^G可以产生多声鸣响。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">特殊字符的应用也很有意思，这里仅举一例：退格键</span><br><span class="line"></span><br><span class="line">退格键表示删除左边的字符，此键不能在文档中正常输入，但可以通过edit编辑程序录入并复制出来。即“”。</span><br><span class="line"></span><br><span class="line">利用退格键，可以设计闪烁文字效果</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">例：文字闪烁</span><br><span class="line">@echo off</span><br><span class="line">:start</span><br><span class="line">set&#x2F;p&#x3D;床前明月光&lt;nul</span><br><span class="line">::显示文字，光标停于行尾</span><br><span class="line">ping -n 0 127.0.0.1&gt;nul</span><br><span class="line">::设置延迟时间</span><br><span class="line">set &#x2F;p a&#x3D;&lt;nul</span><br><span class="line">:: 输出一些退格符将光标置于该行的最左端（退格符的数量可以自己调整）。</span><br><span class="line">set &#x2F;p a&#x3D;                               &lt;nul</span><br><span class="line">::输出空格将之前输出的文字覆盖掉。</span><br><span class="line">set &#x2F;p a&#x3D;&lt;nul</span><br><span class="line">::再次输出退格符将光标置于该行的最左端，这里的退格符数量一定不能比前面的空格数少。</span><br><span class="line">::否则光标不能退到最左端。</span><br><span class="line">goto start</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例：输出唐诗一首，每行闪动多次</span><br><span class="line">@echo off</span><br><span class="line">setlocal enabledelayedexpansion</span><br><span class="line"></span><br><span class="line">set str&#x3D;床前明月光 疑是地上霜 举头望明月 低头思故乡</span><br><span class="line">::定义字符串str</span><br><span class="line">for %%i in (%str%) do (</span><br><span class="line"> rem 由于str中含有空格，则以空格为分隔符将str中的每一个部分依次赋给变量%%i。</span><br><span class="line">        set char&#x3D;%%i</span><br><span class="line">        echo.</span><br><span class="line">        echo.</span><br><span class="line">        for &#x2F;l %%j in (0,1,5) do (</span><br><span class="line">                set&#x2F;p&#x3D;!char:~%%j,1!&lt;nul</span><br><span class="line">  rem 依次取出变量char中的每一个字符，并显示。</span><br><span class="line">                ping -n 0 127.0.0.1&gt;nul</span><br><span class="line">  rem 设置输出每个字符的时间延迟。</span><br><span class="line">        )</span><br><span class="line"> call :hero %%i</span><br><span class="line">)</span><br><span class="line">pause&gt;nul</span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line">:hero</span><br><span class="line">for &#x2F;l %%k in (1,1,10) do (</span><br><span class="line"> ping &#x2F;n 0 127.0.0.1&gt;nul</span><br><span class="line"> set &#x2F;p a&#x3D;&lt;nul</span><br><span class="line"> set &#x2F;p a&#x3D;                               &lt;nul</span><br><span class="line"> set &#x2F;p a&#x3D;&lt;nul</span><br><span class="line"> ping &#x2F;n 0 127.0.0.1&gt;nul</span><br><span class="line"> set &#x2F;p a&#x3D;%1&lt;nul</span><br><span class="line">)</span><br><span class="line">::文字闪动</span><br><span class="line">goto :eof</span><br><span class="line"></span><br><span class="line">----------------------------</span><br><span class="line">神秘的瑜伽</span><br><span class="line">----------------------------</span><br><span class="line">印度的瑜伽术充满了神奇，很多人曾亲眼见识过瑜伽师的奇特本领。他们能够表演“千里问诊”、“外气治病”、“静会腾身”、“思维传递”等令人拍案称奇的功夫；更玄的是，有的瑜伽师还能控制自己心脏的跳动，这不能不令观者瞠目结舌。一位叫马哈里的瑜伽师就当众做过这种表演。在他运气静坐的时候，没有脉搏和心音。医生的心电图显示为一条直线！这真是让人难以相信。而另一位叫萨蒂雅鲁尔蒂的瑜伽师更是在众目睽睽之下被活埋了８昼夜。他在这期间没有进食，没有脉搏，没有呼吸，心电图也出现了直线，直到最后一天心电图才恢复成曲线。他出土的时候，全身僵硬，反应麻木，过了一段时间后才渐渐恢复正常。</span><br><span class="line">    科学家力图用科学知识对此做出合理解释。他们发现在瑜伽师静坐练功的时候，其人体代谢会降低，耗氧量会减少，肌体也能得到充分休息。而在表演心脏停止时，他们或者急剧提高腹压，减少心脏供血，而使其体积变小、活动减弱；或者是通过猛烈收缩胃部，使相应神经急剧紧张，而大大降低心脏活动。可这些都只能使瑜伽师能在一定程度上控制心脏活动，而他们居然能使心脏完全停止跳动，这是现代科学所无法解答的。</span><br><span class="line">————选自《世界未解之谜》</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">十二、随机数（%random%）的应用技巧</span><br><span class="line"></span><br><span class="line">%RANDOM% 系统变量 返回 0 到 32767 之间的任意十进制数字。由 Cmd.exe 生成。</span><br><span class="line"></span><br><span class="line">2的15次方等于32768，上面的0～32767实际就是15位二进制数的范围。</span><br><span class="line"></span><br><span class="line">那么，如何获取100以内的随机数呢？很简单，将%RANDOM%按100进行求余运算即可，见例子。</span><br><span class="line"></span><br><span class="line">例：生成5个100以内的随机数</span><br><span class="line">  @echo off</span><br><span class="line">  setlocal enabledelayedexpansion</span><br><span class="line">  for &#x2F;L %%i in (1 1 5) do (</span><br><span class="line">     set &#x2F;a randomNum&#x3D;!random!%%100</span><br><span class="line">     echo 随机数：!randomNum!</span><br><span class="line">  )</span><br><span class="line">  pause</span><br><span class="line">运行结果：（每次运行不一样）</span><br><span class="line">随机数：91</span><br><span class="line">随机数：67</span><br><span class="line">随机数：58</span><br><span class="line">随机数：26</span><br><span class="line">随机数：20</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line">求余数运算set &#x2F;a randomNum&#x3D;!random!%%100中的100可以是1～32768之间的任意整数。</span><br><span class="line"></span><br><span class="line">总结：利用系统变量%random%，求余数运算%%，字符串处理等，可以实现很多随机处理。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">思考题目：生成给定位数的随机密码</span><br><span class="line">解答思路：将26个英文字母或10数字以及其它特殊字符组成一个字符串，随机抽取其中的若干字符。</span><br><span class="line"></span><br><span class="line">参考答案1：（简单）</span><br><span class="line">@echo off</span><br><span class="line">call :randomPassword 5 pass1 pass2</span><br><span class="line">echo %pass1% %pass2% </span><br><span class="line">pause</span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line">:randomPassword</span><br><span class="line">::---------生成随机密码</span><br><span class="line">::---------%1为密码长度，%2及以后为返回变量名称</span><br><span class="line">::---------for命令最多只能区分31个字段</span><br><span class="line">@echo off</span><br><span class="line">set password_len&#x3D;%1</span><br><span class="line">if not defined password_len goto :eof</span><br><span class="line">if %password_len% lss 1 goto :eof</span><br><span class="line">set wordset&#x3D;a b c d e f g h i j k l m n o p q r s t u v w x y z</span><br><span class="line">set return&#x3D;</span><br><span class="line">set num&#x3D;0</span><br><span class="line">:randomPassword1</span><br><span class="line">set &#x2F;a num+&#x3D;1</span><br><span class="line">set &#x2F;a numof&#x3D;%random%%%26+1</span><br><span class="line">for &#x2F;f &quot;tokens&#x3D;%numof% delims&#x3D; &quot; %%i in (&quot;%wordset%&quot;) do set return&#x3D;%return%%%i</span><br><span class="line">if %num% lss %password_len% goto randomPassword1</span><br><span class="line">if not &quot;%2&quot;&#x3D;&#x3D;&quot;&quot; set %2&#x3D;%return%</span><br><span class="line">shift &#x2F;2</span><br><span class="line">if not &quot;%2&quot;&#x3D;&#x3D;&quot;&quot; goto randomPassword</span><br><span class="line">goto :eof</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">参考答案2：（最优）</span><br><span class="line">@echo off</span><br><span class="line">call :randomPassword 6 pass1 pass2 pass3</span><br><span class="line">echo %pass1% %pass2% %pass3%</span><br><span class="line">pause</span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line">:randomPassword</span><br><span class="line">::---------生成随机密码</span><br><span class="line">::---------%1为密码长度，%2及以后为返回变量名称</span><br><span class="line">::---------goto循环、变量嵌套、命令嵌套</span><br><span class="line">@echo off</span><br><span class="line">if &quot;%1&quot;&#x3D;&#x3D;&quot;&quot; goto :eof</span><br><span class="line">if %1 lss 1 goto :eof</span><br><span class="line">set password_len&#x3D;%1</span><br><span class="line">set return&#x3D;</span><br><span class="line">set wordset&#x3D;abcdefghijklmnopqrstuvwxyz023456789_</span><br><span class="line">::---------------------------循环</span><br><span class="line">:randomPassword1</span><br><span class="line">set &#x2F;a numof&#x3D;%random%%%36</span><br><span class="line">call set return&#x3D;%return%%%wordset:~%numof%,1%%</span><br><span class="line">set &#x2F;a password_len-&#x3D;1</span><br><span class="line">if %password_len% gtr 0 goto randomPassword1</span><br><span class="line">::---------------------------循环</span><br><span class="line">if not &quot;%2&quot;&#x3D;&#x3D;&quot;&quot; set %2&#x3D;%return%</span><br><span class="line">shift &#x2F;2</span><br><span class="line">if not &quot;%2&quot;&#x3D;&#x3D;&quot;&quot; goto randomPassword</span><br><span class="line">goto :eof</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">说明：本例涉及到变量嵌套和命令嵌套的应用，见后。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">十三、变量嵌套 与 命令嵌套</span><br><span class="line"></span><br><span class="line">    和其它编程语言相比，dos功能显得相对简单，要实现比较复杂的功能，需要充分运用各种技巧，变量嵌套与命令嵌套就是此类技巧之一。</span><br><span class="line"></span><br><span class="line">先复习一下前面的“字符串截取”的关键内容：</span><br><span class="line"></span><br><span class="line">**********************************************</span><br><span class="line">截取功能统一语法格式为：%a:~[m[,n]]%</span><br><span class="line">**********************************************</span><br><span class="line">方括号表示可选，%为变量标识符，a为变量名，不可少，冒号用于分隔变量名和说明部分，符号～可以简单理解为“偏移”即可，m为偏移量（缺省为0），n为截取长度（缺省为全部）。</span><br><span class="line"></span><br><span class="line">百分号如果需要当成单一字符，必须写成%%</span><br><span class="line"></span><br><span class="line">以上是dos变量处理的通用格式，如果其中的m、n为变量，那么这种情况就是变量嵌套了。</span><br><span class="line"></span><br><span class="line">比如设变量word为“abcdefghij”，变量num为“eee4eeeee”</span><br><span class="line">%word:~4,1%为e，其中4可以从变量num中取值，即%num:~3,1%，写成组合形式如下：</span><br><span class="line">%word:~%num:~3,1%,1% 经测试这种写法不能正确执行，那么，怎么实现这种变量嵌套呢？首先，我们将其中的%num:~3,1%作为正常的字符处理命令，其它部分当成一般字符串，这样首尾的%就必须写成%%了，即%%word:~%num:~3,1%,1%%</span><br><span class="line">但是上面的写法同样不能直接当成命令执行，必须运用命令嵌套才能执行。</span><br><span class="line"></span><br><span class="line">什么是命令嵌套呢？简单的说，首先用一条dos命令生成一个字符串，而这个字符串是另一条dos命令，用call语句调用字符串将其执行，从而得到最终结果。</span><br><span class="line"></span><br><span class="line">例：用call语句实现命令嵌套</span><br><span class="line">@echo off</span><br><span class="line">set str1&#x3D;aaa echo ok bbb</span><br><span class="line">echo 初始字符串：%str1%</span><br><span class="line">echo 生成命令字符串如下：</span><br><span class="line">echo %str1:~4,7%</span><br><span class="line">echo 运行命令字符串生成最终结果为：</span><br><span class="line">call %str1:~4,7%</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">运行显示：</span><br><span class="line"></span><br><span class="line">初始字符串：aaa echo ok bbb</span><br><span class="line">生成命令字符串如下：</span><br><span class="line">echo ok</span><br><span class="line">运行命令字符串生成最终结果为：</span><br><span class="line">ok</span><br><span class="line">请按任意键继续. . .</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">变量嵌套与命令嵌套结合运用，见下例。</span><br><span class="line">@echo off</span><br><span class="line"></span><br><span class="line">set num&#x3D;Redtek 2006 bbs.cn-dos.net</span><br><span class="line">set a&#x3D;123245</span><br><span class="line">set b&#x3D;87754321</span><br><span class="line"></span><br><span class="line">echo.</span><br><span class="line">echo a&#x3D;%a%  b&#x3D;%b%  num&#x3D;%num%</span><br><span class="line">set result&#x3D;%%%%%%%%num:~%%%%b:~%a:~3,1%,1%%%%,4%%%%%%%%</span><br><span class="line">echo 直接运行命令，只解析第一层变量，其余的当作字符串：%result%</span><br><span class="line"></span><br><span class="line">call set result&#x3D;%%%%%%%%num:~%%%%b:~%a:~3,1%,1%%%%,4%%%%%%%%</span><br><span class="line">echo 一层命令嵌套，可解析两层变量，其余的当作字符串：%result%</span><br><span class="line"></span><br><span class="line">call call set result&#x3D;%%%%%%%%num:~%%%%b:~%a:~3,1%,1%%%%,4%%%%%%%%</span><br><span class="line">echo 两层命令嵌套，可解析三层变量，其余的当作字符串：%result%</span><br><span class="line"></span><br><span class="line">call call call set result&#x3D;%%%%%%%%num:~%%%%b:~%a:~3,1%,1%%%%,4%%%%%%%%</span><br><span class="line">echo 三层命令嵌套，运行变量解析完后的字符串：%result%</span><br><span class="line"></span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">十四、文件内容筛选（type和findstr命令结合使用）</span><br><span class="line"></span><br><span class="line">Find常和type命令结合使用</span><br><span class="line">Type [drive:][path]filename | find &quot;string&quot; [&gt;tmpfile] #挑选包含string的行</span><br><span class="line">Type [drive:][path]filename | find &#x2F;v &quot;string&quot;   #剔除文件中包含string的行</span><br><span class="line">Type [drive:][path]filename | find &#x2F;c   #显示文件行数 </span><br><span class="line">以上用法将去除find命令自带的提示语（文件名提示）</span><br><span class="line"></span><br><span class="line">FIND [&#x2F;V] [&#x2F;C] [&#x2F;N] [&#x2F;I] [&#x2F;OFF[LINE]] &quot;string&quot; [[drive:][path]filename[ ...]]</span><br><span class="line"></span><br><span class="line">  &#x2F;V        显示所有未包含指定字符串的行。</span><br><span class="line">  &#x2F;C        仅显示包含字符串的行数。</span><br><span class="line">  &#x2F;N        显示行号。</span><br><span class="line">  &#x2F;I        搜索字符串时忽略大小写。</span><br><span class="line">  &#x2F;OFF[LINE] 不要跳过具有脱机属性集的文件。</span><br><span class="line">  &quot;string&quot;  指定要搜索的文字串，</span><br><span class="line">  [drive:][path]filename</span><br><span class="line">            指定要搜索的文件。</span><br><span class="line"></span><br><span class="line">如果没有指定路径，FIND 将搜索键入的或者由另一命令产生的文字。</span><br><span class="line"></span><br><span class="line">find命令不能处理文件中超过1024个字符的数据行，此时可用findstr命令。（见前面介绍）</span><br><span class="line"></span><br><span class="line">FINDSTR [&#x2F;B] [&#x2F;E] [&#x2F;L] [&#x2F;R] [&#x2F;S] [&#x2F;I] [&#x2F;X] [&#x2F;V] [&#x2F;N] [&#x2F;M] [&#x2F;O] [&#x2F;F:file]</span><br><span class="line">        [&#x2F;C:string] [&#x2F;G:file] [&#x2F;D:dir list] [&#x2F;A:color attributes] [&#x2F;OFF[LINE]]</span><br><span class="line">        strings [[drive:][path]filename[ ...]]</span><br><span class="line"></span><br><span class="line">  &#x2F;B        在一行的开始配对模式。</span><br><span class="line">  &#x2F;E        在一行的结尾配对模式。</span><br><span class="line">  &#x2F;L        按字使用搜索字符串。</span><br><span class="line">  &#x2F;R        将搜索字符串作为一般表达式使用。</span><br><span class="line">  &#x2F;S        在当前目录和所有子目录中搜索</span><br><span class="line">              匹配文件。</span><br><span class="line">  &#x2F;I         指定搜索不分大小写。</span><br><span class="line">  &#x2F;X        打印完全匹配的行。</span><br><span class="line">  &#x2F;V        只打印不包含匹配的行。</span><br><span class="line">  &#x2F;N        在匹配的每行前打印行数。</span><br><span class="line">  &#x2F;M        如果文件含有匹配项，只打印其文件名。</span><br><span class="line">  &#x2F;O        在每个匹配行前打印字符偏移量。</span><br><span class="line">  &#x2F;P        忽略有不可打印字符的文件。</span><br><span class="line">  &#x2F;OFF[LINE] 不跳过带有脱机属性集的文件。</span><br><span class="line">  &#x2F;A:attr   指定有十六进位数字的颜色属性。请见 &quot;color &#x2F;?&quot;</span><br><span class="line">  &#x2F;F:file   从指定文件读文件列表 (&#x2F; 代表控制台)。</span><br><span class="line">  &#x2F;C:string 使用指定字符串作为文字搜索字符串。</span><br><span class="line">  &#x2F;G:file   从指定的文件获得搜索字符串。 (&#x2F; 代表控制台)。</span><br><span class="line">  &#x2F;D:dir    查找以分号为分隔符的目录列表</span><br><span class="line">  strings   要查找的文字。</span><br><span class="line">  [drive:][path]filename</span><br><span class="line">            指定要查找的文件。</span><br><span class="line"></span><br><span class="line">除非参数有 &#x2F;C 前缀，请使用空格隔开搜索字符串。</span><br><span class="line">例如: &#39;FINDSTR &quot;hello there&quot; x.y&#39; 在文件 x.y 中寻找 &quot;hello&quot; 或</span><br><span class="line">&quot;there&quot; 。  &#39;FINDSTR &#x2F;C:&quot;hello there&quot; x.y&#39; 文件 x.y  寻找</span><br><span class="line">&quot;hello there&quot;。</span><br><span class="line"></span><br><span class="line">一般表达式的快速参考:</span><br><span class="line">  .        通配符: 任何字符</span><br><span class="line">  *        重复: 以前字符或类别出现零或零以上次数</span><br><span class="line">  ^        行位置: 行的开始</span><br><span class="line">  $        行位置: 行的终点</span><br><span class="line">  [class]  字符类别: 任何在字符集中的字符</span><br><span class="line">  [^class] 补字符类别: 任何不在字符集中的字符</span><br><span class="line">  [x-y]    范围: 在指定范围内的任何字符</span><br><span class="line">  \x       Escape: 元字符 x 的文字用法</span><br><span class="line">  \&lt;xyz    字位置: 字的开始</span><br><span class="line">  xyz\&gt;    字位置: 字的结束</span><br><span class="line"></span><br><span class="line">有关 FINDSTR 常见表达法的详细情况，请见联机命令参考。</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2020/05/11/DOS%E6%89%B9%E5%A4%84%E7%90%86%E9%AB%98%E7%BA%A7%E6%95%99%E7%A8%8B/" data-id="ckdk0gkph0007jo2632e7d0be" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-archlinux/archlinux给软件包systemd配置文件打补丁" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/12/archlinux/archlinux%E7%BB%99%E8%BD%AF%E4%BB%B6%E5%8C%85systemd%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%89%93%E8%A1%A5%E4%B8%81/" class="article-date">
  <time datetime="2020-04-12T13:18:36.000Z" itemprop="datePublished">2020-04-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ArchLinux/">ArchLinux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/12/archlinux/archlinux%E7%BB%99%E8%BD%AF%E4%BB%B6%E5%8C%85systemd%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%89%93%E8%A1%A5%E4%B8%81/">archlinux给软件包systemd配置文件打补丁</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ref : <a href="https://wiki.archlinux.org/index.php/Systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E4%BF%AE%E6%94%B9%E7%8E%B0%E5%AD%98%E5%8D%95%E5%85%83%E6%96%87%E4%BB%B6" target="_blank" rel="noopener">https://wiki.archlinux.org/index.php/Systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E4%BF%AE%E6%94%B9%E7%8E%B0%E5%AD%98%E5%8D%95%E5%85%83%E6%96%87%E4%BB%B6</a></p>
<p>用 <code>systemctl edit &lt;unit&gt;</code> 编辑单元(会自动重载单元)<br>这将会在编辑器中打开文件 <code>/etc/systemd/system/&lt;unit&gt;.d/override.conf</code>，编辑完成之后自动加载。 </p>
<p>重置到软件包版本, 要回退单元的变更 <code>systemctl revert unit</code></p>
<p>通过 <code>systemctl daemon-reload</code> 命令重新加载单元 </p>
<p>使用 <code>systemd-delta</code> 命令用来查看哪些单元文件被覆盖、哪些被修改。系统维护的时候需要及时了解哪些单元已经有了更新。</p>
<p>使用 <code>systemctl cat &lt;unit&gt;</code> 可以查看单元的内容和所有相关的片段.</p>
<hr>
<p>实例：</p>
<p>给 qbittorrent 程序设置Restart</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl edit qbittorrent-nox@jeremie</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Restart&#x3D;always</span><br></pre></td></tr></table></figure>

<hr>
<p>给 trojan 程序设置Restart</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">systemctl edit trojan</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">User&#x3D;trojan</span><br></pre></td></tr></table></figure>




      
    </div>
    <footer class="article-footer">
      <a data-url="http://hexo.jeremie.moe/2020/04/12/archlinux/archlinux%E7%BB%99%E8%BD%AF%E4%BB%B6%E5%8C%85systemd%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%89%93%E8%A1%A5%E4%B8%81/" data-id="ckdk0gkt6005zjo26b41tb2le" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AHK/">AHK</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ArchLinux/">ArchLinux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Code/">Code</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Erlang/">Erlang</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/GalGame/">GalGame</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/OpenWRT/">OpenWRT</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/WinSDK/">WinSDK</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/firefox/">firefox</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/memo/">memo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/notes/">notes</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E7%81%B5/">人工智灵</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B3%E4%BA%8EBlog/">关于Blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%87%E5%BF%98/">备忘</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%87%E5%BF%98/Notes/">Notes</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%87%E5%BF%98/%E6%9D%82%E7%89%A9/">杂物</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/">密码学</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/">未分类</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E7%89%A9/">杂物</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E7%89%A9/Notes/">Notes</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A8%B1%E8%8A%B1%E5%BA%84%E7%9A%84%E5%AE%A0%E7%89%A9%E5%A5%B3%E5%AD%A9/">樱花庄的宠物女孩</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/">游戏制作</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/Notes/">Notes</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%8A%B1%E4%BD%91%E4%BA%AC%E5%A5%B3%E4%BB%86%E9%98%9F/">花佑京女仆队</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ePost/" rel="tag">ePost</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ePost/" style="font-size: 10px;">ePost</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">五月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">四月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">六月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">五月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">四月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">三月 2013</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/08/07/%E4%BB%80%E4%B9%88%E6%98%AF%E6%83%AF%E6%80%A7%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F/">什么是惯性导航系统？</a>
          </li>
        
          <li>
            <a href="/2020/08/07/%E5%85%A8%E7%90%83%E5%8D%AB%E6%98%9F%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-GNSS-%E7%AE%80%E4%BB%8B/">全球卫星导航系统 (GNSS) 简介</a>
          </li>
        
          <li>
            <a href="/2020/07/28/cryptography/%E5%AF%86%E7%A0%81%E5%AD%A6%E4%B8%80%E5%B0%8F%E6%97%B6%E5%BF%85%E7%9F%A5/">密码学一小时必知[2010]</a>
          </li>
        
          <li>
            <a href="/2020/07/28/cryptography/%E7%8E%B0%E4%BB%A3%E5%AF%86%E7%A0%81%E5%AD%A6%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97/">现代密码学实践指南[2015年]</a>
          </li>
        
          <li>
            <a href="/2020/07/17/archlinux/Archlinux-%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E6%B8%85%E7%90%86-free-disk-space/">Archlinux 磁盘空间清理 free disk space</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Jeremie<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives/" class="mobile-nav-link">归档</a>
  
    <a href="/about-blog/" class="mobile-nav-link">关于Blog</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>